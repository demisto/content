commonfields:
  id: 1959e12f-4cd3-4c8d-8fd1-6c6e42a7a346
  version: 6
name: GetOwnerEmail
script: |-
  """
  This script is used to get the owner of the incidents email

  """

  def get_owner_email():
      owner_username = demisto.incidents()[0].get("owner")
      if owner_username:
          try:
              owner_info = demisto.executeCommand('getUserByUsername', {"username":owner_username})[0]
              owner_email = owner_info.get("EntryContext").get("UserByUsername").get("email")
              readable_output = "# Incident Owners Email \n" + owner_email
              outputs = {'IncOwnerEmail': owner_email}
              return return_outputs(readable_output, outputs, owner_email)
          except Exception as ex:
              return_error("Error: {}".format(ex))
      else:
              return_error("Error: Email for owner of incident was not found")

  get_owner_email()
type: python
tags:
- Bonusly
- Utilities
comment: 'This script will get the owner of the incidents email address and return
  it to the context. '
enabled: true
outputs:
- contextPath: IncOwnerEmail
  description: Incident Owners Email Address
scripttarget: 0
subtype: python3
pswd: ""
runonce: false
dockerimage: demisto/python3:3.8.2.8159
runas: DBotWeakRole
