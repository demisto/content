id: Create Ticket and Notify
version: -1
contentitemexportablefields:
  contentitemfields: {}
name: Create Ticket and Notify
description: This playbook automates the handling of issues, sending them through ServiceNow v2 or Jira v3 and notifying stakeholders via Slack v3, Microsoft Teams, or email. You have the flexibility to create or update a ticket using Jira or ServiceNow, to notify other teams using Slack or Microsoft Teams, or to send an email. You can choose to only create or update a ticket and skip the notification, skip creating or updating a ticket and send only a notification, or both create or update a ticket and notify relevant parties. This playbook requires existing integrations with Jira, ServiceNow, Slack, or Microsoft Teams to perform these actions. If none of these integrations are found in your account, the playbook will post message to the Issue War Room notifying the missing integrations.
starttaskid: "0"
fromversion: 6.10.0
tasks:
  "0":
    id: "0"
    taskid: dc498787-a95b-4ed3-8113-06188f8bbd22
    type: start
    task:
      id: dc498787-a95b-4ed3-8113-06188f8bbd22
      version: -1
      name: ""
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "61"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 380,
          "y": -1330
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "15":
    id: "15"
    taskid: be95f837-2f84-4e90-8eee-aff56c818131
    type: title
    task:
      id: be95f837-2f84-4e90-8eee-aff56c818131
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
      description: ''
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 380,
          "y": 1860
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "16":
    id: "16"
    taskid: cc7a75f1-d811-41ff-8f33-752cf39de2b3
    type: condition
    task:
      id: cc7a75f1-d811-41ff-8f33-752cf39de2b3
      version: -1
      name: Check State Input
      description: Checks if State Input is Create / Update
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      Create:
      - "42"
      Update:
      - "38"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Create
    - label: Update
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -300,
          "y": 440
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "21":
    id: "21"
    taskid: 2c289e73-23eb-4fa5-8667-ff76094b61be
    type: regular
    task:
      id: 2c289e73-23eb-4fa5-8667-ff76094b61be
      version: -1
      name: Create Issue ServiceNow ticket
      description: Creates new ServiceNow ticket.
      script: ServiceNow v2|||servicenow-create-ticket-quick-action
      type: regular
      iscommand: true
      brand: ServiceNow v2
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      description:
        simple: |-
          Issue Detected for Asset: ${Core.CoreAsset.xdm__asset__name}

          Issue Details

          Issue Name: ${issue.name}
          Severity Level: ${issue.severity}
          Category: ${issue.alert_category}
          Asset Name: ${Core.CoreAsset.xdm__asset__name}
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}
          Issue Created: ${issue.created}
          Issue URL: ${demistoUrls.server}/issue-view/${issue.id}
      severity:
        simple: ${issue.severity}
      short_description:
        simple: Detected Issue - ${issue.name}
      ticket_type:
        simple: incident
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -930,
          "y": -320
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "24":
    id: "24"
    taskid: 8f153463-ca34-4aa8-832d-4122dc84fb04
    type: regular
    task:
      id: 8f153463-ca34-4aa8-832d-4122dc84fb04
      version: -1
      name: Create Issue Jira ticket
      description: Creates a new issue in Jira.
      script: Jira V3|||jira-create-issue-quick-action
      type: regular
      iscommand: true
      brand: Jira V3
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      description:
        simple: |-
          Issue Detected for Asset: ${Core.CoreAsset.xdm__asset__name}

          Issue Details

          Issue Name: ${issue.name}
          Severity Level: ${issue.severity}
          Category: ${issue.alert_category}
          Asset Name: ${Core.CoreAsset.xdm__asset__name}
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}
          Issue Created: ${issue.created}
          Issue URL: ${demistoUrls.server}/issue-view/${issue.id}
      issue_type_name:
        simple: Task
      project_key:
        simple: ${inputs.Jira Project Key}${Please Provide Jira Project Key.Answers.0}
      summary:
        simple: Detected Issue - ${issue.name}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 640,
          "y": 30
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "30":
    id: "30"
    taskid: 18608ca0-e21d-48ed-8530-b57b2adea9ab
    type: title
    task:
      id: 18608ca0-e21d-48ed-8530-b57b2adea9ab
      version: -1
      name: Create or Update Issue ticket
      type: title
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "60"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 377.5,
          "y": -820
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "31":
    id: "31"
    taskid: a7fd79d5-4f16-4776-87a2-894261efc10b
    type: title
    task:
      id: a7fd79d5-4f16-4776-87a2-894261efc10b
      version: -1
      name: Notification via Teams / Slack
      type: title
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "63"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 377.5,
          "y": 180
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "32":
    id: "32"
    taskid: 2ff0e02c-dec9-4466-aa39-7cfefa773624
    type: condition
    task:
      id: 2ff0e02c-dec9-4466-aa39-7cfefa773624
      version: -1
      name: Is Jira Project Key Input Provided?
      description: Checks if Jira Project Key exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "No":
      - "51"
      "Yes":
      - "52"
    separatecontext: false
    conditions:
    - label: "Yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: inputs.Jira Project Key
            iscontext: true
          right:
            value: {}
        - operator: isNotEmpty
          left:
            value:
              simple: Please Provide Jira Project Key.Answers.0
            iscontext: true
    - label: "No"
      condition:
      - - operator: isEmpty
          left:
            value:
              simple: inputs.Jira Project Key
            iscontext: true
      - - operator: isEmpty
          left:
            value:
              simple: Please Provide Jira Project Key.Answers.0
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 840,
          "y": -470
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "34":
    id: "34"
    taskid: b59b4217-52e3-48d5-8fde-4c3ae8c3b112
    type: title
    task:
      id: b59b4217-52e3-48d5-8fde-4c3ae8c3b112
      version: -1
      name: Email Notification
      type: title
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "57"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 377.5,
          "y": 1070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "36":
    id: "36"
    taskid: 1ee1d774-ba40-44b1-8c67-44d281102578
    type: regular
    task:
      id: 1ee1d774-ba40-44b1-8c67-44d281102578
      version: -1
      name: Send Slack Notification
      description: Sends a message to a user, group, or channel.
      script: SlackV3|||slack-send-notification-quick-action
      type: regular
      iscommand: true
      brand: SlackV3
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      channel:
        simple: ${inputs.Slack Channel Name}${Please Provide Slack Channel Name.Answers.0}
      message:
        simple: |-
          Issue Detected for Asset: ${Core.CoreAsset.xdm__asset__name}

          Issue Details

          Issue Name: ${issue.name}
          Severity Level: ${issue.severity}
          Category: ${issue.alert_category}
          Asset Name: ${Core.CoreAsset.xdm__asset__name}
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}
          Issue Created: ${issue.created}
          Issue URL: ${demistoUrls.server}/issue-view/${issue.id}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 670,
          "y": 920
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "38":
    id: "38"
    taskid: 24f139be-383b-47ab-8193-4f00470ec6df
    type: regular
    task:
      id: 24f139be-383b-47ab-8193-4f00470ec6df
      version: -1
      name: Update Microsoft Teams Notification
      description: Send a message to Microsoft Teams via Incoming Webhook.
      script: Microsoft Teams via Webhook|||ms-teams-message
      type: regular
      iscommand: true
      brand: Microsoft Teams via Webhook
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      message:
        simple: |-
          Issue Resolved for Asset: ${Core.CoreAsset.xdm__asset__name}\n\n

          Issue - ${issue.name}\n
          Category: ${issue.alert_category}\n
          Asset Name: ${Core.CoreAsset.xdm__asset__name}\n
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}\n
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}\n
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}\n
          Remediation: Success\n
          Issue Status: Resolved\n
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -80,
          "y": 590
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "41":
    id: "41"
    taskid: 98a9aaf3-adf7-4662-a645-7d0bac652317
    type: regular
    task:
      id: 98a9aaf3-adf7-4662-a645-7d0bac652317
      version: -1
      name: Update Slack Notification
      description: Sends a message to a user, group, or channel.
      script: SlackV3|||slack-send-notification-quick-action
      type: regular
      iscommand: true
      brand: SlackV3
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      channel:
        simple: ${inputs.Slack Channel Name}
      message:
        simple: |-
          Issue Resolved for Asset: ${Core.CoreAsset.xdm__asset__name}

          Issue - ${issue.name}
          Category: ${issue.alert_category}
          Asset Name: ${Core.CoreAsset.xdm__asset__name}
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}
          Remediation: Success
          Issue Status: Resolved
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1190,
          "y": 920
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "42":
    id: "42"
    taskid: 6001a418-1a42-4481-8b65-ac494f439bb3
    type: regular
    task:
      id: 6001a418-1a42-4481-8b65-ac494f439bb3
      version: -1
      name: Send Microsoft Teams Notification
      description: Send a message to Microsoft Teams via Incoming Webhook.
      script: Microsoft Teams via Webhook|||ms-teams-message
      type: regular
      iscommand: true
      brand: Microsoft Teams via Webhook
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      message:
        simple: |-
          Issue Detected for Asset: ${Core.CoreAsset.xdm__asset__name}\n\n

          Issue Details\n\n

          Issue Name: ${issue.name}\n
          Severity Level: ${issue.severity}\n
          Category: ${issue.alert_category}\n
          Asset Name: ${Core.CoreAsset.xdm__asset__name}\n
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}\n
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}\n
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}\n
          Issue Created: ${issue.created}\n
          Issue URL: ${demistoUrls.server}/issue-view/${issue.id}\n
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -530,
          "y": 590
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "44":
    id: "44"
    taskid: 7e771f4d-de73-4f6d-85da-65efbe4d0567
    type: regular
    task:
      id: 7e771f4d-de73-4f6d-85da-65efbe4d0567
      version: -1
      name: Update Issue ServiceNow ticket
      description: Updates the specified ticket.
      script: ServiceNow v2|||servicenow-update-ticket
      type: regular
      iscommand: true
      brand: ServiceNow v2
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      comments:
        simple: |-
          Issue Resolved for Asset: ${Core.CoreAsset.xdm__asset__name}

          Issue - ${issue.name}
          Category: ${issue.alert_category}
          Asset Name: ${Core.CoreAsset.xdm__asset__name}
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}
          Remediation: Success
          Issue Status: Resolved
      id:
        simple: ${ServiceNow.Ticket.ID}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -330,
          "y": -320
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "45":
    id: "45"
    taskid: 64f42a99-ee05-4a33-8832-c5f9985fd633
    type: regular
    task:
      id: 64f42a99-ee05-4a33-8832-c5f9985fd633
      version: -1
      name: Update Issue Jira ticket
      description: Adds a new comment to an existing Jira issue.
      script: Jira V3|||jira-issue-add-comment
      type: regular
      iscommand: true
      brand: Jira V3
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      comment:
        simple: |-
          Issue Resolved for Asset: ${Core.CoreAsset.xdm__asset__name}

          Issue - ${issue.name}
          Category: ${issue.alert_category}
          Asset Name: ${Core.CoreAsset.xdm__asset__name}
          Asset Type: ${Core.CoreAsset.xdm__asset__type__name}
          Cloud Region: ${Core.CoreAsset.xdm__asset__cloud__region}
          Cloud Account ID: ${Core.CoreAsset.xdm__asset__realm}
          Remediation: Success
          Issue Status: Resolved
      issue_id:
        simple: ${Ticket.Id}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1090,
          "y": 20
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "46":
    id: "46"
    taskid: 79236f70-1fd3-46f3-83b9-ceff407c698a
    type: condition
    task:
      id: 79236f70-1fd3-46f3-83b9-ceff407c698a
      version: -1
      name: Is there an existing ServiceNow Ticket?
      description: Returns 'yes' if integration brand is available. Otherwise returns 'no'.
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "31"
      Create:
      - "21"
      Update:
      - "44"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEmpty
          left:
            value:
              simple: ServiceNow.Ticket.ID
            iscontext: true
          right:
            value: {}
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Create
          ignorecase: true
    - label: Update
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: ServiceNow.Ticket.ID
            iscontext: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -630,
          "y": -470
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "49":
    id: "49"
    taskid: 27836e79-d69c-4708-8489-a6ab8d1754e4
    type: regular
    task:
      id: 27836e79-d69c-4708-8489-a6ab8d1754e4
      version: -1
      name: Notify Microsoft Teams and Slack Integration status to War Room
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      value:
        simple: No MS Teams or Slack integration connected to your Cortex tenant. Please configure either one of these to send a message notification.
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 140,
          "y": 480
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "51":
    id: "51"
    taskid: a41fc0c7-51e7-4286-805c-3d8992622b18
    type: collection
    task:
      id: a41fc0c7-51e7-4286-805c-3d8992622b18
      version: -1
      name: Get Jira Project Key
      description: Gets Jira Project Key Input from User
      type: collection
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "52"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1120,
          "y": -320
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    message:
      to:
      subject:
      body:
      methods: []
      format: ""
      bcc:
      cc:
      timings:
        retriescount: 2
        retriesinterval: 360
        completeafterreplies: 1
        completeafterv2: true
        completeaftersla: false
    form:
      questions:
      - id: "0"
        label: ""
        labelarg:
          simple: Enter Jira Project Key
        required: false
        gridcolumns: []
        defaultrows: []
        type: shortText
        options: []
        optionsarg: []
        fieldassociated: ""
        placeholder: ""
        tooltip: ""
        readonly: false
      title: Please Provide Jira Project Key
      description: ""
      sender: ""
      expired: false
      totalanswers: 0
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "52":
    id: "52"
    taskid: 5abff33e-c09c-43da-8e52-f7d2575f9315
    type: condition
    task:
      id: 5abff33e-c09c-43da-8e52-f7d2575f9315
      version: -1
      name: Is there an existing Jira Ticket?
      description: Returns 'yes' if integration brand is available. Otherwise returns 'no'.
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "31"
      Create:
      - "24"
      Update:
      - "45"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEmpty
          left:
            value:
              simple: Ticket.Id
            iscontext: true
          right:
            value: {}
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Create
    - label: Update
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: Ticket.Id
            iscontext: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 840,
          "y": -170
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "56":
    id: "56"
    taskid: 84a26d02-b03b-454a-8f1c-03c02f716365
    type: collection
    task:
      id: 84a26d02-b03b-454a-8f1c-03c02f716365
      version: -1
      name: Get Slack Channel Name
      description: Gets Slack Channel Name from User
      type: collection
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "65"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 670,
          "y": 590
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    message:
      to:
      subject:
      body:
      methods: []
      format: ""
      bcc:
      cc:
      timings:
        retriescount: 2
        retriesinterval: 360
        completeafterreplies: 1
        completeafterv2: true
        completeaftersla: false
    form:
      questions:
      - id: "0"
        label: ""
        labelarg:
          simple: Enter Slack Channel Name
        required: false
        gridcolumns: []
        defaultrows: []
        type: shortText
        options: []
        optionsarg: []
        fieldassociated: ""
        placeholder: ""
        tooltip: ""
        readonly: false
      title: Please Provide Slack Channel Name
      description: ""
      sender: ""
      expired: false
      totalanswers: 0
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "57":
    id: "57"
    taskid: 99ec3f30-17f2-46d0-84ce-ac9a564d9a0f
    type: condition
    task:
      id: 99ec3f30-17f2-46d0-84ce-ac9a564d9a0f
      version: -1
      name: Check Notification Email Recipients Inputs
      description: Cheks if Notification Email Recipients is set to Yes and email address is provided
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      Input:
      - "58"
      "No":
      - "15"
      "Yes":
      - "69"
    separatecontext: false
    conditions:
    - label: "Yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to send an email notification?
            iscontext: true
          right:
            value:
              simple: "Yes"
          ignorecase: true
      - - operator: isNotEmpty
          left:
            value:
              simple: ${inputs.Notification Email Recipients}
            iscontext: true
        - operator: isNotEmpty
          left:
            value:
              simple: Please Provide Notification Email Recipients.Answers.0
            iscontext: true
    - label: Input
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to send an email notification?
            iscontext: true
          right:
            value:
              simple: "Yes"
          ignorecase: true
      - - operator: isEmpty
          left:
            value:
              simple: inputs.Notification Email Recipients
            iscontext: true
      - - operator: isEmpty
          left:
            value:
              simple: Please Provide Notification Email Recipients.Answers.0
            iscontext: true
    - label: "No"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to send an email notification?
            iscontext: true
          right:
            value:
              simple: "No"
          ignorecase: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 380,
          "y": 1230
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "58":
    id: "58"
    taskid: 69f8709c-233b-47ad-8b57-19bce30c17da
    type: collection
    task:
      id: 69f8709c-233b-47ad-8b57-19bce30c17da
      version: -1
      name: Get Notification Email Recipients
      description: Gets Notification Email Recipients input from user
      type: collection
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "69"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -67.5,
          "y": 1390
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    message:
      to:
      subject:
      body:
      methods: []
      format: ""
      bcc:
      cc:
      timings:
        retriescount: 2
        retriesinterval: 360
        completeafterreplies: 1
        completeafterv2: true
        completeaftersla: false
    form:
      questions:
      - id: "0"
        label: ""
        labelarg:
          simple: Enter Notification Email Recipients
        required: false
        gridcolumns: []
        defaultrows: []
        type: shortText
        options: []
        optionsarg: []
        fieldassociated: ""
        placeholder: ""
        tooltip: ""
        readonly: false
      title: Please Provide Notification Email Recipients
      description: ""
      sender: ""
      expired: false
      totalanswers: 0
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "60":
    id: "60"
    taskid: 523cb8e0-8539-4f05-83ac-295e085710f2
    type: condition
    task:
      id: 523cb8e0-8539-4f05-83ac-295e085710f2
      version: -1
      name: Check ServiceNow and Jira Integration
      description: Check if ticketing input is set to Yes and the configured module
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "71"
      Jira:
      - "32"
      "No":
      - "31"
      ServiceNow:
      - "46"
    separatecontext: false
    conditions:
    - label: Jira
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to create a ticket?
            iscontext: true
          right:
            value:
              simple: "Yes"
          ignorecase: true
      - - operator: isNotEmpty
          left:
            value:
              complex:
                root: modules
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.state
                      iscontext: true
                    right:
                      value:
                        simple: active
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.brand
                      iscontext: true
                    right:
                      value:
                        simple: Jira V3
                    ignorecase: true
            iscontext: true
    - label: ServiceNow
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to create a ticket?
            iscontext: true
          right:
            value:
              simple: "Yes"
          ignorecase: true
      - - operator: isNotEmpty
          left:
            value:
              complex:
                root: modules
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.brand
                      iscontext: true
                    right:
                      value:
                        simple: ServiceNow v2
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.state
                      iscontext: true
                    right:
                      value:
                        simple: active
            iscontext: true
          ignorecase: true
    - label: "No"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to create a ticket?
            iscontext: true
          right:
            value:
              simple: "No"
          ignorecase: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 380,
          "y": -670
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "61":
    id: "61"
    taskid: cb2443e0-269e-4bd3-83e1-3191642fa1fb
    type: condition
    task:
      id: cb2443e0-269e-4bd3-83e1-3191642fa1fb
      version: -1
      name: Is Asset Details Exists?
      description: Checks if Asset details exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "No":
      - "62"
      "yes":
      - "30"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: Core.CoreAsset.xdm__asset__name
            iscontext: true
          right:
            value: {}
    - label: "No"
      condition:
      - - operator: isEmpty
          left:
            value:
              simple: Core.CoreAsset.xdm__asset__name
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 380,
          "y": -1130
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "62":
    id: "62"
    taskid: b1840d9e-d5e6-4503-8712-e82c8875fd35
    type: regular
    task:
      id: b1840d9e-d5e6-4503-8712-e82c8875fd35
      version: -1
      name: Get Asset Details
      description: Get asset information.
      script: Cortex Core - Platform|||core-get-asset-details
      type: regular
      iscommand: true
      brand: Cortex Core - Platform
    nexttasks:
      '#none#':
      - "30"
    scriptarguments:
      asset_id:
        simple: ${issue.asset_ids}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": -970
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "63":
    id: "63"
    taskid: 6bb3a039-dda0-4f6c-84a2-317bd618c2b4
    type: condition
    task:
      id: 6bb3a039-dda0-4f6c-84a2-317bd618c2b4
      version: -1
      name: Check Microsoft Teams and Slack Integration
      description: Checks if message notification is set to Yes and the integrated module.
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "49"
      Microsoft Teams:
      - "16"
      "No":
      - "34"
      Slack:
      - "64"
    separatecontext: false
    conditions:
    - label: Microsoft Teams
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to send a message notification?
            iscontext: true
          right:
            value:
              simple: "Yes"
          ignorecase: true
      - - operator: isNotEmpty
          left:
            value:
              complex:
                root: modules
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.brand
                      iscontext: true
                    right:
                      value:
                        simple: Microsoft Teams via Webhook
                    ignorecase: true
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.state
                      iscontext: true
                    right:
                      value:
                        simple: active
            iscontext: true
          ignorecase: true
    - label: Slack
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to send a message notification?
            iscontext: true
          right:
            value:
              simple: "Yes"
          ignorecase: true
      - - operator: isNotEmpty
          left:
            value:
              complex:
                root: modules
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.brand
                      iscontext: true
                    right:
                      value:
                        simple: SlackV3
                - - operator: isEqualString
                    left:
                      value:
                        simple: modules.state
                      iscontext: true
                    right:
                      value:
                        simple: active
            iscontext: true
          ignorecase: true
    - label: "No"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Do you want to send a message notification?
            iscontext: true
          right:
            value:
              simple: "No"
          ignorecase: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 377.5,
          "y": 270
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "64":
    id: "64"
    taskid: 668a80e1-5360-4fba-afc4-f98b1ed4b271
    type: condition
    task:
      id: 668a80e1-5360-4fba-afc4-f98b1ed4b271
      version: -1
      name: Is Slack Channel Name Input Provided?
      description: Checks if Slack Channel Name Input is provided
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "No":
      - "56"
      "Yes":
      - "65"
    separatecontext: false
    conditions:
    - label: "No"
      condition:
      - - operator: isEmpty
          left:
            value:
              simple: inputs.Slack Channel Name
            iscontext: true
          right:
            value: {}
      - - operator: isEmpty
          left:
            value:
              simple: Please Provide Slack Channel Name.Answers.0
            iscontext: true
    - label: "Yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: inputs.Slack Channel Name
            iscontext: true
        - operator: isNotEmpty
          left:
            value:
              simple: Please Provide Slack Channel Name.Answers.0
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 930,
          "y": 440
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "65":
    id: "65"
    taskid: 8c422ee2-a2da-41b0-8e1e-2ce2ab14eebe
    type: condition
    task:
      id: 8c422ee2-a2da-41b0-8e1e-2ce2ab14eebe
      version: -1
      name: Check State Input
      description: Checks if State Input is Create / Update
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      Create:
      - "36"
      Update:
      - "41"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Create
    - label: Update
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 930,
          "y": 740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "67":
    id: "67"
    taskid: 9d715113-bed6-44f7-a542-8c65e4f559d3
    type: regular
    task:
      id: 9d715113-bed6-44f7-a542-8c65e4f559d3
      version: -1
      name: Send Email Notification
      description: commands.server.mail.sendmail
      script: mail-sender|||send-mail
      type: regular
      iscommand: true
      brand: mail-sender
    nexttasks:
      '#none#':
      - "15"
    scriptarguments:
      htmlBody:
        simple: "<html>\n<body style=\"font-family: Arial, sans-serif; background-color: #f6f7f9; margin: 0; padding: 30px;\">\n  <div style=\"max-width: 600px; margin: auto; background-color: #ffffff; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); padding: 25px 30px;\">\n\n    <div style=\"text-align: center; color: #0067b8; font-size: 20px; font-weight: bold; margin-bottom: 25px;\">\n      Cortex Cloud Issue Details\n    </div>\n\n    <p style=\"font-size: 14px; margin-bottom: 25px;\">\n      A cloud misconfiguration has been detected.\n    </p>\n\n    <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 14px; border: 1px solid #e0e0e0;\">\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold; width: 40%;\">Issue Name</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${issue.name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Severity</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${issue.severity}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Details</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${issue.details}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Category</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${issue.alert_category}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Asset Name</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Asset Type</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__type__name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Cloud Region</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__cloud__region}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Cloud Account ID</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__realm}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Issue Created</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${issue.created}</td>\n      </tr>\n    </table>\n\n    <div style=\"font-weight: bold; font-size: 14px; margin: 15px 0 8px;\">Asset Tags</div>\n    <div style=\"background-color: #f2f2f2; border-radius: 4px; font-family: monospace; font-size: 13px; color: #444; padding: 10px; white-space: pre-wrap;\">\n      { \"Key\": \"Purpose\", \"Value\": \"CortexXSIAMFlowLogs\" }\n    </div>\n\n    <div style=\"text-align: center; margin: 30px 0 10px;\">\n      <a href=\"${demistoUrls.server}/issue-view/${issue.id}\" \n         target=\"_blank\"\n         style=\"display: inline-block; padding: 10px 24px; background-color: #0067b8; color: white !important; text-decoration: none !important; border-radius: 4px; font-size: 14px; font-weight: bold;\">\n         View Issue\n      </a>\n    </div>\n  </div>\n</body>\n</html>"
      subject:
        simple: 'Issue Detected for Asset: ${Core.CoreAsset.xdm__asset__name}'
      to:
        simple: ${inputs.Notification Email Recipients},${Please Provide Notification Email Recipients.Answers.0}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -310,
          "y": 1700
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "68":
    id: "68"
    taskid: a157d0e4-87c9-462f-8dbf-b45cfec6e40a
    type: regular
    task:
      id: a157d0e4-87c9-462f-8dbf-b45cfec6e40a
      version: -1
      name: Update Email Notification
      description: commands.server.mail.sendmail
      script: mail-sender|||send-mail
      type: regular
      iscommand: true
      brand: mail-sender
    nexttasks:
      '#none#':
      - "15"
    scriptarguments:
      htmlBody:
        simple: "<html>\n<body style=\"font-family: Arial, sans-serif; background-color: #f6f7f9; margin: 0; padding: 30px;\">\n  <div style=\"max-width: 600px; margin: auto; background-color: #ffffff; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); padding: 25px 30px;\">\n\n    <div style=\"text-align: center; color: #0067b8; font-size: 20px; font-weight: bold; margin-bottom: 25px;\">\n      Cortex Cloud Issue Details\n    </div>\n\n    <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 14px; border: 1px solid #e0e0e0;\">\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold; width: 40%;\">Issue Name</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${issue.name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Asset Name</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Asset Type</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__type__name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Cloud Region</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__cloud__region}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Cloud Account ID</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">${Core.CoreAsset.xdm__asset__realm}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0; background-color: #f9f9f9; font-weight: bold;\">Remediation</td>\n        <td style=\"padding: 10px; border: 1px solid #e0e0e0;\">Success</td>\n      </tr>\n    </table>\n    <div style=\"text-align: center; margin: 30px 0 10px;\">\n      <a href=\"${demistoUrls.server}/issue-view/${issue.id}\" \n         target=\"_blank\"\n         style=\"display: inline-block; padding: 10px 24px; background-color: #0067b8; color: white !important; text-decoration: none !important; border-radius: 4px; font-size: 14px; font-weight: bold;\">\n         View Issue\n      </a>\n    </div>\n  </div>\n</body>\n</html>"
      subject:
        simple: Issue Resolved for Asset - ${Core.CoreAsset.xdm__asset__name}
      to:
        simple: ${inputs.Notification Email Recipients},${Please Provide Notification Email Recipients.Answers.0}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 130,
          "y": 1700
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "69":
    id: "69"
    taskid: 621a5eef-c83e-4e65-80db-5013582deddf
    type: condition
    task:
      id: 621a5eef-c83e-4e65-80db-5013582deddf
      version: -1
      name: Check State Input
      description: Checks if State Input is Create / Update
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      Create:
      - "67"
      Update:
      - "68"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Create
    - label: Update
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -67.5,
          "y": 1550
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "71":
    id: "71"
    taskid: cc81dad3-0ae5-4a70-89f7-8c2eb0a3a21b
    type: regular
    task:
      id: cc81dad3-0ae5-4a70-89f7-8c2eb0a3a21b
      version: -1
      name: Notify ServiceNow and Jira status to War Room
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      value:
        simple: No ServiceNow or Jira integration connected to your Cortex tenant. Please configure either one of these to send a ticket
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 130,
          "y": -430
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {
      "16_38_Update": 0.65,
      "16_42_Create": 0.66,
      "32_51_No": 0.55,
      "32_52_Yes": 0.48,
      "46_21_Create": 0.42,
      "46_31_#default#": 0.1,
      "46_44_Update": 0.45,
      "52_24_Create": 0.61,
      "52_31_#default#": 0.53,
      "52_45_Update": 0.51,
      "57_15_No": 0.34,
      "60_31_No": 0.27,
      "60_32_Jira": 0.45,
      "61_30_yes": 0.49,
      "63_34_No": 0.23,
      "63_49_#default#": 0.48,
      "64_56_No": 0.5,
      "64_65_Yes": 0.56,
      "65_36_Create": 0.59,
      "65_41_Update": 0.52,
      "69_67_Create": 0.58,
      "69_68_Update": 0.54
    },
    "paper": {
      "dimensions": {
        "height": 3250,
        "width": 2500,
        "x": -930,
        "y": -1330
      }
    }
  }
inputs:
- key: Do you want to create a ticket?
  value: {}
  required: true
  description: "Possible values:\n- Yes\n- No\n\nNote: If set to 'Yes', a configured ServiceNow and/or Jira integration is required.  \nIf using Jira, the Jira Project Key input must also be provided."
  playbookInputQuery:
- key: Do you want to send a message notification?
  value: {}
  required: true
  description: |-
    Possible values:
    - Yes
    - No

    Note: If set to 'Yes', Microsoft Teams and/or Slack integration must be configured.
    If using Slack, the Slack Channel Name input must also be provided.
  playbookInputQuery:
- key: Do you want to send an email notification?
  value: {}
  required: true
  description: |-
    Possible values:
    - Yes
    - No

    Note: To send email notifications, specify the Notification Email Recipients input.
  playbookInputQuery:
- key: Jira Project Key
  value: {}
  required: false
  description: Provide Jira project key where the issue will be created.
  playbookInputQuery:
- key: Slack Channel Name
  value: {}
  required: false
  description: Provide Slack channel name to which to send messages.
  playbookInputQuery:
- key: Notification Email Recipients
  value: {}
  required: false
  description: Provide the email address to send email notifications.
  playbookInputQuery:
- key: Issue State
  value: {}
  required: false
  description: |-
    Possible values:
    - Create
    - Update
  playbookInputQuery:
inputSections:
- inputs:
  - Do you want to create a ticket?
  - Do you want to send a message notification?
  - Do you want to send an email notification?
  - Jira Project Key
  - Slack Channel Name
  - Notification Email Recipients
  - Issue State
  name: General (Inputs group)
  description: Generic group for inputs
outputSections:
- outputs:
  - Ticket.Id
  - ServiceNow.Ticket.ID
  - Please Provide Jira Project Key.Answers.0
  - Please Provide Slack Channel Name.Answers.0
  - Please Provide Notification Email Recipients.Answers.0
  name: General (Outputs group)
  description: Generic group for outputs
outputs:
- contextPath: Ticket.Id
  description: Jira Ticket ID.
  type: string
- contextPath: ServiceNow.Ticket.ID
  description: Service Now Ticket ID.
  type: string
- contextPath: Please Provide Jira Project Key.Answers.0
  description: Jira Project Key.
  type: shortText
- contextPath: Please Provide Slack Channel Name.Answers.0
  description: Slack Channel Name.
  type: shortText
- contextPath: Please Provide Notification Email Recipients.Answers.0
  description: Notification Email Recipients.
  type: shortText
tests:
- No tests (auto formatted)
