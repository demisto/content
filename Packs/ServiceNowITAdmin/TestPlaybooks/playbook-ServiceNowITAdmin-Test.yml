id: playbook-ServiceNowITAdmin-Test
name: playbook-ServiceNowITAdmin-Test
version: 5
fromversion: 6.0.0
starttaskid: "0"
description: ''
tasks:
  "0":
    id: "0"
    taskid: f27c1250-4b28-46e8-8338-6415bb82811a
    type: start
    task:
      id: f27c1250-4b28-46e8-8338-6415bb82811a
      version: -1
      name: ""
      iscommand: false
      brand: ""
      description: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": -240
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "1":
    id: "1"
    taskid: 1f47cc0f-fdde-4a28-8f03-a8a03f7fa7bd
    type: regular
    task:
      id: 1f47cc0f-fdde-4a28-8f03-a8a03f7fa7bd
      version: -1
      name: DeleteContext
      script: DeleteContext
      type: regular
      iscommand: true
      brand: ""
      description: ""
    nexttasks:
      '#none#':
      - "13"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": -90
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "2":
    id: "2"
    taskid: 73531f45-8c16-4cb1-886f-2e1c9096291e
    type: regular
    task:
      id: 73531f45-8c16-4cb1-886f-2e1c9096291e
      version: -1
      name: get-user
      description: Retrieves details of a specific user
      script: ServiceNow IT Admin|||get-user
      type: regular
      iscommand: true
      brand: ServiceNow IT Admin
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      scim:
        simple: ${scim}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 480
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "3":
    id: "3"
    taskid: aaf750c2-92e2-484d-8b7d-3ad7e487ac58
    type: condition
    task:
      id: aaf750c2-92e2-484d-8b7d-3ad7e487ac58
      version: -1
      name: Verify Outputs
      type: condition
      iscommand: false
      brand: ""
      description: ""
    nexttasks:
      '#default#':
      - "4"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: GetUser.success
            iscontext: true
          right:
            value:
              simple: "true"
    - label: condition-2
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: GetUser.errorCode
            iscontext: true
          right:
            value:
              simple: "404"
    view: |-
      {
        "position": {
          "x": 50,
          "y": 640
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "4":
    id: "4"
    taskid: 5e3994cc-6bf2-4765-8f6d-97d371827f2f
    type: regular
    task:
      id: 5e3994cc-6bf2-4765-8f6d-97d371827f2f
      version: -1
      name: create-user
      description: Creates a user
      script: ServiceNow IT Admin|||create-user
      type: regular
      iscommand: true
      brand: ServiceNow IT Admin
    nexttasks:
      '#none#':
      - "5"
    scriptarguments:
      customMapping: {}
      scim:
        simple: ${scim}
      using:
        simple: ${appInstanceName}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 800
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "5":
    id: "5"
    taskid: 15dbf1a9-52e8-4e9b-8374-02acb7f8d3d7
    type: condition
    task:
      id: 15dbf1a9-52e8-4e9b-8374-02acb7f8d3d7
      version: -1
      name: Verify Outputs
      type: condition
      iscommand: false
      brand: ""
      description: ""
    nexttasks:
      '#default#':
      - "6"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: CreateUser.success
            iscontext: true
          right:
            value:
              simple: "true"
    - label: condition-2
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: CreateUser.errorCode
            iscontext: true
          right:
            value:
              simple: "409"
    view: |-
      {
        "position": {
          "x": 50,
          "y": 960
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "6":
    id: "6"
    taskid: c68e7a91-8d86-4afe-8f00-18be4fc7e46d
    type: regular
    task:
      id: c68e7a91-8d86-4afe-8f00-18be4fc7e46d
      version: -1
      name: update-user
      description: Update a user
      script: ServiceNow IT Admin|||update-user
      type: regular
      iscommand: true
      brand: ServiceNow IT Admin
    nexttasks:
      '#none#':
      - "7"
    scriptarguments:
      customMapping: {}
      newScim:
        simple: ${scim}
      oldScim:
        simple: '{"id":"ade744de1b6e5010e9e2a9722a4bcbe0"}'
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1160
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "7":
    id: "7"
    taskid: 5697b1f9-d56f-4db5-87f0-1f13796f2653
    type: condition
    task:
      id: 5697b1f9-d56f-4db5-87f0-1f13796f2653
      version: -1
      name: Verify Outputs
      type: condition
      iscommand: false
      brand: ""
      description: ""
    nexttasks:
      '#default#':
      - "8"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: UpdateUser.success
            iscontext: true
          right:
            value:
              simple: "true"
    - label: condition-2
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: UpdateUser.errorCode
            iscontext: true
          right:
            value:
              simple: "404"
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1330
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "8":
    id: "8"
    taskid: 15e24433-851a-4f4e-8c0f-e7175c4aa15b
    type: regular
    task:
      id: 15e24433-851a-4f4e-8c0f-e7175c4aa15b
      version: -1
      name: enable-user
      description: Enable a disabled user
      script: ServiceNow IT Admin|||enable-user
      type: regular
      iscommand: true
      brand: ServiceNow IT Admin
    nexttasks:
      '#none#':
      - "9"
    scriptarguments:
      customMapping: {}
      scim:
        simple: '{"id":"ade744de1b6e5010e9e2a9722a4bcbe0"}'
      using:
        simple: ${appInstanceName}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1530
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "9":
    id: "9"
    taskid: 9eb21071-76ea-45cc-8072-0cc6abd621f5
    type: condition
    task:
      id: 9eb21071-76ea-45cc-8072-0cc6abd621f5
      version: -1
      name: Verify Outputs
      type: condition
      iscommand: false
      brand: ""
      description: ""
    nexttasks:
      '#default#':
      - "10"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: EnableUser.success
            iscontext: true
          right:
            value:
              simple: "true"
    - label: condition-2
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: EnableUser.errorCode
            iscontext: true
          right:
            value:
              simple: "404"
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1700
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "10":
    id: "10"
    taskid: a20396de-be1e-4772-838e-795e3cc91892
    type: regular
    task:
      id: a20396de-be1e-4772-838e-795e3cc91892
      version: -1
      name: disable-user
      description: Disable a user
      script: ServiceNow IT Admin|||disable-user
      type: regular
      iscommand: true
      brand: ServiceNow IT Admin
    nexttasks:
      '#none#':
      - "11"
    scriptarguments:
      customMapping: {}
      scim:
        simple: '{"id":"ade744de1b6e5010e9e2a9722a4bcbe0"}'
      user_id: {}
      using:
        simple: ${appInstanceName}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1880
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "11":
    id: "11"
    taskid: e515dfb0-d6e5-4eeb-873c-ab27429a72f8
    type: condition
    task:
      id: e515dfb0-d6e5-4eeb-873c-ab27429a72f8
      version: -1
      name: Verify Outputs
      type: condition
      iscommand: false
      brand: ""
      description: ""
    nexttasks:
      "yes":
      - "12"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: DisableUser.success
            iscontext: true
          right:
            value:
              simple: "true"
    - label: condition-2
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: DisableUser.errorCode
            iscontext: true
          right:
            value:
              simple: "404"
    view: |-
      {
        "position": {
          "x": 50,
          "y": 2070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "12":
    id: "12"
    taskid: e4a8ebb2-cab2-4a2a-878a-a3a16ed782f9
    type: title
    task:
      id: e4a8ebb2-cab2-4a2a-878a-a3a16ed782f9
      version: -1
      name: Test Done
      type: title
      iscommand: false
      brand: ""
      description: ""
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 2260
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "13":
    id: "13"
    taskid: 0c1601fc-7518-4c96-8b96-97da4df79f54
    type: regular
    task:
      id: 0c1601fc-7518-4c96-8b96-97da4df79f54
      version: -1
      name: Set Instance Name
      description: Sets a value into the context with the given context key
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "14"
    scriptarguments:
      append: {}
      key:
        simple: appInstanceName
      stringify: {}
      value:
        simple: ServiceNowITAdmin
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 100
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "14":
    id: "14"
    taskid: 47ab6e0a-9fd7-4060-8df8-fee9fbfb06d7
    type: regular
    task:
      id: 47ab6e0a-9fd7-4060-8df8-fee9fbfb06d7
      version: -1
      name: Set scim data
      description: Sets a value into the context with the given context key
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    scriptarguments:
      append: {}
      key:
        simple: scim
      stringify: {}
      value:
        simple: |-
          {
             "userName":"Xoar.test000000@paloaltonetworks.com",
             "name":{
                "familyName":"Xoar00000",
                "givenName":"cotex00000"
             },
             "emails":[
                {
                   "value":"xoar00000@paloaltonetworks.com",
                   "type":"work",
                   "primary":true
                }
             ]
          }
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 295
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 2565,
        "width": 380,
        "x": 50,
        "y": -240
      }
    }
  }
inputs: []
outputs: []
