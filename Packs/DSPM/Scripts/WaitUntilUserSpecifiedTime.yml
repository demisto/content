commonfields:
  id: 8383e511-4e07-49fa-8fcb-d8fa23f13f9c
  version: 12
vcShouldKeepItemLegacyProdMachine: false
name: WaitUntilUserSpecifiedTime
script: |-
  register_module_line('WaitUntilUserSpecifiedTime', 'start', __line__())
  ### pack version: 3.4.14

  import time



  def wait_untill_user_specified_time():
      # fetch User specified time from the DSPM Instance
      result = demisto.executeCommand("dspm-get-integration-cofig", {})
      integration_conf = result[0].get("Contents",{}).get('integration_config',{})
      sleep_time = integration_conf.get('slackMsgLifetime')
      print("slackMsgLifetime: ",sleep_time)

      in_seconds = int(sleep_time) * 3600
      time.sleep(int(in_seconds))
      return in_seconds





  ''' MAIN FUNCTION '''


  def main():  # pragma: no cover'
      try:
          in_seconds = wait_untill_user_specified_time()
          return_results(f"Sleep for {in_seconds} seconds")

      except Exception as excep:
          demisto.error(traceback.format_exc())  # print the traceback
          return_error(f'Failed to execute WaitUntilUserSpecifiedTime. Error: {str(excep)}')


  ''' ENTRY POINT '''

  if __name__ in ('__main__', '__builtin__', 'builtins'):  # pragma: no cover
      main()

  register_module_line('WaitUntilUserSpecifiedTime', 'end', __line__())
type: python
tags: []
enabled: true
scripttarget: 0
subtype: python3
timeout: 362.88ms
pswd: ""
runonce: false
dockerimage: demisto/python3:3.11.9.107421
runas: DBotWeakRole
engineinfo: {}
mainengineinfo: {}