id: GmailTest
inputs: []
name: GmailTest
outputs: []
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 4e17081b-1b28-4699-85eb-1d8155ac1454
    type: start
    task:
      id: 4e17081b-1b28-4699-85eb-1d8155ac1454
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": -810
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "1":
    id: "1"
    taskid: 45b8ca5f-1c32-438b-8237-f4eded1c2aec
    type: regular
    task:
      id: 45b8ca5f-1c32-438b-8237-f4eded1c2aec
      version: -1
      name: Start clean
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": -700
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "2":
    id: "2"
    taskid: ab20a5fe-b2c1-419c-8108-04abcbc866aa
    type: regular
    task:
      id: ab20a5fe-b2c1-419c-8108-04abcbc866aa
      version: -1
      name: List all users
      script: '|||gmail-list-users'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      retry-count:
        simple: "0"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": -515
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "3":
    id: "3"
    taskid: 371f38c3-4a91-4aef-8493-83d20fccebd2
    type: regular
    task:
      id: 371f38c3-4a91-4aef-8493-83d20fccebd2
      version: -1
      name: Get specific user
      script: '|||gmail-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "63"
    scriptarguments:
      user-id:
        complex:
          root: Account
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Account.UserName
                iscontext: true
              right:
                value:
                  simple: test
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": -380
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "5":
    id: "5"
    taskid: 555c0742-fb7c-4a0b-828a-e0c2f99e0865
    type: regular
    task:
      id: 555c0742-fb7c-4a0b-828a-e0c2f99e0865
      version: -1
      name: Create new user
      script: '|||gmail-create-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "21"
    scriptarguments:
      email:
        simple: johns@demistodev.com
      family-name:
        simple: Smith
      first-name:
        simple: John
      password:
        simple: ${NEW_PASSWORD}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "6":
    id: "6"
    taskid: e161c90b-d896-4d31-8ba3-6332ff98a2b1
    type: regular
    task:
      id: e161c90b-d896-4d31-8ba3-6332ff98a2b1
      version: -1
      name: Delete User
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "96"
    scriptarguments:
      user-id:
        complex:
          root: Account
          filters:
          - - operator: startWith
              left:
                value:
                  simple: Account.Email.Address
                iscontext: true
              right:
                value:
                  simple: johns
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1390
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "7":
    id: "7"
    taskid: 38f42653-7e1c-4cee-885e-699a6c8131f1
    type: title
    task:
      id: 38f42653-7e1c-4cee-885e-699a6c8131f1
      version: -1
      name: Gmail Commands
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "9"
      - "18"
      - "65"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 650,
          "y": 1765
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "9":
    id: "9"
    taskid: 5588346d-1235-4584-88f6-6d30a1402434
    type: regular
    task:
      id: 5588346d-1235-4584-88f6-6d30a1402434
      version: -1
      name: Search emails with attachments
      script: '|||gmail-search'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "10"
      - "14"
    scriptarguments:
      has-attachments:
        simple: "True"
      max-results:
        simple: "10"
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 60,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "10":
    id: "10"
    taskid: 1c660120-2d63-43cb-86c6-7cbf70c620dd
    type: regular
    task:
      id: 1c660120-2d63-43cb-86c6-7cbf70c620dd
      version: -1
      name: Get mail with attachment
      description: Retrieves attachments from a sent Gmail message.
      script: Gmail|||gmail-get-attachments
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          - - operator: isNotEmpty
              left:
                value:
                  simple: Gmail.Attachments
                iscontext: true
          transformers:
          - operator: FirstArrayElement
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 20,
          "y": 2140
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "13":
    id: "13"
    taskid: c8967a11-34bc-4cca-842e-12ffb1ae2913
    type: regular
    task:
      id: c8967a11-34bc-4cca-842e-12ffb1ae2913
      version: -1
      name: Get Tokens
      script: '|||gmail-get-tokens-for-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "22"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1625
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "14":
    id: "14"
    taskid: fbe573ee-8280-4c7b-883f-5d216d7eaaa3
    type: regular
    task:
      id: fbe573ee-8280-4c7b-883f-5d216d7eaaa3
      version: -1
      name: Get Email data
      script: '|||gmail-get-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isNotEmpty
              left:
                value:
                  simple: Gmail.Attachments
                iscontext: true
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: FirstArrayElement
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 430,
          "y": 2140
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "16":
    id: "16"
    taskid: 5464dbbf-e94b-44ba-81e5-6a5a068a3e07
    type: regular
    task:
      id: 5464dbbf-e94b-44ba-81e5-6a5a068a3e07
      version: -1
      name: Search all mailboxes
      script: '|||gmail-search-all-mailboxes'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "17"
    scriptarguments:
      after:
        simple: 2022/11/01
      max-results:
        simple: "2"
      retry-count:
        simple: "3"
      subject:
        simple: israel
    separatecontext: false
    continueonerror: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 830,
          "y": 2045
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "17":
    id: "17"
    taskid: 7ed8165f-fb92-4290-8989-48defe8a6c5d
    type: regular
    task:
      id: 7ed8165f-fb92-4290-8989-48defe8a6c5d
      version: -1
      name: Get Thread
      script: '|||gmail-get-thread'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      thread-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ThreadId
          - operator: uniq
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 830,
          "y": 2170
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "18":
    id: "18"
    taskid: 20757d63-ff6f-4e56-8fd9-3fac666ef8a3
    type: regular
    task:
      id: 20757d63-ff6f-4e56-8fd9-3fac666ef8a3
      version: -1
      name: Search in mailbox
      script: '|||gmail-search'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "19"
    scriptarguments:
      in:
        simple: INBOX
      max-results:
        simple: "1"
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "19":
    id: "19"
    taskid: 4f3a6859-a6d3-4c1d-86c5-d3d1dd0e35be
    type: regular
    task:
      id: 4f3a6859-a6d3-4c1d-86c5-d3d1dd0e35be
      version: -1
      name: Move mail to other folder
      script: '|||gmail-move-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "20"
    scriptarguments:
      add-labels:
        simple: CATEGORY_SOCIAL
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: shai@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      remove-labels:
        simple: INBOX
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "20":
    id: "20"
    taskid: 9c6335d6-d61b-4991-82f3-047b53a4beeb
    type: regular
    task:
      id: 9c6335d6-d61b-4991-82f3-047b53a4beeb
      version: -1
      name: Move back to inbox
      script: '|||gmail-move-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      add-labels:
        simple: INBOX
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: shai@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      remove-labels:
        simple: CATEGORY_SOCIAL
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2265
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "21":
    id: "21"
    taskid: 78122e64-8af0-4585-8c1f-17ee82e214ef
    type: regular
    task:
      id: 78122e64-8af0-4585-8c1f-17ee82e214ef
      version: -1
      name: block the created user
      script: '|||gmail-add-delete-filter'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "23"
    scriptarguments:
      email-address:
        complex:
          root: Account.Email.Address
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Account.Email.Address
                iscontext: true
              right:
                value:
                  simple: johns@demistodev.com
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1080
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "22":
    id: "22"
    taskid: a045f4b3-a2a6-4cda-8ed7-f484ff4add21
    type: title
    task:
      id: a045f4b3-a2a6-4cda-8ed7-f484ff4add21
      version: -1
      name: Check all mailboxes
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "65"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1755
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "23":
    id: "23"
    taskid: bcf05ade-7a01-4870-86e7-11efffc093be
    type: regular
    task:
      id: bcf05ade-7a01-4870-86e7-11efffc093be
      version: -1
      name: Remove the block
      script: '|||gmail-remove-filter'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "94"
    scriptarguments:
      filter_ids:
        complex:
          root: GmailFilter
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: GmailFilter.Criteria.from
                iscontext: true
              right:
                value:
                  simple: johns@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      mailbox:
        complex:
          root: Gmail
          accessor: Filter.Mailbox
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1235
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "25":
    id: "25"
    taskid: 2a7ea28d-b84e-4116-8178-b29d70b41467
    type: regular
    task:
      id: 2a7ea28d-b84e-4116-8178-b29d70b41467
      version: -1
      name: List mailbox filters
      script: '|||gmail-list-filters'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "27"
    scriptarguments:
      limit:
        simple: "5"
      user-id:
        simple: test@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1780
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "26":
    id: "26"
    taskid: 06bbd988-a35b-43ba-812c-abb68531bf8c
    type: regular
    task:
      id: 06bbd988-a35b-43ba-812c-abb68531bf8c
      version: -1
      name: Delete filters from context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "25"
    scriptarguments:
      key:
        simple: GmailFilter
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1635
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "27":
    id: "27"
    taskid: adcc1347-ee14-4225-8182-6626fec2e1fb
    type: condition
    task:
      id: adcc1347-ee14-4225-8182-6626fec2e1fb
      version: -1
      name: Verify Filters
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "28"
      "yes":
      - "48"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              simple: GmailFilter
            iscontext: true
      - - operator: isExists
          left:
            value:
              simple: Gmail.Filter
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "28":
    id: "28"
    taskid: db8cefb6-d9bb-4c1d-8eec-a1ec98453318
    type: regular
    task:
      id: db8cefb6-d9bb-4c1d-8eec-a1ec98453318
      version: -1
      name: Print Error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: No filters were found in test@demistodev.com mailbox
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 2110
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "29":
    id: "29"
    taskid: f54e79ce-aed3-4c3e-8395-09b17575c16f
    type: title
    task:
      id: f54e79ce-aed3-4c3e-8395-09b17575c16f
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 7860
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "30":
    id: "30"
    taskid: c0564881-2a9b-44b9-8815-f0e5e75691b3
    type: regular
    task:
      id: c0564881-2a9b-44b9-8815-f0e5e75691b3
      version: -1
      name: gmail-create-user
      description: Creates a user.
      script: '|||gmail-create-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "82"
    scriptarguments:
      email:
        simple: user_to_delete@demistodev.com
      family-name:
        simple: Second
      first-name:
        simple: First
      password:
        simple: ${NEW_PASSWORD}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 2680
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "31":
    id: "31"
    taskid: 7a11f4ac-d0ca-4a73-82a4-56cbd0f4c805
    type: regular
    task:
      id: 7a11f4ac-d0ca-4a73-82a4-56cbd0f4c805
      version: -1
      name: gmail-hide-user-in-directory
      description: Hide a user in the Global Directory
      script: '|||gmail-hide-user-in-directory'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      user-id:
        simple: user_to_delete@demistodev.com
      visible-globally:
        simple: "False"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 2825
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "32":
    id: "32"
    taskid: df6a155e-8cc8-40ae-812c-e24c5d84fb32
    type: condition
    task:
      id: df6a155e-8cc8-40ae-812c-e24c5d84fb32
      version: -1
      name: Verify User creation and visbility
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "47"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Email.Address
            iscontext: true
          right:
            value:
              simple: user_to_delete@demistodev.com
      - - operator: isFalse
          left:
            value:
              simple: Account.VisibleInDirectory
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 2950
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "33":
    id: "33"
    taskid: 344923c1-6708-4ab3-8cbe-11e2303c042d
    type: regular
    task:
      id: 344923c1-6708-4ab3-8cbe-11e2303c042d
      version: -1
      name: gmail-delete-user
      description: Delete a User
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      user-id:
        simple: user_to_delete@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 860,
          "y": 3300
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "34":
    id: "34"
    taskid: 069f2bcf-6cb2-4d85-8fc7-013db40a6280
    type: regular
    task:
      id: 069f2bcf-6cb2-4d85-8fc7-013db40a6280
      version: -1
      name: gmail-get-autoreply
      description: Get the auto-reply message set for the user-account
      script: '|||gmail-get-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "35"
    scriptarguments:
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 3560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "35":
    id: "35"
    taskid: 936f64a6-93e7-49f4-89e2-dd1133e37ef7
    type: regular
    task:
      id: 936f64a6-93e7-49f4-89e2-dd1133e37ef7
      version: -1
      name: gmail-set-autoreply
      description: 'Set auto-reply for the user. Note: if body is not set, the current
        body will be deleted'
      script: '|||gmail-set-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "36"
    scriptarguments:
      enable-autoReply:
        simple: "true"
      response-body:
        simple: body_test
      response-subject:
        simple: subject_test
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 3740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "36":
    id: "36"
    taskid: d610dce4-8e31-4f1a-8aca-85775e63075c
    type: regular
    task:
      id: d610dce4-8e31-4f1a-8aca-85775e63075c
      version: -1
      name: gmail-get-autoreply
      description: Get the auto-reply message set for the user-account
      script: '|||gmail-get-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "37"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 3900
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "37":
    id: "37"
    taskid: 427f00ad-5d2e-4321-8c14-99a675163901
    type: condition
    task:
      id: 427f00ad-5d2e-4321-8c14-99a675163901
      version: -1
      name: Verify Autoreply
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "38"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: containsString
          left:
            value:
              simple: Account.Gmail.AutoReply.ResponseSubject
            iscontext: true
          right:
            value:
              simple: subject_test
      - - operator: containsString
          left:
            value:
              simple: Account.Gmail.AutoReply.ResponseBody
            iscontext: true
          right:
            value:
              simple: body_test
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "38":
    id: "38"
    taskid: 2e1ea198-9482-4cea-832d-f55705902259
    type: regular
    task:
      id: 2e1ea198-9482-4cea-832d-f55705902259
      version: -1
      name: gmail-set-autoreply - reset to original autoreply
      description: 'Set auto-reply for the user. Note: if body is not set, the current
        body will be deleted'
      script: '|||gmail-set-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "50"
    scriptarguments:
      enable-autoReply:
        simple: "false"
      response-body:
        simple: ${Account.Gmail.AutoReply.ResponseBody}
      response-subject:
        simple: ${Account.Gmail.AutoReply.ResponseSubject}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4300
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "40":
    id: "40"
    taskid: 34526e95-4a24-4ed5-8496-647669c18cd9
    type: regular
    task:
      id: 34526e95-4a24-4ed5-8496-647669c18cd9
      version: -1
      name: gmail-get-mail
      description: Gets the specified message.
      script: '|||gmail-get-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "41"
    scriptarguments:
      message-id:
        simple: ${Gmail.SentMail.ID}
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4720
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "41":
    id: "41"
    taskid: bf9be84f-581c-4744-8fb4-02c2497a0816
    type: condition
    task:
      id: bf9be84f-581c-4744-8fb4-02c2497a0816
      version: -1
      name: Verify sent mail
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "45"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: containsString
          left:
            value:
              simple: Gmail.To
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
      - - operator: containsString
          left:
            value:
              simple: Gmail.From
            iscontext: true
          right:
            value:
              simple: shai@demistodev.com
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.Subject
            iscontext: true
          right:
            value:
              simple: this is a test
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.Body
            iscontext: true
          right:
            value:
              simple: bla bla bla
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "43":
    id: "43"
    taskid: a562b271-4c3f-4eba-8575-5f34a4d42a80
    type: regular
    task:
      id: a562b271-4c3f-4eba-8575-5f34a4d42a80
      version: -1
      name: gmail-delegate-user-mailbox
      description: Adds a delegate to the mailbox, without sending any verification
        email. The delegate user must be a member of the same G Suite organization
        as the delegator user.  Note that a delegate user must be referred to by their
        primary email address, and not an email alias.
      script: '|||gmail-delegate-user-mailbox'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "49"
    scriptarguments:
      delegate-email:
        simple: shai@demistodev.com
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5280
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "45":
    id: "45"
    taskid: a2b358ae-b095-45e8-8bdb-c3a2d0799dd6
    type: regular
    task:
      id: a2b358ae-b095-45e8-8bdb-c3a2d0799dd6
      version: -1
      name: gmail-delete-mail
      description: Delete a mail in the user's mailbox.
      script: '|||gmail-delete-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "43"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Subject
                iscontext: true
              right:
                value:
                  simple: this is a test
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5140
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "47":
    id: "47"
    taskid: 5d580c36-20f2-4a05-8fe6-e40a9eae35f3
    type: regular
    task:
      id: 5d580c36-20f2-4a05-8fe6-e40a9eae35f3
      version: -1
      name: gmail-set-password
      description: Set password for the user
      script: '|||gmail-set-password'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "33"
    scriptarguments:
      password:
        simple: ${NEW_PASSWORD}
      user-id:
        simple: user_to_delete@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 860,
          "y": 3130
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "48":
    id: "48"
    taskid: c309e82f-6157-4896-875e-912110d81652
    type: regular
    task:
      id: c309e82f-6157-4896-875e-912110d81652
      version: -1
      name: DeleteContext
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "100"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 830,
          "y": 2345
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "49":
    id: "49"
    taskid: 18bd6e95-360c-4c31-8649-603bc718d0a6
    type: regular
    task:
      id: 18bd6e95-360c-4c31-8649-603bc718d0a6
      version: -1
      name: gmail-remove-delegated-mailbox
      description: Removes a delegate from the mailbox, without sending any verification
        email. The delegate user must be a member of the same G Suite organization
        as the delegator user.  Note that a delegate user must be referred to by their
        primary email address, and not an email alias.
      script: '|||gmail-remove-delegated-mailbox'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "81"
    scriptarguments:
      removed-mail:
        simple: shai@demistodev.com
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5430
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "50":
    id: "50"
    taskid: fe6244cb-b895-4a3d-8aa9-606443f4f7d9
    type: regular
    task:
      id: fe6244cb-b895-4a3d-8aa9-606443f4f7d9
      version: -1
      name: send-mail
      description: Send an email
      script: Gmail|||send-mail
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "40"
    scriptarguments:
      body:
        simple: bla bla bla
      from:
        simple: shai@demistodev.com
      subject:
        simple: this is a test
      to:
        simple: admin@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4500
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "51":
    id: "51"
    taskid: 414f3546-34ee-4ee8-8dfb-52e59f30dac5
    type: regular
    task:
      id: 414f3546-34ee-4ee8-8dfb-52e59f30dac5
      version: -1
      name: GeneratePassword
      description: "This function generates a password and allows various parameters
        to customize the properties of the password depending on the use case (e.g.
        password complexity requirements).  The default behavior is to generate a
        password of  *random length* including all four character classes (upper,
        lower, digits, symbols) with at least five and at most ten characters per
        class. \n\nThe min_* values all default to 0. This means that if the command
        is executed in this way:\n!GeneratePassword max_lcase=10\nIt is possible that
        a password of length zero could be generated. It is therefore recommended
        to always include a min_* parameter that matches. \n\nThe debug parameter
        will print certain properties of the command into the WarRoom for easy diagnostics."
      scriptName: GeneratePassword
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "30"
    scriptarguments:
      min_digits:
        simple: "2"
      min_lcase:
        simple: "2"
      min_symbols:
        simple: "2"
      min_ucase:
        simple: "2"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 830,
          "y": 2530
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "57":
    id: "57"
    taskid: 2e29680c-3e0c-413a-8a0d-b9e39cbb4f28
    type: regular
    task:
      id: 2e29680c-3e0c-413a-8a0d-b9e39cbb4f28
      version: -1
      name: gmail-delete-user
      description: Deletes a Gmail user.
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "101"
    scriptarguments:
      user-id:
        simple: user_to_delete@demistodev.com
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1690,
          "y": 2855
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "58":
    id: "58"
    taskid: 18ae8ecf-74e4-4a10-86d6-41304bdfd92c
    type: regular
    task:
      id: 18ae8ecf-74e4-4a10-86d6-41304bdfd92c
      version: -1
      name: Get User Role
      description: Retrieves a list of all Google roles for a specified user.
      script: Gmail|||gmail-get-user-roles
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "59"
    scriptarguments:
      retry-count:
        simple: "3"
      user-id:
        complex:
          root: Account
          accessor: ID
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 90
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "59":
    id: "59"
    taskid: f61e3b5c-4c07-4878-84e6-c51ec80686d2
    type: condition
    task:
      id: f61e3b5c-4c07-4878-84e6-c51ec80686d2
      version: -1
      name: Verify User Role Context Output
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "60"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.RoleAssignmentId
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.ScopeType
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.Kind
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.OrgUnitId
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.ID
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.AssignedTo
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 255
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "60":
    id: "60"
    taskid: 8a009337-ce97-43e5-83b0-cfb65e63fbfc
    type: regular
    task:
      id: 8a009337-ce97-43e5-83b0-cfb65e63fbfc
      version: -1
      name: Get Role
      description: gmail get role
      script: '|||gmail-get-role'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "61"
    scriptarguments:
      role-id:
        complex:
          root: Gmail
          accessor: Role.[0].ID
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 410
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "61":
    id: "61"
    taskid: e7680f24-8be5-4b89-8145-7994829efad1
    type: condition
    task:
      id: e7680f24-8be5-4b89-8145-7994829efad1
      version: -1
      name: Verify Get Role Context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "87"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.ETag
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.IsSuperAdminRole
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.IsSystemRole
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.Kind
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.Description
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.ID
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.Name
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.Privilege.ServiceID
            iscontext: true
      - - operator: isExists
          left:
            value:
              complex:
                root: Gmail
                accessor: Role.Privilege.Name
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "62":
    id: "62"
    taskid: 5172f65a-019c-4e24-8217-36d0065f2de3
    type: regular
    task:
      id: 5172f65a-019c-4e24-8217-36d0065f2de3
      version: -1
      name: GeneratePassword
      description: "This function generates a password and allows various parameters
        to customize the properties of the password depending on the use case (e.g.
        password complexity requirements).  The default behavior is to generate a
        password of  *random length* including all four character classes (upper,
        lower, digits, symbols) with at least five and at most ten characters per
        class. \n\nThe min_* values all default to 0. This means that if the command
        is executed in this way:\n!GeneratePassword max_lcase=10\nIt is possible that
        a password of length zero could be generated. It is therefore recommended
        to always include a min_* parameter that matches. \n\nThe debug parameter
        will print certain properties of the command into the WarRoom for easy diagnostics."
      scriptName: GeneratePassword
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "5"
    scriptarguments:
      max_digits:
        simple: "1"
      max_lcase:
        simple: "8"
      max_symbols:
        simple: "1"
      max_ucase:
        simple: "0"
      min_digits:
        simple: "1"
      min_lcase:
        simple: "8"
      min_symbols:
        simple: "1"
      min_ucase:
        simple: "0"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 750
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "63":
    id: "63"
    taskid: d1cf09e0-cdf2-413d-87a7-869cf276868f
    type: regular
    task:
      id: d1cf09e0-cdf2-413d-87a7-869cf276868f
      version: -1
      name: List all labels
      description: Lists all labels in the user's mailbox.
      script: '|||gmail-list-labels'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "64"
    scriptarguments:
      retry-count:
        simple: "3"
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": -240
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "64":
    id: "64"
    taskid: e9641399-8bcf-4579-8814-7ef9cd22dc53
    type: condition
    task:
      id: e9641399-8bcf-4579-8814-7ef9cd22dc53
      version: -1
      name: Verify user labels Context Output
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "58"
    separatecontext: false
    conditions:
    - label: "YES"
      condition:
      - - operator: isExists
          left:
            value:
              simple: GmailLabel.UserID
            iscontext: true
          right:
            value: {}
      - - operator: isExists
          left:
            value:
              simple: GmailLabel.Name
            iscontext: true
      - - operator: isExists
          left:
            value:
              simple: GmailLabel.ID
            iscontext: true
      - - operator: isExists
          left:
            value:
              simple: GmailLabel.Type
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1565,
          "y": -75
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "65":
    id: "65"
    taskid: 9f5ae948-9e98-4ef7-8960-fd3a74d5df93
    type: regular
    task:
      id: 9f5ae948-9e98-4ef7-8960-fd3a74d5df93
      version: -1
      name: sleep
      description: Sleep for X seconds
      scriptName: Sleep
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "16"
    scriptarguments:
      seconds:
        simple: "5"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 830,
          "y": 1915
        }
      }
    note: false
    timertriggers:
    - fieldname: timetoassignment
      action: start
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "66":
    id: "66"
    taskid: d7da6f5b-5e33-4e31-8cfe-12810e450eb0
    type: regular
    task:
      id: d7da6f5b-5e33-4e31-8cfe-12810e450eb0
      version: -1
      name: create  forwarding address
      description: Creates a forwarding address. If ownership verification is required,
        a message will be sent to the recipient and the resource's verification status
        will be set to pending; otherwise, the resource will be created with verification
        status set to accepted. This method is only available to service account clients
        that have been delegated domain-wide authority.
      script: '|||gmail-forwarding-address-add'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "75"
    scriptarguments:
      forwarding_email:
        simple: 'admin@demistodev.com '
      user_id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 840,
          "y": 5930
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "67":
    id: "67"
    taskid: 8820b987-53a8-4de5-89c3-4f946c2c3460
    type: regular
    task:
      id: 8820b987-53a8-4de5-89c3-4f946c2c3460
      version: -1
      name: add forwarding address with disposition
      description: Creates a forwarding address. If ownership verification is required,
        a message will be sent to the recipient and the resource's verification status
        will be set to pending; otherwise, the resource will be created with verification
        status set to accepted. This method is only available to service account clients
        that have been delegated domain-wide authority.
      script: '|||gmail-forwarding-address-add'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "80"
    scriptarguments:
      disposition:
        simple: trash
      forwarding_email:
        simple: admin@demistodev.com
      user_id:
        simple: ${Account.ID}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 840,
          "y": 7180
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "72":
    id: "72"
    taskid: 794abb83-6961-4cc8-8068-c8bca2df6bdc
    type: regular
    task:
      id: 794abb83-6961-4cc8-8068-c8bca2df6bdc
      version: -1
      name: gmail-forwarding-address-remove
      description: Deletes the specified forwarding address and revokes any verification
        that may have been required This method is only available to service account
        clients that have been delegated domain-wide authority.
      script: Gmail|||gmail-forwarding-address-remove
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      forwarding_email:
        simple: admin@demistodev.com
      user_id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 7690
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "73":
    id: "73"
    taskid: 47835fda-4983-437c-8365-7806b24bdd96
    type: regular
    task:
      id: 47835fda-4983-437c-8365-7806b24bdd96
      version: -1
      name: delete context
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs.paloaltonetworks.com/cortex/cortex-xsoar/6-2/cortex-xsoar-admin/playbooks/automations.html
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "74"
    scriptarguments:
      key:
        simple: Gmail.ForwardingAddress
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 6235
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "74":
    id: "74"
    taskid: b8f6b377-eb14-4ec5-8e63-ca37c9432a8e
    type: regular
    task:
      id: b8f6b377-eb14-4ec5-8e63-ca37c9432a8e
      version: -1
      name: gmail-forwarding-address-get (Gmail)
      description: Gets the specified forwarding address or a list of the forwarding
        addresses for the specified account.
      script: Gmail|||gmail-forwarding-address-get
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "76"
    scriptarguments:
      forwarding_email:
        simple: admin@demistodev.com
      user_id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 6370
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "75":
    id: "75"
    taskid: d2e15e99-0aed-48bc-87d4-7d6211176a2b
    type: condition
    task:
      id: d2e15e99-0aed-48bc-87d4-7d6211176a2b
      version: -1
      name: verify create forwarding address
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "73"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: Gmail.ForwardingAddress.forwardingEmail
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 840,
          "y": 6055
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "76":
    id: "76"
    taskid: 0cecec74-60a4-4012-8da3-f9ea677d1eb4
    type: condition
    task:
      id: 0cecec74-60a4-4012-8da3-f9ea677d1eb4
      version: -1
      name: verify create forwarding address
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "78"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: Gmail.ForwardingAddress.forwardingEmail
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 6520
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "78":
    id: "78"
    taskid: 330979b1-5185-47b5-8765-7d87a4cafc88
    type: regular
    task:
      id: 330979b1-5185-47b5-8765-7d87a4cafc88
      version: -1
      name: delete context
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs.paloaltonetworks.com/cortex/cortex-xsoar/6-2/cortex-xsoar-admin/playbooks/automations.html
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "79"
    scriptarguments:
      key:
        simple: Gmail.ForwardingAddress
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 6685
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "79":
    id: "79"
    taskid: be84d631-0822-4b11-84ba-f72b3f3a7265
    type: regular
    task:
      id: be84d631-0822-4b11-84ba-f72b3f3a7265
      version: -1
      name: gmail get user
      description: Gets information for a specified user.
      script: Gmail|||gmail-get-user
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "97"
    scriptarguments:
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 6835
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "80":
    id: "80"
    taskid: 6b13139d-8f36-43f0-8b38-b588377ca5fb
    type: condition
    task:
      id: 6b13139d-8f36-43f0-8b38-b588377ca5fb
      version: -1
      name: verify create forwarding address with disposition
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "85"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              complex:
                root: Gmail.ForwardingAddress
                accessor: forwardingEmail
            iscontext: true
          right:
            value: {}
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 840,
          "y": 7320
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "81":
    id: "81"
    taskid: 89cff53f-4a41-466b-89e1-aa9a12440140
    type: regular
    task:
      id: 89cff53f-4a41-466b-89e1-aa9a12440140
      version: -1
      name: delete context
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs.paloaltonetworks.com/cortex/cortex-xsoar/6-2/cortex-xsoar-admin/playbooks/automations.html
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "90"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5570
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "82":
    id: "82"
    taskid: da085dab-2d23-48f9-8b89-02d218589714
    type: regular
    task:
      id: da085dab-2d23-48f9-8b89-02d218589714
      version: -1
      name: sleep
      description: Sleep for X seconds
      scriptName: Sleep
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      seconds:
        simple: "3"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 380,
          "y": 2730
        }
      }
    note: false
    timertriggers:
    - fieldname: timetoassignment
      action: start
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "85":
    id: "85"
    taskid: 703bc963-a11f-4373-8d74-b8f38bd4f2a2
    type: regular
    task:
      id: 703bc963-a11f-4373-8d74-b8f38bd4f2a2
      version: -1
      name: gmail-forwarding-address-list
      description: Lists the forwarding addresses for the specified account.
      script: '|||gmail-forwarding-address-list'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "72"
    scriptarguments:
      user_id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 850,
          "y": 7505
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "87":
    id: "87"
    taskid: 668e37e8-a099-43db-892c-e30c79bb2bf2
    type: condition
    task:
      id: 668e37e8-a099-43db-892c-e30c79bb2bf2
      version: -1
      name: Check user's existence
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "62"
      "yes":
      - "88"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Gmail.Address
            iscontext: true
          right:
            value:
              simple: johns@demistodev.com
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2130,
          "y": 655
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "88":
    id: "88"
    taskid: 7668fb27-cb8c-4ab8-81e9-8c476b0ec17c
    type: regular
    task:
      id: 7668fb27-cb8c-4ab8-81e9-8c476b0ec17c
      version: -1
      name: List mailbox filters
      script: '|||gmail-list-filters'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "89"
    scriptarguments:
      address:
        simple: johns@demistodev.com
      limit:
        simple: "5"
      user-id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2130,
          "y": 855
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "89":
    id: "89"
    taskid: c379f911-2431-47fc-8c88-dc6e348b07a8
    type: condition
    task:
      id: c379f911-2431-47fc-8c88-dc6e348b07a8
      version: -1
      name: get filter
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "21"
      "yes":
      - "23"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              complex:
                root: GmailFilter.Criteria.from
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: GmailFilter.Criteria.from
                      iscontext: true
                    right:
                      value:
                        simple: johns@demistodev.com
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2130,
          "y": 1030
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "90":
    id: "90"
    taskid: 2006346d-80d6-4168-8204-4f163fc51f65
    type: regular
    task:
      id: 2006346d-80d6-4168-8204-4f163fc51f65
      version: -1
      name: gmail-forwarding-address-list
      description: Lists the forwarding addresses for the specified account.
      script: '|||gmail-forwarding-address-list'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "91"
    scriptarguments:
      user_id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 370,
          "y": 5745
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "91":
    id: "91"
    taskid: 5e0b418d-fbc6-4196-80c4-1ff5afbe5147
    type: condition
    task:
      id: 5e0b418d-fbc6-4196-80c4-1ff5afbe5147
      version: -1
      name: Check forwarding existence
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "66"
      "yes":
      - "73"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.ForwardingAddress.forwardingEmail
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 370,
          "y": 5900
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "93":
    id: "93"
    taskid: dcbe9321-dac0-431e-8672-fb3d068cc3f3
    type: condition
    task:
      id: dcbe9321-dac0-431e-8672-fb3d068cc3f3
      version: -1
      name: Check user's existence
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "96"
      "yes":
      - "6"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Gmail.Address
            iscontext: true
          right:
            value:
              simple: johns@demistodev.com
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 1450
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "94":
    id: "94"
    taskid: 232a2da1-fc14-4d3f-8776-57dbbc1ff0cb
    type: regular
    task:
      id: 232a2da1-fc14-4d3f-8776-57dbbc1ff0cb
      version: -1
      name: List all users
      script: '|||gmail-list-users'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "93"
    scriptarguments:
      retry-count:
        simple: "0"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 1310
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "96":
    id: "96"
    taskid: b289fe3b-db86-40d1-837f-06498c5477fc
    type: regular
    task:
      id: b289fe3b-db86-40d1-837f-06498c5477fc
      version: -1
      name: DeleteContext
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
      - "13"
      - "26"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 970,
          "y": 1475
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "97":
    id: "97"
    taskid: 5824956c-5e2d-4760-8015-aa507a5ff47a
    type: regular
    task:
      id: 5824956c-5e2d-4760-8015-aa507a5ff47a
      version: -1
      name: gmail-forwarding-address-list
      description: Lists the forwarding addresses for the specified account.
      script: '|||gmail-forwarding-address-list'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "98"
    scriptarguments:
      user_id:
        simple: me
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 360,
          "y": 6950
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "98":
    id: "98"
    taskid: b81a19ce-171c-4ff3-8e61-a7335e9e6190
    type: condition
    task:
      id: b81a19ce-171c-4ff3-8e61-a7335e9e6190
      version: -1
      name: Check forwarding existence
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "85"
      "yes":
      - "67"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.ForwardingAddress.forwardingEmail
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 360,
          "y": 7100
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "99":
    id: "99"
    taskid: 2d448402-481c-4b2b-8398-3183d01f0c50
    type: condition
    task:
      id: 2d448402-481c-4b2b-8398-3183d01f0c50
      version: -1
      name: Check user's existence
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "101"
      "yes":
      - "57"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Gmail.Address
            iscontext: true
          right:
            value:
              simple: user_to_delete@demistodev.com
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2670
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "100":
    id: "100"
    taskid: 9c6a4dbc-638b-41e7-8671-0559e9daefd7
    type: regular
    task:
      id: 9c6a4dbc-638b-41e7-8671-0559e9daefd7
      version: -1
      name: List all users
      script: '|||gmail-list-users'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "99"
    scriptarguments:
      retry-count:
        simple: "0"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2510
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "101":
    id: "101"
    taskid: db1317c9-762c-4e57-8517-3d12ed24c628
    type: regular
    task:
      id: db1317c9-762c-4e57-8517-3d12ed24c628
      version: -1
      name: DeleteContext
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "51"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 3010
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {
      "99_57_yes": 0.24
    },
    "paper": {
      "dimensions": {
        "height": 8735,
        "width": 2560,
        "x": 20,
        "y": -810
      }
    }
  }
fromversion: 5.0.0
sourceplaybookid: GmailTest
description: ''
