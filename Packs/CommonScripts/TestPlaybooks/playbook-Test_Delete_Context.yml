id: test_delete_context
version: -1
name: Test Delete Context
fromversion: 5.0.0
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: cd44a265-75e2-4b3c-8ff5-10a93e7eef5a
    type: start
    task:
      id: cd44a265-75e2-4b3c-8ff5-10a93e7eef5a
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "34"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": -100
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "1":
    id: "1"
    taskid: 1762e645-6ebf-4578-8ff4-0fff84685221
    type: regular
    task:
      id: 1762e645-6ebf-4578-8ff4-0fff84685221
      version: -1
      name: Set A
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    scriptarguments:
      key:
        simple: A
      value:
        simple: a1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 400
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "2":
    id: "2"
    taskid: 6129234e-ea00-4488-8f05-36e617ac7cf4
    type: regular
    task:
      id: 6129234e-ea00-4488-8f05-36e617ac7cf4
      version: -1
      name: Delete A
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      key:
        simple: A
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 575
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "3":
    id: "3"
    taskid: 9154b5ab-b849-41d6-83bb-c1a1ec0f6cb9
    type: condition
    task:
      id: 9154b5ab-b849-41d6-83bb-c1a1ec0f6cb9
      version: -1
      name: Ensure A doesn't exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "4"
      "yes":
      - "5"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotExists
          left:
            value:
              simple: A
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 750
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "4":
    id: "4"
    taskid: b26a0386-3ea2-44d9-86cc-880651835678
    type: regular
    task:
      id: b26a0386-3ea2-44d9-86cc-880651835678
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: ${A}
      error:
        simple: A should not exists
      expected:
        simple: NONE
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 925
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "5":
    id: "5"
    taskid: b3698d3e-cf4d-4eeb-86b9-d6618fc76897
    type: regular
    task:
      id: b3698d3e-cf4d-4eeb-86b9-d6618fc76897
      version: -1
      name: Set B
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "6"
    scriptarguments:
      key:
        simple: B
      value:
        simple: b1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 925
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "6":
    id: "6"
    taskid: c827c319-ea58-479c-8845-3a3937e26b45
    type: regular
    task:
      id: c827c319-ea58-479c-8845-3a3937e26b45
      version: -1
      name: Set C
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
    scriptarguments:
      key:
        simple: C
      value:
        simple: c1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1100
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "7":
    id: "7"
    taskid: c96e86fe-12c8-4056-8ea3-8b0f9ea1d114
    type: regular
    task:
      id: c96e86fe-12c8-4056-8ea3-8b0f9ea1d114
      version: -1
      name: Delete All Context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1275
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "8":
    id: "8"
    taskid: 614ce630-d2e2-44e6-8233-3d9c2a7ae292
    type: condition
    task:
      id: 614ce630-d2e2-44e6-8233-3d9c2a7ae292
      version: -1
      name: Ensure context is empty
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "10"
      "yes":
      - "11"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: .
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1450
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "10":
    id: "10"
    taskid: 15f7054b-5597-41d8-83f9-9760432d0588
    type: regular
    task:
      id: 15f7054b-5597-41d8-83f9-9760432d0588
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: ${.}
      error:
        simple: Context should be empty
      expected:
        simple: NONE
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 1625
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "11":
    id: "11"
    taskid: 061e17a2-90f7-4ef2-8e06-8bf326977ef0
    type: regular
    task:
      id: 061e17a2-90f7-4ef2-8e06-8bf326977ef0
      version: -1
      name: Set B
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "12"
    scriptarguments:
      key:
        simple: B
      value:
        simple: b1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 1625
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "12":
    id: "12"
    taskid: 1aa4a424-e861-4a47-82de-8fa590f86718
    type: regular
    task:
      id: 1aa4a424-e861-4a47-82de-8fa590f86718
      version: -1
      name: Set C
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "13"
    scriptarguments:
      key:
        simple: C
      value:
        simple: c1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 1800
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "13":
    id: "13"
    taskid: 83be7291-2787-4114-88ab-d78cc8bb858a
    type: regular
    task:
      id: 83be7291-2787-4114-88ab-d78cc8bb858a
      version: -1
      name: Delete All Context expect B
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "14"
    scriptarguments:
      all:
        simple: "yes"
      keysToKeep:
        simple: B
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 1975
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "14":
    id: "14"
    taskid: 5b66a79e-edaa-48a7-8827-1e136073a417
    type: condition
    task:
      id: 5b66a79e-edaa-48a7-8827-1e136073a417
      version: -1
      name: Ensure context is empty expect B
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "15"
      "yes":
      - "16"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotExists
          left:
            value:
              simple: C
            iscontext: true
      - - operator: isExists
          left:
            value:
              simple: B
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2150
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "15":
    id: "15"
    taskid: 9fcafc2b-d01b-4934-8c5f-4b08c9d77559
    type: regular
    task:
      id: 9fcafc2b-d01b-4934-8c5f-4b08c9d77559
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: B - ${B}, C - ${C}
      error:
        simple: Context should be empty expect B
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2325
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "16":
    id: "16"
    taskid: 83bf7637-9711-4eb4-8563-dc63cad60b15
    type: regular
    task:
      id: 83bf7637-9711-4eb4-8563-dc63cad60b15
      version: -1
      name: Set A 1
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "17"
    scriptarguments:
      key:
        simple: A
      value:
        simple: a1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 2325
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "17":
    id: "17"
    taskid: a152c7cf-6600-486d-890e-d6dbd66dc2ce
    type: regular
    task:
      id: a152c7cf-6600-486d-890e-d6dbd66dc2ce
      version: -1
      name: Set A 2
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "18"
    scriptarguments:
      append:
        simple: "true"
      key:
        simple: A
      value:
        simple: a2
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 2500
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "18":
    id: "18"
    taskid: 7bc267af-29e9-4d75-8a5b-89e256868aec
    type: regular
    task:
      id: 7bc267af-29e9-4d75-8a5b-89e256868aec
      version: -1
      name: Delete A at index 1
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "19"
    scriptarguments:
      all:
        simple: "no"
      index:
        simple: "1"
      key:
        simple: A
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 2675
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "19":
    id: "19"
    taskid: 41cab530-f58f-45b1-89c4-4d0e06c5d89a
    type: condition
    task:
      id: 41cab530-f58f-45b1-89c4-4d0e06c5d89a
      version: -1
      name: Ensure A has been updated
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "20"
      "yes":
      - "21"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: hasLength
          left:
            value:
              simple: A
            iscontext: true
          right:
            value:
              simple: "1"
      - - operator: isEqualString
          left:
            value:
              simple: A
            iscontext: true
          right:
            value:
              simple: a1
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 2850
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "20":
    id: "20"
    taskid: f974475a-e3f0-4d2b-8687-7f4084b03d35
    type: regular
    task:
      id: f974475a-e3f0-4d2b-8687-7f4084b03d35
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: B - ${B}, C - ${C}
      error:
        simple: Context should be empty expect B
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3025
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "21":
    id: "21"
    taskid: 3868021e-4f6d-448b-89b7-7bbdede73f0b
    type: regular
    task:
      id: 3868021e-4f6d-448b-89b7-7bbdede73f0b
      version: -1
      name: Delete A at index 1 - should give error
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "22"
    scriptarguments:
      index:
        simple: "1"
      key:
        simple: A
    separatecontext: false
    continueonerror: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 3025
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "22":
    id: "22"
    taskid: cfeee54c-c0a7-4f05-87dd-3bd337171212
    type: condition
    task:
      id: cfeee54c-c0a7-4f05-87dd-3bd337171212
      version: -1
      name: Ensure error occurred
      scriptName: isError
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "no":
      - "24"
      "yes":
      - "25"
    scriptarguments:
      entryId:
        simple: ${lastCompletedTaskEntries}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 3200
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "24":
    id: "24"
    taskid: 38cd0b63-9d20-4864-825b-df13dae4a354
    type: regular
    task:
      id: 38cd0b63-9d20-4864-825b-df13dae4a354
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: B - ${B}, C - ${C}
      error:
        simple: Context should be empty expect B
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 3375
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "25":
    id: "25"
    taskid: 0fa029ce-e133-4d87-8e19-d27a53d52cf8
    type: regular
    task:
      id: 0fa029ce-e133-4d87-8e19-d27a53d52cf8
      version: -1
      name: Delete A at index 0
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "26"
    scriptarguments:
      index:
        simple: "0"
      key:
        simple: A
    separatecontext: false
    continueonerror: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 3375
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "26":
    id: "26"
    taskid: e16cde9c-a6d7-4e13-88e3-4845be7061e4
    type: condition
    task:
      id: e16cde9c-a6d7-4e13-88e3-4845be7061e4
      version: -1
      name: Ensure A doesn't exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "27"
      "yes":
      - "29"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotExists
          left:
            value:
              simple: A
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 3550
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "27":
    id: "27"
    taskid: 9f20a48e-dfa1-4df1-8ff6-193217e5cd25
    type: regular
    task:
      id: 9f20a48e-dfa1-4df1-8ff6-193217e5cd25
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: B - ${B}, C - ${C}
      error:
        simple: Context should be empty expect B
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 3725
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "28":
    id: "28"
    taskid: 17ebd51e-545e-4fc4-8b1a-b9416cb7ad13
    type: title
    task:
      id: 17ebd51e-545e-4fc4-8b1a-b9416cb7ad13
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2630,
          "y": 6640
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "29":
    id: "29"
    taskid: ade380b1-9114-47fb-887e-45b058b358ec
    type: regular
    task:
      id: ade380b1-9114-47fb-887e-45b058b358ec
      version: -1
      name: Set D.E
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "30"
    scriptarguments:
      key:
        simple: D.E
      value:
        simple: '{"d1":"e1","d2":"e2"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1555,
          "y": 3725
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "30":
    id: "30"
    taskid: 63e8125c-4b66-4e97-82ff-55026580ffb4
    type: regular
    task:
      id: 63e8125c-4b66-4e97-82ff-55026580ffb4
      version: -1
      name: Delete All Context expect D.E.d1 (tests trim as well)
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      all:
        simple: "yes"
      keysToKeep:
        simple: ' D.E.d1'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1555,
          "y": 3900
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "31":
    id: "31"
    taskid: 83debd74-72d6-4e4b-873f-460634455cf5
    type: condition
    task:
      id: 83debd74-72d6-4e4b-873f-460634455cf5
      version: -1
      name: Ensure D.E.d2 doesn't exists and D.E.d1 equals e1
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "32"
      "yes":
      - "36"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotExists
          left:
            value:
              simple: D.E.d2
            iscontext: true
      - - operator: isEqualString
          left:
            value:
              simple: ${D.E.d1}
            iscontext: true
          right:
            value:
              simple: e1
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1555,
          "y": 4075
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "32":
    id: "32"
    taskid: 1b21bd8a-8edf-4bff-84e5-1a2085fb264c
    type: regular
    task:
      id: 1b21bd8a-8edf-4bff-84e5-1a2085fb264c
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: D.E.d1 - ${D.E.d1}, D.E.d2 - ${D.E.d2}
      error:
        simple: Context should be empty expect D.E.d1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 4250
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "34":
    id: "34"
    taskid: 8dfd0b11-1316-4569-8e19-ffd851828c7c
    type: regular
    task:
      id: 8dfd0b11-1316-4569-8e19-ffd851828c7c
      version: -1
      name: Clear context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "35"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 50
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "35":
    id: "35"
    taskid: e1fa34d0-6759-4cb8-8064-0eb9d9184cec
    type: playbook
    task:
      id: e1fa34d0-6759-4cb8-8064-0eb9d9184cec
      version: -1
      name: Delete Context Subplaybook Test
      playbookName: Delete Context Subplaybook Test
      type: playbook
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 225
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "36":
    id: "36"
    taskid: 11043d87-6870-400b-8f62-e9ae6bd49413
    type: regular
    task:
      id: 11043d87-6870-400b-8f62-e9ae6bd49413
      version: -1
      name: Set array with duplicates
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "37"
    scriptarguments:
      key:
        simple: ArrayWithDuplicates
      value:
        simple: '["duplicate","duplicate"]'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1770,
          "y": 4250
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "37":
    id: "37"
    taskid: a4084536-78cd-4d3c-8746-190b6fbb12c2
    type: regular
    task:
      id: a4084536-78cd-4d3c-8746-190b6fbb12c2
      version: -1
      name: Delete All Context expect for the array with the duplicates
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "38"
    scriptarguments:
      all:
        simple: "yes"
      keysToKeep:
        simple: ArrayWithDuplicates
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1770,
          "y": 4425
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "38":
    id: "38"
    taskid: b5b65cb4-934f-4712-80ad-d6914029c37b
    type: condition
    task:
      id: b5b65cb4-934f-4712-80ad-d6914029c37b
      version: -1
      name: Ensure the array contains duplicates
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "39"
      "yes":
      - "42"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: hasLength
          left:
            value:
              simple: ${ArrayWithDuplicates}
            iscontext: true
          right:
            value:
              simple: "2"
      - - operator: containsGeneral
          left:
            value:
              simple: ${ArrayWithDuplicates}
            iscontext: true
          right:
            value:
              simple: duplicate
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1770,
          "y": 4600
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "39":
    id: "39"
    taskid: 085359b2-5a1a-4a21-8c7c-a5b3fcffbdd3
    type: regular
    task:
      id: 085359b2-5a1a-4a21-8c7c-a5b3fcffbdd3
      version: -1
      name: Fail
      script: RaiseError
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      actual:
        simple: ArrayWithDuplicates - ${ArrayWithDuplicates}
      error:
        simple: Array should contain duplicates
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1760,
          "y": 4775
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "40":
    id: "40"
    taskid: 2c2226db-90ef-426e-8f7e-02b5ffc141de
    type: regular
    task:
      id: 2c2226db-90ef-426e-8f7e-02b5ffc141de
      version: -1
      name: Set some values
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "41"
    scriptarguments:
      key:
        simple: Bug
      value:
        simple: '[{"hello": "world", "name": "john"}, {"hello": "kitty", "name": "john
          b"}]'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2415,
          "y": 5095
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "41":
    id: "41"
    taskid: 4d5abddc-04b2-4c6f-8078-f7d04618595b
    type: regular
    task:
      id: 4d5abddc-04b2-4c6f-8078-f7d04618595b
      version: -1
      name: Delete all but specific values from an array
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs-cortex.paloaltonetworks.com/r/Cortex-XSOAR/6.10/Cortex-XSOAR-Administrator-Guide/Automations
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "44"
    scriptarguments:
      all:
        simple: "yes"
      keysToKeep:
        simple: Test.Case1.events.[1].name,Bug.[0].hello
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 5270
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "42":
    id: "42"
    taskid: 4f725123-4d40-4a3d-8f5e-ad88269490e2
    type: title
    task:
      id: 4f725123-4d40-4a3d-8f5e-ad88269490e2
      version: -1
      name: 'Use case: delete all context except specific array elements'
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "47"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 4790
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "43":
    id: "43"
    taskid: ac0c5d02-34e7-4b27-8b79-8ea072078bbf
    type: regular
    task:
      id: ac0c5d02-34e7-4b27-8b79-8ea072078bbf
      version: -1
      name: Set some values
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "41"
    scriptarguments:
      key:
        simple: Test.Case1.events
      value:
        simple: '[{"name": "walker"}, {"name": "john"}]'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1985,
          "y": 5095
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "44":
    id: "44"
    taskid: c480d276-a0de-4534-87b7-169bfc8586f1
    type: condition
    task:
      id: c480d276-a0de-4534-87b7-169bfc8586f1
      version: -1
      name: Validate results
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "45"
      "yes":
      - "46"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Test.Case1.events.name
            iscontext: true
          right:
            value:
              simple: john
      - - operator: isEqualString
          left:
            value:
              simple: Bug.hello
            iscontext: true
          right:
            value:
              simple: world
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 5445
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "45":
    id: "45"
    taskid: 20813564-03e5-4329-86c2-fff77ab91b9f
    type: regular
    task:
      id: 20813564-03e5-4329-86c2-fff77ab91b9f
      version: -1
      name: Fail
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: |-
          Bug.hello: expected "world", received "${Bug.hello}"
          Test.Case1.events.name: expected "john" received "${Test.Case1.events.name}"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1985,
          "y": 5620
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "46":
    id: "46"
    taskid: 93d05528-64c5-4cb2-8783-bed25203d7b7
    type: title
    task:
      id: 93d05528-64c5-4cb2-8783-bed25203d7b7
      version: -1
      name: End Use Case
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2415,
          "y": 5635
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "47":
    id: "47"
    taskid: b608b3c0-8274-4f22-846f-727ed6938323
    type: title
    task:
      id: b608b3c0-8274-4f22-846f-727ed6938323
      version: -1
      name: Case 1 - keys in array element
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "40"
      - "43"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 4950
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "48":
    id: "48"
    taskid: 7a3c3624-db25-42bc-8dd0-72294f17158f
    type: title
    task:
      id: 7a3c3624-db25-42bc-8dd0-72294f17158f
      version: -1
      name: Case 2 - array element
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "49"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2415,
          "y": 5795
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "49":
    id: "49"
    taskid: 288593e1-36d9-4f56-81cc-73940bf90233
    type: regular
    task:
      id: 288593e1-36d9-4f56-81cc-73940bf90233
      version: -1
      name: Set some values
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "50"
    scriptarguments:
      key:
        simple: Case2
      value:
        simple: '[{"hello": "world", "name": "john"}, {"hello": "kitty", "name": "john
          b"}]'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2415,
          "y": 5940
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "50":
    id: "50"
    taskid: f128db78-230e-4c57-8f00-11c100dd1848
    type: regular
    task:
      id: f128db78-230e-4c57-8f00-11c100dd1848
      version: -1
      name: Delete all but specific values from an array
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs-cortex.paloaltonetworks.com/r/Cortex-XSOAR/6.10/Cortex-XSOAR-Administrator-Guide/Automations
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "51"
    scriptarguments:
      all:
        simple: "yes"
      keysToKeep:
        simple: Case2.[0]
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2415,
          "y": 6115
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "51":
    id: "51"
    taskid: 87cccc4f-57f0-4dd9-82ef-ebf4bc314c34
    type: condition
    task:
      id: 87cccc4f-57f0-4dd9-82ef-ebf4bc314c34
      version: -1
      name: Validate results
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "52"
      "yes":
      - "53"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Case2.hello
            iscontext: true
          right:
            value:
              simple: world
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2415,
          "y": 6290
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "52":
    id: "52"
    taskid: 311be985-d42a-435c-87e2-347d84156a9d
    type: regular
    task:
      id: 311be985-d42a-435c-87e2-347d84156a9d
      version: -1
      name: Fail
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: 'Bug.hello: expected "world", received "${Case2.hello}"'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2200,
          "y": 6465
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "53":
    id: "53"
    taskid: 70ec0e25-88f9-4b7e-8cb9-86502819fe9a
    type: title
    task:
      id: 70ec0e25-88f9-4b7e-8cb9-86502819fe9a
      version: -1
      name: End Use Case
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "28"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 2630,
          "y": 6480
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 6805,
        "width": 2960,
        "x": 50,
        "y": -100
      }
    }
  }
inputs: []
outputs: []
