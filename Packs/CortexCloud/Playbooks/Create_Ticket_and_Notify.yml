id: Create Ticket and Notify
version: -1
name: Create Ticket and Notify
description: This playbook automates the handling of issues, sending them through ServiceNow v2 or Jira v3 and notifying stakeholders via Slack v3, Microsoft Teams, or email. You have the flexibility to create or update a ticket using Jira or ServiceNow, to notify other teams using Slack or Microsoft Teams, or to send an email. You can choose to only create or update a ticket and skip the notification, skip creating or updating a ticket and send only a notification, or both create or update a ticket and notify relevant parties. This playbook requires existing integrations with Jira, ServiceNow, Slack, or Microsoft Teams to perform these actions. If none of these integrations are found in your account, the playbook will send an email with the issue details directly to the selected issue owner.
starttaskid: "0"
fromversion: 6.10.0
tasks:
  "0":
    id: "0"
    taskid: 41d4ba4e-d0b4-44c5-8958-0b6d8e76cf72
    type: start
    task:
      id: 41d4ba4e-d0b4-44c5-8958-0b6d8e76cf72
      version: -1
      name: ""
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "30"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 0
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "12":
    id: "12"
    taskid: 48523d9c-4677-49d1-8286-58afd1369d70
    type: condition
    task:
      id: 48523d9c-4677-49d1-8286-58afd1369d70
      version: -1
      name: Use ServiceNow for Issue ticket
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "32"
      Create:
      - "21"
      Update:
      - "44"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: ServiceNow
          ignorecase: true
        - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: Both
          ignorecase: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Create
      - - operator: isEmpty
          left:
            value:
              simple: inputs.System Input -ServiceNow Ticket ID
            iscontext: true
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: ServiceNow v2
    - label: Update
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: inputs.System Input -ServiceNow Ticket ID
            iscontext: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: ServiceNow
          ignorecase: true
        - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: Both
          ignorecase: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Update
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: ServiceNow v2
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 260
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "15":
    id: "15"
    taskid: ce72476c-be1f-4c3c-819b-6d153ac37fcf
    type: title
    task:
      id: ce72476c-be1f-4c3c-819b-6d153ac37fcf
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
      description: ''
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 2060
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "16":
    id: "16"
    taskid: 332b542d-5afe-4028-8a7a-6703d6fddde5
    type: condition
    task:
      id: 332b542d-5afe-4028-8a7a-6703d6fddde5
      version: -1
      name: Notify using Microsoft Teams?
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "40"
      Create:
      - "42"
      Update:
      - "38"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Create
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: Microsoft Teams
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred notification platform
            iscontext: true
          right:
            value:
              simple: Microsoft Teams
          ignorecase: true
    - label: Update
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred notification platform
            iscontext: true
          right:
            value:
              simple: Microsoft Teams
          ignorecase: true
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: Microsoft Teams
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 1000
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "21":
    id: "21"
    taskid: 8e176d70-a3ff-4947-8ba0-556f19c4d5af
    type: regular
    task:
      id: 8e176d70-a3ff-4947-8ba0-556f19c4d5af
      version: -1
      name: Create Issue ServiceNow ticket
      description: Creates new ServiceNow ticket.
      script: ServiceNow v2|||servicenow-create-ticket-quick-action
      type: regular
      iscommand: true
      brand: ServiceNow v2
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      description:
        simple: |-
          Issue Details

          Issue ID: ${issue.id}
          Issue Details: ${issue.details}
          Resource: ${inputs.System Input - Asset details.xdm__asset__name}
          Cloud Provider: ${inputs.System Input - Asset details.xdm__asset__provider}
          Misconfiguration Type: CSPM
          Severity Level: ${issue.severity}
          Region: ${inputs.System Input - Asset details.xdm__asset__cloud__region}
          Issue URL: ${demistoUrls.investigation}
      severity:
        simple: ${issue.severity}
      short_description:
        simple: Detected Issue - ${issue.details}
      ticket_type:
        simple: incident
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -260,
          "y": 410
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "24":
    id: "24"
    taskid: 8fa57c83-9b2f-4485-8ed0-ed6709f1ec82
    type: regular
    task:
      id: 8fa57c83-9b2f-4485-8ed0-ed6709f1ec82
      version: -1
      name: Create Issue Jira ticket
      description: Creates a new issue in Jira.
      script: Jira V3|||jira-create-issue-quick-action
      type: regular
      iscommand: true
      brand: Jira V3
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      description:
        simple: |
          Issue Details

          Issue ID: ${issue.id}
          Issue Details: ${issue.details}
          Resource: ${inputs.System Input - Asset details.xdm__asset__name}
          Cloud Provider: ${inputs.System Input - Asset details.xdm__asset__provider}
          Misconfiguration Type: CSPM
          Severity Level: ${issue.severity}
          Region: ${inputs.System Input - Asset details.xdm__asset__cloud__region}
          Issue URL: ${demistoUrls.workPlan}
      issue_type_name:
        simple: Task
      project_key:
        simple: ${inputs.Jira Project Key}
      summary:
        simple: Detected Issue - ${issue.details}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -230,
          "y": 710
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "25":
    id: "25"
    taskid: 91ef2365-0aca-407c-80f9-ab4da8ffc9ae
    type: condition
    task:
      id: 91ef2365-0aca-407c-80f9-ab4da8ffc9ae
      version: -1
      name: Send email to recipients
      description: commands.server.mail.sendmail
      type: condition
      iscommand: false
      brand: Builtin
    nexttasks:
      '#default#':
      - "15"
      Create:
      - "33"
      Update:
      - "43"
    scriptarguments:
      to:
        simple: ${issue.fw_email_recipient}
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: inputs.Notification email recipients
            iscontext: true
          right:
            value: {}
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Create
    - label: Update
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: inputs.Notification email recipients
            iscontext: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 1760
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "30":
    id: "30"
    taskid: 0601dc73-7dda-452e-867d-1e8543a5d18e
    type: title
    task:
      id: 0601dc73-7dda-452e-867d-1e8543a5d18e
      version: -1
      name: Create or Update Issue ticket
      type: title
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "12"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 130
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "31":
    id: "31"
    taskid: c89962f0-b263-424d-8e42-e5b21e98726b
    type: title
    task:
      id: c89962f0-b263-424d-8e42-e5b21e98726b
      version: -1
      name: Issue Notification
      type: title
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "16"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 870
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "32":
    id: "32"
    taskid: c1372f98-8726-469f-8944-c449056954a4
    type: condition
    task:
      id: c1372f98-8726-469f-8944-c449056954a4
      version: -1
      name: Use Jira for Issue ticket
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "31"
      Create:
      - "24"
      Update:
      - "45"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: Jira
          ignorecase: true
        - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: Both
          ignorecase: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Create
      - - operator: isEmpty
          left:
            value:
              simple: inputs.System Input -Jira Ticket ID
            iscontext: true
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: Jira V3
    - label: Update
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: Jira
          ignorecase: true
        - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred ticketing platform
            iscontext: true
          right:
            value:
              simple: Both
          ignorecase: true
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Update
      - - operator: isNotEmpty
          left:
            value:
              simple: inputs.System Input -Jira Ticket ID
            iscontext: true
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: Jira V3
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "33":
    id: "33"
    taskid: 306ac0b1-4dc1-4a2f-85f3-0796b8f9abd0
    type: regular
    task:
      id: 306ac0b1-4dc1-4a2f-85f3-0796b8f9abd0
      version: -1
      name: Send Email Notification
      description: commands.server.mail.sendmail
      script: mail-sender|||send-mail
      type: regular
      iscommand: true
      brand: mail-sender
    nexttasks:
      '#none#':
      - "15"
    scriptarguments:
      body:
        simple: |
          Issue Details

          Issue ID: ${issue.id}
          Issue Details: ${issue.details}
          Resource: ${inputs.System Input - Asset details.xdm__asset__name}
          Cloud Provider: ${inputs.System Input - Asset details.xdm__asset__provider}
          Misconfiguration Type: CSPM
          Severity Level: ${issue.severity}
          Region: ${inputs.System Input - Asset details.xdm__asset__cloud__region}
          Issue URL: ${demistoUrls.workPlan}
      subject:
        simple: Detected Issue - ${issue.details}
      to:
        simple: ${inputs.Notification email recipients}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -220,
          "y": 1910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "34":
    id: "34"
    taskid: c656fc3e-05b4-466d-8bd1-c8f88388629b
    type: title
    task:
      id: c656fc3e-05b4-466d-8bd1-c8f88388629b
      version: -1
      name: Email Notification
      type: title
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "25"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 1610
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "36":
    id: "36"
    taskid: 018fa72b-1e77-4cfa-8c32-6ac4429eb012
    type: regular
    task:
      id: 018fa72b-1e77-4cfa-8c32-6ac4429eb012
      version: -1
      name: Send Slack Notification
      description: Sends a message to a user, group, or channel.
      script: SlackV3|||slack-send-notification-quick-action
      type: regular
      iscommand: true
      brand: SlackV3
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      channel:
        simple: ${inputs.Slack Channel Name}
      message:
        simple: |-
          Issue Detected:

          Issue ID: ${issue.id}
          Issue Details: ${issue.details}
          Resource: ${inputs.System Input - Asset details.xdm__asset__name}
          Cloud Provider: ${inputs.System Input - Asset details.xdm__asset__provider}
          Misconfiguration Type: CSPM
          Severity Level: ${issue.severity}
          Region: ${inputs.System Input - Asset details.xdm__asset__cloud__region}
          Issue URL: ${demistoUrls.workPlan}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -230,
          "y": 1450
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "38":
    id: "38"
    taskid: 0d0b2ba7-fda3-4b94-846e-0aacbd7f75a1
    type: regular
    task:
      id: 0d0b2ba7-fda3-4b94-846e-0aacbd7f75a1
      version: -1
      name: Update Microsoft Teams Notification
      description: Sends a message to the specified teams.
      script: Microsoft Teams|||teams-send-notification-quick-action
      type: regular
      iscommand: true
      brand: Microsoft Teams
    nexttasks:
      '#none#':
      - "40"
    scriptarguments:
      channel:
        simple: ${inputs.Teams Channel Name}
      message:
        simple: |-
          Issue Resolved:

          Issue - ${issue.details}
          Asset Name - ${inputs.System Input - Asset details.xdm__asset__name}
          Remediation - Success
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 530,
          "y": 1150
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "40":
    id: "40"
    taskid: a2dbc27f-7b73-4767-8a17-d8efee458e92
    type: condition
    task:
      id: a2dbc27f-7b73-4767-8a17-d8efee458e92
      version: -1
      name: Notify using Slack?
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "34"
      Create:
      - "36"
      Update:
      - "41"
    separatecontext: false
    conditions:
    - label: Create
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Create
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: SlackV3
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred notification platform
            iscontext: true
          right:
            value:
              simple: Slack
          ignorecase: true
    - label: Update
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: inputs.Preferred notification platform
            iscontext: true
          right:
            value:
              simple: Slack
          ignorecase: true
      - - operator: inList
          left:
            value:
              simple: modules.brand
            iscontext: true
          right:
            value:
              simple: SlackV3
      - - operator: isEqualString
          left:
            value:
              simple: inputs.System Input - Issue State
            iscontext: true
          right:
            value:
              simple: Update
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 150,
          "y": 1300
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "41":
    id: "41"
    taskid: 7a255a4a-c141-4b17-8b56-273172b18d1a
    type: regular
    task:
      id: 7a255a4a-c141-4b17-8b56-273172b18d1a
      version: -1
      name: Update Slack Notification
      description: Sends a message to a user, group, or channel.
      script: SlackV3|||slack-send-notification-quick-action
      type: regular
      iscommand: true
      brand: SlackV3
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      channel:
        simple: ${inputs.Slack Channel Name}
      message:
        simple: |-
          Issue Resolved:

          Issue - ${issue.details}
          Asset Name - ${inputs.System Input - Asset details.xdm__asset__name}
          Remediation - Success
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 530,
          "y": 1450
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "42":
    id: "42"
    taskid: b1f64dcd-cb09-4bf6-8ecc-9084d8ef42b9
    type: regular
    task:
      id: b1f64dcd-cb09-4bf6-8ecc-9084d8ef42b9
      version: -1
      name: Send Microsoft Teams Notification
      description: Sends a message to the specified teams.
      script: Microsoft Teams|||teams-send-notification-quick-action
      type: regular
      iscommand: true
      brand: Microsoft Teams
    nexttasks:
      '#none#':
      - "40"
    scriptarguments:
      channel:
        simple: ${inputs.Teams Channel Name}
      message:
        simple: |-
          Issue Detected:

          Issue ID: ${issue.id}
          Issue Details: ${issue.details}
          Resource: ${inputs.System Input - Asset details.xdm__asset__name}
          Cloud Provider: ${inputs.System Input - Asset details.xdm__asset__provider}
          Misconfiguration Type: CSPM
          Severity Level: ${issue.severity}
          Region: ${inputs.System Input - Asset details.xdm__asset__cloud__region}
          Issue URL: ${demistoUrls.workPlan}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": -230,
          "y": 1150
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "43":
    id: "43"
    taskid: 80873004-deaf-4585-8e2c-95b0da363e4c
    type: regular
    task:
      id: 80873004-deaf-4585-8e2c-95b0da363e4c
      version: -1
      name: Update Email Notification
      description: commands.server.mail.sendmail
      script: mail-sender|||send-mail
      type: regular
      iscommand: true
      brand: mail-sender
    nexttasks:
      '#none#':
      - "15"
    scriptarguments:
      body:
        simple: |-
          Issue Resolved:

          Issue - ${issue.details}
          Asset Name - ${inputs.System Input - Asset details.xdm__asset__name}
          Remediation - Success
      subject:
        simple: Resolved Issue - ${issue.details}
      to:
        simple: ${inputs.Notification email recipients}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 530,
          "y": 1910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "44":
    id: "44"
    taskid: c046d37d-b529-42fe-8243-74bd2c86de10
    type: regular
    task:
      id: c046d37d-b529-42fe-8243-74bd2c86de10
      version: -1
      name: Update Issue ServiceNow ticket
      description: Updates the specified ticket.
      script: ServiceNow v2|||servicenow-update-ticket
      type: regular
      iscommand: true
      brand: ServiceNow v2
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      comments:
        simple: |-
          Issue Resolved:

          Issue - ${issue.details}
          Asset Name - ${inputs.System Input - Asset details.xdm__asset__name}
          Remediation - Success
      id:
        simple: ${inputs.System Input -ServiceNow Ticket ID}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 530,
          "y": 410
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "45":
    id: "45"
    taskid: 0a2d2c27-f919-4225-8965-5757613fdc04
    type: regular
    task:
      id: 0a2d2c27-f919-4225-8965-5757613fdc04
      version: -1
      name: Update Issue Jira ticket
      description: Adds a new comment to an existing Jira issue.
      script: Jira V3|||jira-issue-add-comment
      type: regular
      iscommand: true
      brand: Jira V3
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      comment:
        simple: |-
          Issue Resolved:

          Issue - ${issue.details}
          Asset Name - ${inputs.System Input - Asset details.xdm__asset__name}
          Remediation - Success
      issue_id:
        simple: ${inputs.System Input -Jira Ticket ID}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 530,
          "y": 710
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {
      "12_21_Create": 0.57,
      "12_44_Update": 0.6
    },
    "paper": {
      "dimensions": {
        "height": 2120,
        "width": 1170,
        "x": -260,
        "y": 0
      }
    }
  }
inputs:
- key: Preferred ticketing platform
  value: {}
  required: false
  description: |-
    Possible values:
    - Jira
    - ServiceNow
    - Both

    Note: If you leave this empty, no issue ticket will be generated, and the playbook will skip this step.
  playbookInputQuery:
- key: Preferred notification platform
  value: {}
  required: false
  description: |-
    Possible values:
    - Microsoft Teams
    - Slack

    Note: If you leave this blank, no notification message will be sent and the playbook will skip this step.
  playbookInputQuery:
- key: Notification email recipients
  value: {}
  required: false
  description: |-
    Provide the email address to send email notifications.

    Note: If you leave this blank, no email notification will be sent and the playbook will skip this step.
  playbookInputQuery:
- key: System Input - Asset details
  value: {}
  required: false
  description: 'Note: No input is required here; issue asset details will be automatically pulled from the remediation playbook.'
  playbookInputQuery:
- key: System Input - Issue State
  value: {}
  required: false
  description: 'Note: No input is required here; issue state value will be automatically entered from the remediation playbook.'
  playbookInputQuery:
- key: System Input -ServiceNow Ticket ID
  value: {}
  required: false
  description: 'Note: No input is required here; ServiceNow ticket ID will be automatically pulled from the remediation playbook.'
  playbookInputQuery:
- key: System Input -Jira Ticket ID
  value: {}
  required: false
  description: 'Note: No input is required here; Jira ticket ID will be automatically pulled from the remediation playbook.'
  playbookInputQuery:
- key: Jira Project Key
  value: {}
  required: false
  description: Provide Jira project key where the issue will be created.
  playbookInputQuery:
- key: Teams Channel Name
  value: {}
  required: false
  description: Provide Microsoft Teams channel name to which to send messages.
  playbookInputQuery:
- key: Slack Channel Name
  value: {}
  required: false
  description: Provide Slack channel name to which to send messages.
  playbookInputQuery:
inputSections:
- inputs:
  - Preferred ticketing platform
  - Preferred notification platform
  - Notification email recipients
  - System Input - Asset details
  - System Input - Issue State
  - System Input -ServiceNow Ticket ID
  - System Input -Jira Ticket ID
  - Jira Project Key
  - Teams Channel Name
  - Slack Channel Name
  name: General (Inputs group)
  description: Generic group for inputs
outputSections:
- outputs:
  - Ticket.Id
  - ServiceNow.Ticket.ID
  name: General (Outputs group)
  description: Generic group for outputs
outputs:
- contextPath: Ticket.Id
  description: Jira Ticket ID.
  type: string
- contextPath: ServiceNow.Ticket.ID
  description: Service Now Ticket ID.
  type: string
tests:
- No tests (auto formatted)
