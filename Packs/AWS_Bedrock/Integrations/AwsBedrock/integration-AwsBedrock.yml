commonfields:
  id: AWS Bedrock
  version: -1
name: AWS Bedrock
display: AWS Bedrock (Community Contribution)
category: IT Services
description: Amazon Web Services Bedrock service.
configuration:
- display: AWS Default Region
  name: defaultRegion
  type: 15
  required: false
  options:
  - us-east-1
  - us-west-2
  - ap-northeast-1
  - ap-southeast-1
  - eu-central-1
- display: Role Arn
  name: roleArn
  type: 0
  required: false
- display: Role Session Name
  name: roleSessionName
  type: 0
  required: false
- display: Role Session Duration
  name: sessionDuration
  type: 0
  required: false
- display: Access Key
  displaypassword: Access Key
  name: access_key
  type: 9
  required: false
  hiddenusername: true
- display: Secret Key
  displaypassword: Secret Key
  name: secret_key
  type: 9
  hiddenusername: true
  required: false
- display: Timeout
  name: timeout
  defaultvalue: 60,10
  type: 0
  required: false
  additionalinfo: The time in seconds till a timeout exception is reached. You can specify just the read timeout (for example 60) or also the connect timeout followed after a comma (for example 60,10). If a connect timeout is not specified, a default of 10 second will be used.
- display: Retries
  name: retries
  defaultvalue: '5'
  type: 0
  required: false
- display: PrivateLink service URL
  name: endpoint_url
  type: 0
  required: false
- display: STS PrivateLink URL
  name: sts_endpoint_url
  type: 0
  required: false
- display: Trust any certificate (not secure)
  name: insecure
  defaultvalue: 'false'
  type: 8
  required: false
- display: Use system proxy settings
  name: proxy
  type: 8
  required: false
script:
  script: >
    register_module_line('AWS Bedrock', 'start', __line__())

    ### pack version: 1.0.0




    def ask_command(bedrock, args):

        question = args.get('question')
        body = json.dumps({
            "prompt": f"\n\nHuman:{question}\n\nAssistant:",
            "max_tokens_to_sample": args.get("max_tokens_to_sample"),
            "temperature": 0.1,
            "top_p": 0.9,
        })

        modelId = args.get("model")
        accept = 'application/json'
        contentType = 'application/json'

        response = bedrock.invoke_model(body=body, modelId=modelId, accept=accept, contentType=contentType)

        response_body = json.loads(response.get('body').read())

        return CommandResults(
            outputs_prefix='AWS.Bedrock',
            readable_output=f'AWS Bedrock API returns with HTTP Code '
                            f'{response.get("ResponseMetadata",{}).get("HTTPStatusCode",{})}\n{response_body.get("completion")}',
            outputs=json.loads(response_body.get("completion")),
            raw_response=response_body
        )


    def get_aws_config(params):
        # AWS Config
        aws_default_region = params.get('defaultRegion')
        aws_role_arn = params.get('roleArn')
        aws_role_session_name = params.get('roleSessionName')
        aws_role_session_duration = params.get('sessionDuration')
        aws_role_policy = None
        aws_access_key_id = params.get('access_key', {}).get('password')
        aws_secret_access_key = params.get('secret_key', {}).get('password')
        verify_certificate = not params.get('insecure', False)
        timeout = params.get('timeout')
        retries = params.get('retries') or 5
        aws_client = AWSClient(aws_default_region, aws_role_arn, aws_role_session_name, aws_role_session_duration,
                               aws_role_policy, aws_access_key_id, aws_secret_access_key, verify_certificate, timeout,
                               retries)
        return aws_client


    def test_function(aws_client):
        client = aws_client.aws_session(service='bedrock')

        response = client.list_foundation_models()
        if response['ResponseMetadata']['HTTPStatusCode'] == 200:
            return 'ok'


    def main() -> None:

        command = demisto.command()
        aws_client = get_aws_config(demisto.params())
        bedrock = aws_client.aws_session(service='bedrock-runtime')

        try:
            if command == 'test-module':
                return_results(test_function(aws_client))
            elif command == 'aws-bedrock-ask':
                return_results(ask_command(bedrock, demisto.args()))
            else:
                raise NotImplementedError(f'Command {command} is not implemented')

        # Log exceptions and return errors
        except Exception as e:
            return_error(f'Failed to execute {command} command.\nError:\n{str(e)}')



    ### GENERATED CODE ###: from AWSApiModule import *  # noqa: E402

    # This code was inserted in place of an API module.

    register_module_line('AWSApiModule', 'start', __line__(), wrapper=-3)



    import boto3

    from botocore.config import Config



    def validate_params(aws_default_region, aws_role_arn, aws_role_session_name, aws_access_key_id, aws_secret_access_key):
        """
        Validates that the provided parameters are compatible with the appropriate authentication method.
        """
        if not aws_default_region:
            raise DemistoException('You must specify AWS default region.')

        if bool(aws_access_key_id) != bool(aws_secret_access_key):
            raise DemistoException('You must provide Access Key id and Secret key id to configure the instance with '
                                   'credentials.')
        if bool(aws_role_arn) != bool(aws_role_session_name):
            raise DemistoException('Role session name is required when using role ARN.')


    def extract_session_from_secret(secret_key, session_token):
        """
        Extract the session token from the secret_key field.
        """
        if secret_key and '@@@' in secret_key and not session_token:
            return secret_key.split('@@@')[0], secret_key.split('@@@')[1]
        else:
            return secret_key, session_token


    class AWSClient:

        def __init__(self, aws_default_region, aws_role_arn, aws_role_session_name, aws_role_session_duration,
                     aws_role_policy, aws_access_key_id, aws_secret_access_key, verify_certificate, timeout, retries,
                     aws_session_token=None, sts_endpoint_url=None, endpoint_url=None):

            self.sts_endpoint_url = sts_endpoint_url
            self.endpoint_url = endpoint_url
            self.aws_default_region = aws_default_region
            self.aws_role_arn = aws_role_arn
            self.aws_role_session_name = aws_role_session_name
            # handle cases where aws_role_session_duration can be also empty string
            self.aws_role_session_duration = aws_role_session_duration if aws_role_session_duration else None
            self.aws_role_policy = aws_role_policy
            self.aws_access_key_id = aws_access_key_id
            self.aws_secret_access_key, self.aws_session_token = extract_session_from_secret(aws_secret_access_key, aws_session_token)
            self.verify_certificate = verify_certificate

            proxies = handle_proxy(proxy_param_name='proxy', checkbox_default_value=False)
            (read_timeout, connect_timeout) = AWSClient.get_timeout(timeout)
            if int(retries) > 10:
                retries = 10
            self.config = Config(
                connect_timeout=connect_timeout,
                read_timeout=read_timeout,
                retries=dict(
                    max_attempts=int(retries)
                ),
                proxies=proxies
            )

        def update_config(self):
            command_config = {}
            retries = demisto.getArg('retries')  # Supports retries and timeout parameters on the command execution level
            if retries is not None:
                command_config['retries'] = dict(max_attempts=int(retries))
            timeout = demisto.getArg('timeout')
            if timeout is not None:
                (read_timeout, connect_timeout) = AWSClient.get_timeout(timeout)
                command_config['read_timeout'] = read_timeout
                command_config['connect_timeout'] = connect_timeout
            if retries or timeout:
                demisto.debug('Merging client config settings: {}'.format(command_config))
                self.config = self.config.merge(Config(**command_config))  # type: ignore[arg-type]

        def aws_session(self, service, region=None, role_arn=None, role_session_name=None, role_session_duration=None,
                        role_policy=None):
            kwargs = {}

            self.update_config()

            if role_arn and role_session_name is not None:
                kwargs.update({
                    'RoleArn': role_arn,
                    'RoleSessionName': role_session_name,
                })
            elif self.aws_role_arn and self.aws_role_session_name is not None:
                kwargs.update({
                    'RoleArn': self.aws_role_arn,
                    'RoleSessionName': self.aws_role_session_name,
                })

            if role_session_duration is not None:
                kwargs.update({'DurationSeconds': int(role_session_duration)})
            elif self.aws_role_session_duration is not None:
                kwargs.update({'DurationSeconds': int(self.aws_role_session_duration)})

            if role_policy is not None:
                kwargs.update({'Policy': role_policy})
            elif self.aws_role_policy is not None:
                kwargs.update({'Policy': self.aws_role_policy})

            demisto.debug('{kwargs}='.format(kwargs=kwargs))

            if kwargs and not self.aws_access_key_id:  # login with Role ARN
                if not self.aws_access_key_id:
                    sts_client = boto3.client('sts', config=self.config, verify=self.verify_certificate,
                                              region_name=region if region else self.aws_default_region,
                                              endpoint_url=self.sts_endpoint_url)
                    sts_response = sts_client.assume_role(**kwargs)
                    client = boto3.client(
                        service_name=service,
                        region_name=region if region else self.aws_default_region,
                        aws_access_key_id=sts_response['Credentials']['AccessKeyId'],
                        aws_secret_access_key=sts_response['Credentials']['SecretAccessKey'],
                        aws_session_token=sts_response['Credentials']['SessionToken'],
                        verify=self.verify_certificate,
                        config=self.config,
                        endpoint_url=self.endpoint_url
                    )
            elif self.aws_access_key_id and (role_arn or self.aws_role_arn):  # login with Access Key ID and Role ARN
                sts_client = boto3.client(
                    service_name='sts',
                    aws_access_key_id=self.aws_access_key_id,
                    aws_secret_access_key=self.aws_secret_access_key,
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.sts_endpoint_url
                )
                kwargs.update({
                    'RoleArn': role_arn or self.aws_role_arn,
                    'RoleSessionName': role_session_name or self.aws_role_session_name,
                })
                sts_response = sts_client.assume_role(**kwargs)
                client = boto3.client(
                    service_name=service,
                    region_name=region if region else self.aws_default_region,
                    aws_access_key_id=sts_response['Credentials']['AccessKeyId'],
                    aws_secret_access_key=sts_response['Credentials']['SecretAccessKey'],
                    aws_session_token=sts_response['Credentials']['SessionToken'],
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.endpoint_url
                )
            elif self.aws_session_token and not self.aws_role_arn:  # login with session token
                client = boto3.client(
                    service_name=service,
                    region_name=region if region else self.aws_default_region,
                    aws_access_key_id=self.aws_access_key_id,
                    aws_secret_access_key=self.aws_secret_access_key,
                    aws_session_token=self.aws_session_token,
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.endpoint_url
                )
            elif self.aws_access_key_id and not self.aws_role_arn:  # login with access key id
                client = boto3.client(
                    service_name=service,
                    region_name=region if region else self.aws_default_region,
                    aws_access_key_id=self.aws_access_key_id,
                    aws_secret_access_key=self.aws_secret_access_key,
                    verify=self.verify_certificate,
                    config=self.config,
                    endpoint_url=self.endpoint_url
                )
            else:  # login with default permissions, permissions pulled from the ec2 metadata
                client = boto3.client(service_name=service,
                                      region_name=region if region else self.aws_default_region,
                                      endpoint_url=self.endpoint_url)

            return client

        @staticmethod
        def get_timeout(timeout):
            if not timeout:
                timeout = "60,10"  # default values
            try:

                if isinstance(timeout, int):
                    read_timeout = timeout
                    connect_timeout = 10

                else:
                    timeout_vals = timeout.split(',')
                    read_timeout = int(timeout_vals[0])
                    # the default connect timeout is 10
                    connect_timeout = 10 if len(timeout_vals) == 1 else int(timeout_vals[1])

            except ValueError:
                raise DemistoException("You can specify just the read timeout (for example 60) or also the connect "
                                       "timeout followed after a comma (for example 60,10). If a connect timeout is not "
                                       "specified, a default of 10 second will be used.")
            return read_timeout, connect_timeout

    register_module_line('AWSApiModule', 'end', __line__(), wrapper=1)

    ### END GENERATED CODE ###


    if __name__ in ('__main__', '__builtin__', 'builtins'):
        main()

    register_module_line('AWS Bedrock', 'end', __line__())
  type: python
  commands:
  - name: aws-bedrock-ask-question
    arguments:
    - name: question
      description: The question to be sent to AWS Bedrock.
      type: textArea
    - name: model
      required: true
      description: Model to use in AWS Bedrock.
      defaultValue: anthropic.claude-v2
      type: textArea
    - name: max_tokens_to_sample
      defaultValue: 300
      required: true
      description: Model to use in AWS Bedrock.
      type: textArea
    outputs:
    - contextPath: AWS.Bedrock.Response
      description: The response replied by AWS Bedrock API.
      type: String
    description: Ask a question to AWS Amazon Bedrock.
  dockerimage: demisto/boto3py3:1.0.0.82871
  runonce: false
  subtype: python3
  nativeimage:
  - '8.3'
  - '8.4'
fromversion: 6.0.0
tests:
- No tests (auto formatted)
image: data:image/png;base64,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
detaileddescription: "### Community Contributed Integration\n #### Integration Author: Philippe Laporte\n No support or maintenance is provided by the author. Customers are encouraged to engage with the user community for questions and guidance at the [Cortex XSOAR Live Discussions](https://live.paloaltonetworks.com/t5/cortex-xsoar-discussions/bd-p/Cortex_XSOAR_Discussions).\n***\n## AWS Bedrock Help\n\nBefore you can use the AWS Bedrock integration in Cortex XSOAR, you need to set up correct permissions in your AWS environment as described further.\n\n### Prerequisites\n\n1. Request Amazon Bedrock access for the AWS account \n2. Use the console to accept the Amazon Bedrock terms and conditions.\n\n### AWS Permissions configuration\nTo configure AWS permissions for AWS Bedrock follow [AWS documentation](https://docs.aws.amazon.com/bedrock/latest/userguide/api-setup.html#api-using-sage)\n\n\nFor detailed instructions, [see the AWS Integrations - Authentication](https://xsoar.pan.dev/docs/reference/articles/aws-integrations---authentication).\n\n\n---\n[View Integration Documentation](https://xsoar.pan.dev/docs/reference/integrations/aws-bedrock)"
