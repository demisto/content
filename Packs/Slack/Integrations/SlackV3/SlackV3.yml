display: Slack v3
name: SlackV3
category: Messaging and Conferencing
commonfields:
  id: SlackV3
  version: -1
configuration:
- display: ''
  name: bot_token
  displaypassword: Bot Token
  hiddenusername: true
  required: false
  section: Connect
  type: 9
- display: ''
  name: user_token
  displaypassword: User Token
  hiddenusername: true
  required: false
  section: Connect
  type: 9
- display: ''
  name: app_token
  displaypassword: App Token
  hiddenusername: true
  required: false
  section: Connect
  type: 9
- display: Dedicated Slack channel to receive notifications
  name: incidentNotificationChannel
  advanced: true
  required: false
  section: Connect
  type: 0
- display: Minimum incident severity by which to send messages to Slack
  name: min_severity
  advanced: true
  defaultvalue: Low
  options:
  - Unknown
  - Low
  - Medium
  - High
  - Critical
  required: false
  section: Collect
  type: 15
- display: Types of Notifications to Send (Deprecated)
  name: permitted_notifications
  additionalinfo: Deprecated. Use User (User Name) -> User Preferences -> Notifications instead.
  advanced: true
  hidden: true
  options:
  - incidentAssigned
  - assign
  - incidentOpened
  - incidentChanged
  - investigationClosed
  - investigationDeleted
  - incidentReminderSLA
  - taskCompleted
  - incidentStatusChanged
  - failedFetchIncidents
  - mentionNew
  - mentionOld
  required: false
  section: Collect
  type: 16
- display: Type of incidents created in Slack
  name: incidentType
  defaultvalue: Unclassified
  required: false
  section: Connect
  type: 13
- display: Allow external users to create incidents via DM
  name: allow_incidents
  advanced: true
  required: false
  section: Collect
  type: 8
- display: Ignore event retries
  name: ignore_event_retries
  additionalinfo: In some cases, events may not be processed fast enough. If you want to attempt to retry the event, select `false`. Note that this can result in some responses being double-posted.
  advanced: true
  defaultvalue: 'true'
  required: false
  section: Collect
  type: 8
- display: Use system proxy settings
  name: proxy
  advanced: true
  required: false
  section: Connect
  type: 8
- display: Trust any certificate (not secure)
  name: unsecure
  additionalinfo: Trust any certificate (not secure). Make sure to mark this parameter if you want the SlackBlockBuilder script to send a response back to the incident context.
  advanced: true
  required: false
  section: Connect
  type: 8
- display: Enable Incident Mirroring
  name: mirroring
  defaultvalue: 'true'
  defaultvalue:xpanse: 'false'
  required: false
  section: Connect
  type: 8
- display: Enable Outbound File Mirroring
  name: enable_outbound_file_mirroring
  additionalinfo: Whether to enable mirroring only from xsoar to slack, mark it if file mirroring is required in investigations.
  required: false
  section: Connect
  type: 8
- display: Long running instance. Required for investigation mirroring and direct messages.
  name: longRunning
  additionalinfo: If your organization does not require incident mirroring, or data collection, it is possible to disable the `longRunning` parameter. For those organizations who do want to use these features, the parameter should be set to `True` to enable the long-running container.
  advanced: true
  defaultvalue: 'true'
  defaultvalue:xpanse: 'false'
  required: false
  section: Connect
  type: 8
- display: Bot display name in Slack
  name: bot_name
  advanced: true
  defaultvalue: Cortex XSOAR
  required: false
  section: Connect
  type: 0
- display: Bot icon in Slack - Image URL (Cortex XSOAR icon by default)
  name: bot_icon
  advanced: true
  defaultvalue: 'https://avatars.slack-edge.com/2020-05-24/1142885630851_5529c7f034d9b96ec39c_512.png'
  required: false
  section: Connect
  type: 0
- display: Maximum time to wait for a rate limiting call in seconds
  name: max_limit_time
  advanced: true
  defaultvalue: '60'
  required: false
  section: Connect
  type: 0
- display: Number of objects to return in each paginated call
  name: paginated_count
  advanced: true
  defaultvalue: '200'
  required: false
  section: Collect
  type: 0
- display: 'Comma-separated list of tags to filter the messages sent from Cortex XSOAR.'
  name: filtered_tags
  additionalinfo: Only supported in Cortex XSOAR V6.1 and above.
  advanced: true
  required: false
  section: Collect
  type: 0
- display: ''
  name: demisto_api_key
  additionalinfo: Adding an API key will enable the integration to handle blocks that contain a state and is necessary for the SlackBlockBuilder script.
  advanced: true
  displaypassword: XSOAR API Key
  hidden:
  - marketplacev2
  - xsoar
  hiddenusername: true
  required: false
  section: Connect
  type: 9
- display: Enable DMs to the bot
  name: enable_dm
  advanced: true
  defaultvalue: 'false'
  required: false
  section: Collect
  type: 8
- display: Disable Caching of Users and Channels
  name: disable_caching
  additionalinfo: This parameter prevents this integration from storing Users and Channels in the integration context. This parameter also prevents paginated calls which can result in timeout errors for large workspaces.
  advanced: true
  defaultvalue: 'false'
  required: false
  section: Collect
  type: 8
- display: Extensive Logging
  name: extensive_logging
  additionalinfo: This parameter will write additional data to the logs and should only be used when you are directed to by XSOAR support.
  advanced: true
  defaultvalue: 'false'
  required: false
  section: Connect
  type: 8
- display: Common Channels
  name: common_channels
  additionalinfo: For workspaces where a handful of channels are consistently being used, you may add them as a CSV in the format ChannelName:ChannelID.
  advanced: true
  required: false
  section: Collect
  type: 12
description: Send messages and notifications to your Slack team.
fromversion: 5.5.0
script:
  commands:
  - name: mirror-investigation
    arguments:
    - name: type
      auto: PREDEFINED
      default: true
      defaultValue: all
      description: The mirroring type. Can be "all", which mirrors everything, "chat", which mirrors only chats (not commands), or "none", which stops all mirroring.
      predefined:
      - all
      - chat
      - none
    - name: autoclose
      auto: PREDEFINED
      defaultValue: 'true'
      description: Whether the channel is auto-closed when an investigation is closed. Can be "true" or "false". Default is "true".
      predefined:
      - 'true'
      - 'false'
    - name: direction
      auto: PREDEFINED
      defaultValue: Both
      description: The mirroring direction.
      predefined:
      - Both
      - FromDemisto
      - ToDemisto
    - name: mirrorTo
      auto: PREDEFINED
      defaultValue: group
      description: The channel type.
      predefined:
      - channel
      - group
    - name: channelName
      description: The name of the channel. The default is "incident-<incidentID>".
    - name: channelTopic
      description: The topic of the channel.
    - name: kickAdmin
      auto: PREDEFINED
      defaultValue: 'false'
      description: Whether to remove the Slack administrator (channel creator) from the mirrored channel.
      predefined:
      - 'true'
      - 'false'
    - name: private
      auto: PREDEFINED
      defaultValue: 'true'
      description: Whether the mirrored channel should be private or not (true by default).
      predefined:
      - 'true'
      - 'false'
    description: Mirrors the investigation between Slack and the Cortex XSOAR War Room.
  - name: send-notification
    arguments:
    - name: message
      default: true
      description: 'The message content. When mentioning another Slack user, make sure to do so in the following format: <@user_name>.'
    - name: to
      description: The user to whom to send the message. Can be either the username or email address.
    - name: channel
      description: The name of the Slack channel to which to send the message.
    - name: channel_id
      description: The ID of the Slack channel to which to send the message.
    - name: entry
      description: An entry ID to send as a link.
    - name: ignoreAddURL
      auto: PREDEFINED
      defaultValue: 'false'
      description: Whether to include a URL to the relevant component in Cortex XSOAR.
      predefined:
      - 'true'
      - 'false'
    - name: threadID
      description: The ID of the thread to which to reply. Can be retrieved from a previous send-notification command.
    - name: blocks
      description: A JSON string of Slack blocks to send in the message.
    description: Sends a message to a user, group, or channel.
    outputs:
    - contextPath: Slack.Thread.ID
      description: The Slack thread ID.
      type: String
  - name: close-channel
    arguments:
    - name: channel
      description: The name of the channel to archive. If not provided, the mirrored investigation channel is archived (if the channel exists).
    - name: channel_id
      description: The ID of the channel to archive. If not provided, the mirrored investigation channel is archived (if the channel exists).
    description: Archives a Slack channel.
  - name: slack-send-file
    arguments:
    - name: file
      default: true
      description: The ID of the file entry to send.
      required: true
    - name: to
      description: The user to whom to send the file. Can be the username or the email address.
    - name: group
      description: The name of the Slack group (private channel) to which to send the file.
    - name: channel
      description: The name of the Slack channel to which to send the file.
    - name: channel_id
      description: The ID of the Slack channel to which to send the file.
    - name: threadID
      description: The ID of the thread to which to reply. Can be retrieved from a previous send-notification command.
    - name: comment
      description: A comment to add to the file.
    description: 'Sends a file to a user, channel, or group. If not specified, the file is sent to the mirrored investigation channel (if the channel exists).'
  - name: slack-set-channel-topic
    arguments:
    - name: channel
      description: The channel name. If not specified, the topic of the mirrored investigation channel is set (if the channel exists).
    - name: channel_id
      description: The channel ID. If not specified, the topic of the mirrored investigation channel is set (if the channel exists).
    - name: topic
      default: true
      description: The topic for the channel.
      required: true
    description: Sets the topic for a channel.
  - name: slack-create-channel
    arguments:
    - name: type
      auto: PREDEFINED
      defaultValue: private
      description: The channel type.
      predefined:
      - private
      - public
    - name: name
      default: true
      description: The name of the channel.
      required: true
    - name: users
      description: 'A CSV list of user names or email addresses to invite to the channel. For example: "user1, user2...".'
    description: Creates a channel in Slack.
    outputs:
    - contextPath: Slack.Channel.ID
      description: The ID of the channel.
      type: String
    - contextPath: Slack.Channel.Name
      description: The name of the channel.
      type: String
  - name: slack-invite-to-channel
    arguments:
    - name: users
      default: true
      description: 'A CSV list of usernames or email addresses to invite to join the channel. For example: "user1, user2...".'
      required: true
    - name: channel
      description: The name of the channel to which to invite the users. If the name of the channel is not specified, the name of the mirrored investigation channel is used (if the channel exists).
    - name: channel_id
      description: The ID of the channel to which to invite the users. If the ID of the channel is not specified, the ID of the mirrored investigation channel is used (if the channel exists).
    description: Invites users to join a channel.
  - name: slack-kick-from-channel
    arguments:
    - name: users
      default: true
      description: 'A CSV list of usernames or email addresses to remove from the a channel. For example: "user1, user2...".'
      required: true
    - name: channel
      description: The name of the channel from which to remove the users. If the name of the channel is not specified, the mirrored investigation channel is used (if the channel exists).
    - name: channel_id
      description: The ID of the channel from which to remove the users. If the ID of the channel is not specified, the mirrored investigation channel is used (if the channel exists).
    description: Removes users from the specified channel.
  - name: slack-rename-channel
    arguments:
    - name: name
      default: true
      description: The new name of the channel.
      required: true
    - name: channel
      description: The current name of the channel. If the name of the channel is not specified, the mirrored investigation channel is used (if the channel exists).
    - name: channel_id
      description: The current ID of the channel. If the ID of the channel is not specified, the mirrored investigation channel is used (if the channel exists).
    description: Renames a channel in Slack.
  - name: slack-get-user-details
    arguments:
    - name: user
      default: true
      description: The Slack user (username or email).
      required: true
    description: Get details about a specified user.
    outputs:
    - contextPath: Slack.User.ID
      description: The ID of the user.
      type: String
    - contextPath: Slack.User.Username
      description: The username of the user.
      type: String
    - contextPath: Slack.User.Name
      description: The actual name of the user.
      type: String
    - contextPath: Slack.User.DisplayName
      description: The display name of the user.
      type: String
    - contextPath: Slack.User.Email
      description: The email address of the user.
      type: String
  - name: slack-get-integration-context
    description: Returns the integration context as a file. Use this command for debug purposes only.
    hidden: true
  - name: slack-pin-message
    arguments:
    - name: channel
      description: The channel containing the message.
    - name: threadID
      description: The ID of the thread of which to pin. Can be retrieved from a previous send-notification command.
      required: true
    - name: channel_id
      description: The ID for the channel containing the message.
    description: Pins a selected message to the given channel.
  - name: slack-edit-message
    arguments:
    - name: channel
      description: The channel the message is posted in.
    - name: channel_id
      description: The ID for the channel the message is posted in.
    - name: threadID
      description: The ID of the thread of which to edit. Can be retrieved from a previous send-notification command.
      required: true
    - name: message
      description: The updated message.
    - name: blocks
      description: A JSON string of the block to send.
    - name: ignore_add_url
      description: Whether to include a URL to the relevant component in XSOAR. Can be "true" or "false". Default value is "false".
    description: Edit an existing Slack message.
    outputs:
    - contextPath: Slack.Thread.ID
      description: The timestamp identifier for the message.
      type: String
    - contextPath: Slack.Thread.Channel
      description: The channel ID the message was posted in.
      type: String
    - contextPath: Slack.Thread.Text
      description: The text the message was updated with.
      type: String
  - name: slack-user-session-reset
    arguments:
    - name: user_id
      description: The user id of the user.
      required: true
    description: Reset user session token in Slack.
  - name: slack-list-channels
    arguments:
    - name: name_filter
      description: 'Supply this argument to only return channels with this name.'
    - name: channel_types
      defaultValue: public_channel
      description: 'You can provide a comma separated list of other channels to include in your results. Possible options are: "public_channel", "private_channel", "mpim", and "im".  Including these options may require changes to your Bot''s OAuth scopes in order to read channels like private, group message, or personal messages.'
    - name: exclude_archived
      defaultValue: 'true'
      description: Default is true (exclude archived channels). This setting allows the command to read channels that have been archived.
    - name: limit
      defaultValue: 100
      description: Set this argument to specify how many results to return. If you have more results than the limit you set, you will need to use the cursor argument to paginate your results.
    - name: cursor
      description: 'Default is the first page of results. If you have more results than your limit, you need to paginate your results with this argument.  This is found with the next_cursor attribute returned by a previous request''s response_metadata.'
    description: 'List all of the channels in the organization workspace. This command required scopes depend on the type of channel-like object you''re working with. To use the command, you''ll need at least one of the channels:, groups:, im: or mpim: scopes corresponding to the conversation type you''re working with.'
    outputs:
    - contextPath: Slack.Channels.ID
      description: The ID for the channel.
      type: string
    - contextPath: Slack.Channels.Name
      description: Name of the channel.
      type: string
    - contextPath: Slack.Channels.Created
      description: Epoch timestamp when the channel was created.
      type: number
    - contextPath: Slack.Channels.Creator
      description: ID for the creator of the channel.
      type: string
    - contextPath: Slack.Channels.Purpose
      description: The purpose, or description, of the channel.
      type: string
  - name: slack-get-conversation-history
    arguments:
    - name: channel_id
      description: The channel ID associated with the Slack channel.
      required: true
    - name: limit
      defaultValue: 100
      description: Set this argument to specify how many results to return. If you have more results than the limit you set, you will need to use the cursor argument to paginate your results.
    - name: conversation_id
      description: The conversation ID.
    description: Fetches a conversation's history of messages and events.
  - name: slack-get-conversation-replies
    arguments:
    - name: channel_id
      description: ID of the channel.
      required: true
    - name: thread_timestamp
      description: The timestamp of the thread, that can be extracted using "slack-get-conversation-history" command.
      required: true
    - name: limit
      defaultValue: 100
      description: Set this argument to specify how many results to return.
    description: Retrieves replies to specific messages, regardless of whether it's from a public or private channel, direct message, or otherwise.
  dockerimage: demisto/slackv3:1.0.0.112417
  isFetchSamples: true
  longRunning: true
  runonce: false
  script: '-'
  subtype: python3
  type: python
sectionOrder:
- Connect
- Collect
tests:
- SlackV3 TestPB
- Test_SlackV3_NonCaching
