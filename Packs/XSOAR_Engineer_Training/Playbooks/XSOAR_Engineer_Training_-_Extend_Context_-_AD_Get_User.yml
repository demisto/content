id: XSOAR Engineer Training - Extend Context - AD Get User
version: -1
name: XSOAR Engineer Training - Extend Context - AD Get User
description: |-
  This playbook uses the extend context technique when looking up an AD user.

  The simple task puts their Name and Email in their own context keys.

  The advanced task creates a UserDetails key with the name and email as a dictionary underneath.
tags:
- training
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 9e561ae1-5782-47e6-89c0-3b7be14e8080
    type: start
    task:
      id: 9e561ae1-5782-47e6-89c0-3b7be14e8080
      version: -1
      name: ""
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 50
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "1":
    id: "1"
    taskid: f1793051-a3f1-4144-8cd0-7d3ada5dacbf
    type: regular
    task:
      id: f1793051-a3f1-4144-8cd0-7d3ada5dacbf
      version: -1
      name: Delete Context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 195
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "2":
    id: "2"
    taskid: c5552397-7cbb-4451-8acf-14e421d6d42d
    type: regular
    task:
      id: c5552397-7cbb-4451-8acf-14e421d6d42d
      version: -1
      name: Get User Name  & Email (ad-get-user) with Extend Context
      description: Retrieves detailed information about a user account. The user can be specified by username, email address, or as an Active Directory Distinguished Name (DN).
      script: '|||ad-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "6"
    scriptarguments:
      email:
        simple: james.bond@xsoar.local
      extend-context:
        simple: Name=attributes.name::Email=attributes.mail
      ignore-outputs:
        simple: "true"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 545
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "3":
    id: "3"
    taskid: 15aa5577-c437-4181-86ff-0904a5c44d74
    type: regular
    task:
      id: 15aa5577-c437-4181-86ff-0904a5c44d74
      version: -1
      name: Print Instructions - Extending Context & Playbook Overview
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    scriptarguments:
      extend-context:
        simple: Name=attributes.name::Mail=attributes.mail
      ignore-outputs:
        simple: "true"
      value:
        simple: |
          # Extending Content

          To find attributes that can be used in extend Context, first run the command with raw-response=true to find the structure.

          For example, the users name is stored under attributes.name, so we can use Extend Context to just put the users name in a context key.

          To get the raw-response:
          !ad-get-user email=james.bond@demisto.local raw-response=true

          Using extend context in CLI, grabbing only the name from the response by adding ignore-outputs:
          !ad-get-user email=james.bond@demisto.local extend-context=Name=attributes.name ignore-outputs=true

          ## XSOAR Engineer Training - Extend Context - AD Get User

          This playbook uses the extend context technique when looking up an AD user, putting only their Name and Email in their own context keys.
    reputationcalc: 1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 370
        }
      }
    note: true
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "4":
    id: "4"
    taskid: effc3aa8-49b8-4e66-848b-da4756225e29
    type: title
    task:
      id: effc3aa8-49b8-4e66-848b-da4756225e29
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
      description: ''
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1245
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "6":
    id: "6"
    taskid: e9b98c4a-3c9e-4551-8d74-c49af5a46efb
    type: regular
    task:
      id: e9b98c4a-3c9e-4551-8d74-c49af5a46efb
      version: -1
      name: Print the Name context key
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
    scriptarguments:
      value:
        complex:
          root: Name
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 720
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "7":
    id: "7"
    taskid: 82ebebfe-de84-441e-861f-f91cc6bf60e9
    type: regular
    task:
      id: 82ebebfe-de84-441e-861f-f91cc6bf60e9
      version: -1
      name: Get User Name  & Mail (ad-get-user) with Extend Context (Advanced)
      description: Retrieves detailed information about a user account. The user can be specified by username, email address, or as an Active Directory Distinguished Name (DN).
      script: '|||ad-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      email:
        simple: james.bond@xsoar.local
      extend-context:
        simple: 'UserDetails=.={"name": val.attributes.name,"email": val.attributes.mail}'
      ignore-outputs:
        simple: "true"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 895
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "8":
    id: "8"
    taskid: a727f5b9-03a2-4378-82f5-0e6672c85c75
    type: regular
    task:
      id: a727f5b9-03a2-4378-82f5-0e6672c85c75
      version: -1
      name: Print the User Details context key
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "4"
    scriptarguments:
      value:
        complex:
          root: UserDetails
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 1260,
        "width": 380,
        "x": 50,
        "y": 50
      }
    }
  }
inputs: []
outputs: []
tests:
- No tests (auto formatted)
fromversion: 6.8.0
