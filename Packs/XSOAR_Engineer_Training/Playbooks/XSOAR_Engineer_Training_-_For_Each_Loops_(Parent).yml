id: XSOAR Engineer Training - For Each Loops (Parent)
version: -1
name: XSOAR Engineer Training - For Each Loops (Parent)
description: "This playbook demonstrates sub-playbook looping using a for each method.  \n\nWe start by setting an array to a context key that we are going to loop over.  The array is a list of dictionaries with or without a base64 encoded string. \n\nWe pass this into the sub-playbook to loop over, decode the string and return the original and decoded value. \n\nIndividual steps in the playbook may have additional details. "
tags:
- training
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 09462464-7aee-49ff-8fd4-ff8e9520b22d
    type: start
    task:
      id: 09462464-7aee-49ff-8fd4-ff8e9520b22d
      version: -1
      name: ""
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "2"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": -160
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "1":
    id: "1"
    taskid: 53506c64-d9ce-46b2-8adc-c28c000e00a8
    type: regular
    task:
      id: 53506c64-d9ce-46b2-8adc-c28c000e00a8
      version: -1
      name: Set Data for Loop
      description: |-
        Set a value in context under the key you entered.

        In this step we are setting an array to loop over into context, however typically this array would come from other playbook commands.  However for training purposes this is self contained.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
    scriptarguments:
      key:
        simple: Data
      stringify:
        simple: "false"
      value:
        simple: |-
          [
              {
                  "Base64":"aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQo=",
                  "OtherKey":1
              },
              {
                  "OtherKey":2
              },
                  {
                  "Base64":"aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQo=",
                  "OtherKey":3
              }
          ]
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 370
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "2":
    id: "2"
    taskid: 4993842f-359a-40fc-8b5d-176daf5ed7ed
    type: regular
    task:
      id: 4993842f-359a-40fc-8b5d-176daf5ed7ed
      version: -1
      name: Delete Context
      description: "Delete field from context\n\nThis deletes our context, allowing us to re-run the playbook for testing purposes.   "
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 5
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "4":
    id: "4"
    taskid: c7d1f8d0-40d1-4c42-8843-3dbd59016526
    type: regular
    task:
      id: c7d1f8d0-40d1-4c42-8843-3dbd59016526
      version: -1
      name: Print decoded data outputted from sub-playbook
      description: "Prints text to war room (Markdown supported)\n\nThis simply prints the decoded base64 data from the sub-playbook output, proving our loop worked. "
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "5"
    scriptarguments:
      value:
        complex:
          root: LoopData
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 895
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "5":
    id: "5"
    taskid: bb2b17ac-a9b3-4b20-867e-639974597c73
    type: title
    task:
      id: bb2b17ac-a9b3-4b20-867e-639974597c73
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
      description: ''
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "6":
    id: "6"
    taskid: 2eb45514-1e74-4513-8712-53275d252ef0
    type: playbook
    task:
      id: 2eb45514-1e74-4513-8712-53275d252ef0
      version: -1
      name: XSOAR Engineer Training - For Each Loops (Sub-Playbook)
      playbookName: XSOAR Engineer Training - For Each Loops (Sub-Playbook)
      type: playbook
      iscommand: false
      brand: ""
      description: ''
    nexttasks:
      '#none#':
      - "4"
    scriptarguments:
      data:
        complex:
          root: Data
    separatecontext: true
    continueonerrortype: ""
    loop:
      iscommand: false
      exitCondition: ""
      wait: 1
      max: 100
      forEach: true
    view: |-
      {
        "position": {
          "x": 50,
          "y": 720
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "7":
    id: "7"
    taskid: 1bfb50d6-ed68-42e7-8727-5cbdfd2424ca
    type: regular
    task:
      id: 1bfb50d6-ed68-42e7-8727-5cbdfd2424ca
      version: -1
      name: Pause
      description: "Complete to continue, you can verify the data was set into Context by checking the context in the top right of the Incident, the drop down next to actions. \n\nThere should be a key called 'Data' with our array. \n\nWill  pass this array into the next task which is our sub-playbook that will loop over the data. "
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "6"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 545
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "8":
    id: "8"
    taskid: c3502f45-150d-427e-8164-e84c942c7e25
    type: regular
    task:
      id: c3502f45-150d-427e-8164-e84c942c7e25
      version: -1
      name: Print Playbook Overview
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    scriptarguments:
      value:
        simple: "## XSOAR Engineer Training - For Each Loops (Parent)\n\nThis playbook demonstrates sub-playbook looping using a for each method.  \n\nWe start by setting an array to a context key that we are going to loop over.  The array is a list of dictionaries with or without a base64 encoded string. \n\nWe pass this into the sub-playbook to loop over, decode the string and return the original and decoded value. \n\nIndividual steps in the playbook may have additional details. "
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 180
        }
      }
    note: true
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 1295,
        "width": 380,
        "x": 50,
        "y": -160
      }
    }
  }
inputs: []
outputs: []
fromversion: 6.8.0
tests:
- No tests (auto formatted)
