id: 5722f25e-5b7a-4d43-8681-3fc7a26e6bda
version: 24
vcShouldKeepItemLegacyProdMachine: false
name: xMatters - Trigger and Wait
description: Example of using the xm-trigger-workflow command
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 9216d95f-c83d-49b4-8ccd-192a09c9ee22
    type: start
    task:
      id: 9216d95f-c83d-49b4-8ccd-192a09c9ee22
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 50
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "1":
    id: "1"
    taskid: f9487943-2aa6-44a8-8884-683348dee91e
    type: playbook
    task:
      id: f9487943-2aa6-44a8-8884-683348dee91e
      version: -1
      name: xMatters - Wait for Response
      description: Trigger an xMatters workflow to notify a user for a response.
      playbookName: xMatters - Wait for Response
      type: playbook
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      body:
        simple: ${inputs.body}
      incident_id:
        simple: ${incident.id}
      recipients:
        simple: ${inputs.recipients}
      subject:
        simple: ${inputs.subject}
    separatecontext: true
    loop:
      iscommand: false
      exitCondition: ""
      wait: 1
      max: 100
    view: |-
      {
        "position": {
          "x": 50,
          "y": 195
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "2":
    id: "2"
    taskid: 63d18430-8b14-4cbd-8fe9-6bccfae83c65
    type: title
    task:
      id: 63d18430-8b14-4cbd-8fe9-6bccfae83c65
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 480
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
  "3":
    id: "3"
    taskid: f05c8ad8-45fb-4742-8238-e1bd905e6570
    type: regular
    task:
      id: f05c8ad8-45fb-4742-8238-e1bd905e6570
      version: -1
      name: Print
      description: Prints text to war room (Markdown supported)
      scriptName: Print
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      value:
        simple: ${xMatters.UserResponse}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 360
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 495,
        "width": 380,
        "x": 50,
        "y": 50
      }
    }
  }
inputs:
- key: recipients
  value:
    simple: ${incident.owner}
  required: false
  description: Recipients of the xMatters Message
  playbookInputQuery: null
- key: subject
  value:
    simple: ${incident.name}
  required: false
  description: Subject of the xMatters Message
  playbookInputQuery: null
- key: body
  value:
    simple: ${incident.details}
  required: false
  description: Body of the xMatters Message
  playbookInputQuery: null
- key: incident_id
  value:
    simple: ${incident.id}
  required: false
  description: The related incident id
  playbookInputQuery: null
outputs:
- contextPath: xMatters.UserResponse
  description: The user's response
  type: string
