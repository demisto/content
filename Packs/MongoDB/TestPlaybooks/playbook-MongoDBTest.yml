id: MongoDB - Test
version: -1
name: MongoDB - Test
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 21c7528d-dd6a-4ec4-8008-ac09f3d5ecbe
    type: start
    task:
      id: 21c7528d-dd6a-4ec4-8008-ac09f3d5ecbe
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 50
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "1":
    id: "1"
    taskid: 10a3412d-b19f-48c8-8837-889288664047
    type: regular
    task:
      id: 10a3412d-b19f-48c8-8837-889288664047
      version: -1
      name: DeleteContext
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "33"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 340
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "2":
    id: "2"
    taskid: a1b6233c-0156-4068-8309-e73ad080241b
    type: regular
    task:
      id: a1b6233c-0156-4068-8309-e73ad080241b
      version: -1
      name: Lists all collections
      description: Lists all collections in database
      script: '|||mongodb-list-collections'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 690
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "3":
    id: "3"
    taskid: 5818ed48-cbd1-42ea-8b7a-3429b7f72d03
    type: condition
    task:
      id: 5818ed48-cbd1-42ea-8b7a-3429b7f72d03
      version: -1
      name: Is the collection exists?
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "5"
      "yes":
      - "4"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: MongoDB
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: MongoDB.Collection.Name
                      iscontext: true
                    right:
                      value:
                        simple: GeneratedUUID
                      iscontext: true
                accessor: Collection.Name
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 865
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "4":
    id: "4"
    taskid: 84a0c855-41c3-4cfb-8500-a502923f54f3
    type: regular
    task:
      id: 84a0c855-41c3-4cfb-8500-a502923f54f3
      version: -1
      name: Drop it
      description: Drops a collection from the database
      script: '|||mongodb-drop-collection'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "5"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1237.5,
          "y": 1040
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "5":
    id: "5"
    taskid: 2012cd59-6fef-4f8d-85c3-7deb30a0a5c4
    type: regular
    task:
      id: 2012cd59-6fef-4f8d-85c3-7deb30a0a5c4
      version: -1
      name: Create a collection
      description: Creates a collection
      script: '|||mongodb-create-collection'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "6"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 1215
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "6":
    id: "6"
    taskid: 768361ed-9a8c-49d9-8917-6627344cf29e
    type: regular
    task:
      id: 768361ed-9a8c-49d9-8917-6627344cf29e
      version: -1
      name: List all collections
      description: Lists all collections in database
      script: '|||mongodb-list-collections'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 1390
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "7":
    id: "7"
    taskid: 0700312e-5fe0-41be-8e81-c41bb7c4109c
    type: title
    task:
      id: 0700312e-5fe0-41be-8e81-c41bb7c4109c
      version: -1
      name: Prepare environment
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 195
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "8":
    id: "8"
    taskid: 0cb18cb7-2c39-4767-894f-06c95fd47ed5
    type: condition
    task:
      id: 0cb18cb7-2c39-4767-894f-06c95fd47ed5
      version: -1
      name: Is collection exists?
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "14"
      "yes":
      - "9"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: MongoDB
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: MongoDB.Collection.Name
                      iscontext: true
                    right:
                      value:
                        simple: GeneratedUUID
                      iscontext: true
                accessor: Collection.Name
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 1565
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "9":
    id: "9"
    taskid: 7ce7f1ff-7313-4fab-8e03-6c8c1fe7f2f1
    type: regular
    task:
      id: 7ce7f1ff-7313-4fab-8e03-6c8c1fe7f2f1
      version: -1
      name: Insert an entry
      description: Inserts an entry to the database
      script: '|||mongodb-insert'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "15"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      entry:
        simple: '{"test" : "i am test", "field2": "i am a second field"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 1740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "10":
    id: "10"
    taskid: ddef721b-df3f-42bf-8853-725019f196b0
    type: regular
    task:
      id: ddef721b-df3f-42bf-8853-725019f196b0
      version: -1
      name: Get entry by ID
      description: Get an entry from database by ID
      script: '|||mongodb-get-entry-by-id'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "11"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      object_id:
        complex:
          root: MongoDB
          accessor: Entry._id
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "11":
    id: "11"
    taskid: 5f7c0f14-47a5-41d9-8966-d75a12e94c48
    type: condition
    task:
      id: 5f7c0f14-47a5-41d9-8966-d75a12e94c48
      version: -1
      name: Verify context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "13"
      "yes":
      - "12"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: MongoDB
                accessor: Entry.test
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2265
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "12":
    id: "12"
    taskid: 30e3dab1-67b3-40ed-8a58-a49efc771ddc
    type: regular
    task:
      id: 30e3dab1-67b3-40ed-8a58-a49efc771ddc
      version: -1
      name: Delete context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "17"
    scriptarguments:
      all:
        simple: "no"
      key:
        simple: MongoDB.Entry
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2440
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "13":
    id: "13"
    taskid: 37807b2c-a9bb-443c-869e-cb1f97816aba
    type: regular
    task:
      id: 37807b2c-a9bb-443c-869e-cb1f97816aba
      version: -1
      name: raise error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: Could not get entry from the Mongo server
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 2440
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "14":
    id: "14"
    taskid: f17e268f-a169-401c-8897-7bbd0b305b46
    type: regular
    task:
      id: f17e268f-a169-401c-8897-7bbd0b305b46
      version: -1
      name: Raise Error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: Could not find created collection
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "15":
    id: "15"
    taskid: 5b695ff7-d1df-481e-851f-6753d4a4d2fa
    type: condition
    task:
      id: 5b695ff7-d1df-481e-851f-6753d4a4d2fa
      version: -1
      name: Verify context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "16"
      "yes":
      - "10"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: MongoDB
                accessor: Entry._id
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "16":
    id: "16"
    taskid: 354364be-9a16-40aa-8626-d7055b13e319
    type: regular
    task:
      id: 354364be-9a16-40aa-8626-d7055b13e319
      version: -1
      name: raise error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: Could not find inserted entry
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "17":
    id: "17"
    taskid: 87cdc97d-fb14-4018-8e96-aba0bf7a21ae
    type: regular
    task:
      id: 87cdc97d-fb14-4018-8e96-aba0bf7a21ae
      version: -1
      name: Send query
      description: Searches items by query
      script: '|||mongodb-query'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "18"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      fields:
        simple: test
      query:
        simple: '{"test" : "i am test"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2615
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "18":
    id: "18"
    taskid: 3d9f3066-4024-4a1a-8fe3-3ff66e29a317
    type: condition
    task:
      id: 3d9f3066-4024-4a1a-8fe3-3ff66e29a317
      version: -1
      name: Verify Context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "19"
      "yes":
      - "20"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: MongoDB
                accessor: Entry._id
            iscontext: true
      - - operator: isNotExists
          left:
            value:
              simple: ${MongoDB.Entry.field2}
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2790
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "19":
    id: "19"
    taskid: 38745654-bf16-4240-8832-ff3c8d742d87
    type: regular
    task:
      id: 38745654-bf16-4240-8832-ff3c8d742d87
      version: -1
      name: raise error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: Could not find queried entry
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 2965
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "20":
    id: "20"
    taskid: c86cf2cf-fc5b-488a-8e2e-4335fe2848c0
    type: regular
    task:
      id: c86cf2cf-fc5b-488a-8e2e-4335fe2848c0
      version: -1
      name: Update entry
      description: Updates an entry in a collection
      script: '|||mongodb-update'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "21"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      filter:
        simple: '{"test" : "i am test"}'
      update:
        simple: '{"$set": {"test": "still a test"}}'
      upsert:
        simple: "true"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2965
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "21":
    id: "21"
    taskid: b38445ad-9dd6-4d99-8c92-40a9a9faa2dd
    type: regular
    task:
      id: b38445ad-9dd6-4d99-8c92-40a9a9faa2dd
      version: -1
      name: Query updated entry
      description: Searches items by query
      script: '|||mongodb-query'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "22"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      query:
        simple: '{"test": "still a test"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3140
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "22":
    id: "22"
    taskid: 811017e5-cd31-4790-8540-0c5e5ed2b5ab
    type: condition
    task:
      id: 811017e5-cd31-4790-8540-0c5e5ed2b5ab
      version: -1
      name: Verify Context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "23"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              complex:
                root: MongoDB
                filters:
                - - operator: isEqualString
                    left:
                      value:
                        simple: MongoDB.Entry.test
                      iscontext: true
                    right:
                      value:
                        simple: still a test
                accessor: Entry._id
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3315
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "23":
    id: "23"
    taskid: 1d3e244c-70f9-4db8-860d-2e69c9cb627a
    type: regular
    task:
      id: 1d3e244c-70f9-4db8-860d-2e69c9cb627a
      version: -1
      name: Delete entry
      description: Deletes an entry from the database
      script: '|||mongodb-delete'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "24"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      filter:
        simple: '{"test": "still a test"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3490
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "24":
    id: "24"
    taskid: 73ff027c-08f0-4ee3-8623-83e9b44d6d29
    type: regular
    task:
      id: 73ff027c-08f0-4ee3-8623-83e9b44d6d29
      version: -1
      name: Delete Context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "25"
    scriptarguments:
      all:
        simple: "no"
      key:
        simple: MongoDB.Entry
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3665
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "25":
    id: "25"
    taskid: 5bba6428-35b5-40d8-8562-e842bd27f826
    type: regular
    task:
      id: 5bba6428-35b5-40d8-8562-e842bd27f826
      version: -1
      name: Query for all data
      description: Searches items by query
      script: '|||mongodb-query'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "26"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      query:
        simple: '{}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3840
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "26":
    id: "26"
    taskid: 5fc3e033-eb5e-40e4-81b8-faecea629201
    type: condition
    task:
      id: 5fc3e033-eb5e-40e4-81b8-faecea629201
      version: -1
      name: Verify Context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "35"
      "yes":
      - "34"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEmpty
          left:
            value:
              complex:
                root: MongoDB
                accessor: Entry._id
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 4015
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "27":
    id: "27"
    taskid: be4aa9b2-02ad-4500-89a7-c7f56d626400
    type: regular
    task:
      id: be4aa9b2-02ad-4500-89a7-c7f56d626400
      version: -1
      name: Delete collection
      description: Drops a collection from the database
      script: '|||mongodb-drop-collection'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6870
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "31":
    id: "31"
    taskid: 428e101b-90e0-4b88-8b9f-380a6757a24c
    type: title
    task:
      id: 428e101b-90e0-4b88-8b9f-380a6757a24c
      version: -1
      name: FIN
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 7045
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "33":
    id: "33"
    taskid: 4dc2aea9-d8a9-499e-8f2b-9580d6bb5237
    type: regular
    task:
      id: 4dc2aea9-d8a9-499e-8f2b-9580d6bb5237
      version: -1
      name: Generate UUID as a new collection
      description: Generates random UUID
      scriptName: GenerateUUID
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 1125,
          "y": 515
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "34":
    id: "34"
    taskid: 9b29d635-b309-427f-8ee7-01054fe0b5a4
    type: regular
    task:
      id: 9b29d635-b309-427f-8ee7-01054fe0b5a4
      version: -1
      name: Delete Context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "42"
    scriptarguments:
      all:
        simple: "no"
      key:
        simple: MongoDB.Entry
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4190
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "35":
    id: "35"
    taskid: 57e129a1-170c-4f81-861f-faa9bde8ac20
    type: regular
    task:
      id: 57e129a1-170c-4f81-861f-faa9bde8ac20
      version: -1
      name: raise error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: Could not get any data from MongoDB
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 4190
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "36":
    id: "36"
    taskid: e22cbd81-049a-402d-83f5-53d099255ee6
    type: title
    task:
      id: e22cbd81-049a-402d-83f5-53d099255ee6
      version: -1
      name: Test Datetime
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "37"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 5910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "37":
    id: "37"
    taskid: e07fe9ac-6dd5-4226-80e6-f3da206cf35b
    type: regular
    task:
      id: e07fe9ac-6dd5-4226-80e6-f3da206cf35b
      version: -1
      name: Insert Datetime object
      description: Inserts an entry to the database.
      script: '|||mongodb-insert'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "38"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      entry:
        simple: '{"date": "ISODate(''2020-06-12T08:23:07.000Z'')"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6055
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "38":
    id: "38"
    taskid: 148cc3db-2093-41ab-8697-a9afe567bdb2
    type: title
    task:
      id: 148cc3db-2093-41ab-8697-a9afe567bdb2
      version: -1
      name: No error has raised
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "39"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6230
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "39":
    id: "39"
    taskid: 3af06e6d-40b9-4e83-8ca1-7c58a86f36e8
    type: regular
    task:
      id: 3af06e6d-40b9-4e83-8ca1-7c58a86f36e8
      version: -1
      name: Query Datetime object
      description: Searches for items by the specified JSON query.
      script: '|||mongodb-query'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "40"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      query:
        simple: '{"date": "2020-06-12T08:23:07.000Z"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6375
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "40":
    id: "40"
    taskid: 06c96084-cfc7-4999-8ca0-949a755f4da6
    type: condition
    task:
      id: 06c96084-cfc7-4999-8ca0-949a755f4da6
      version: -1
      name: Verify Context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "41"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              complex:
                root: MongoDB
                accessor: Entry.date
            iscontext: true
          right:
            value:
              simple: "2020-06-12T08:23:07.000Z"
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6550
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "41":
    id: "41"
    taskid: 803ab3c4-ac20-4f50-8e7a-9d247b5f2a3b
    type: title
    task:
      id: 803ab3c4-ac20-4f50-8e7a-9d247b5f2a3b
      version: -1
      name: Tear down
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "27"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6725
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "42":
    id: "42"
    taskid: d15df95f-31d1-418e-8be5-c5498a5a1eeb
    type: title
    task:
      id: d15df95f-31d1-418e-8be5-c5498a5a1eeb
      version: -1
      name: Bulk Update
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "47"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4365
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "43":
    id: "43"
    taskid: 46004911-760b-48c6-8704-1e3a3a0c0a53
    type: regular
    task:
      id: 46004911-760b-48c6-8704-1e3a3a0c0a53
      version: -1
      name: Bulk update with upsert
      description: Bulk updates entries in a collection.
      script: '|||mongodb-bulk-update'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "50"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      filter:
        complex:
          root: filter
      update:
        complex:
          root: update
      update_one:
        simple: "true"
      upsert:
        simple: "true"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4860
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "44":
    id: "44"
    taskid: f35d50bc-d443-4da4-8664-15d81e6f449c
    type: regular
    task:
      id: f35d50bc-d443-4da4-8664-15d81e6f449c
      version: -1
      name: Delete entry
      description: Deletes an entry from the database.
      script: '|||mongodb-delete'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "46"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      delete_one:
        simple: "true"
      filter:
        simple: '{"Name": "test2"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 5560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "45":
    id: "45"
    taskid: 3f68fb1e-e7f1-407d-8685-5b7fdf79bee0
    type: regular
    task:
      id: 3f68fb1e-e7f1-407d-8685-5b7fdf79bee0
      version: -1
      name: Delete entry
      description: Deletes an entry from the database.
      script: '|||mongodb-delete'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "46"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      delete_one:
        simple: "true"
      filter:
        simple: '{"Name": "test1"}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "46":
    id: "46"
    taskid: cb1e9160-d587-4b77-838a-dc8e813bd7b4
    type: regular
    task:
      id: cb1e9160-d587-4b77-838a-dc8e813bd7b4
      version: -1
      name: Delete Context
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        https://docs.paloaltonetworks.com/cortex/cortex-xsoar/6-2/cortex-xsoar-admin/playbooks/automations.html
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "36"
    scriptarguments:
      all:
        simple: "yes"
      keysToKeep:
        simple: GeneratedUUID
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 5735
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "47":
    id: "47"
    taskid: f29749af-da76-435c-84d8-b02d5aced2e5
    type: regular
    task:
      id: f29749af-da76-435c-84d8-b02d5aced2e5
      version: -1
      name: Set filter value in context
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      key:
        simple: filter
      value:
        simple: '[{"Name": "test1"},{"Name": "test2"}]'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4510
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "48":
    id: "48"
    taskid: 87b6f814-7914-4ca5-8ffc-618c233cd1ed
    type: regular
    task:
      id: 87b6f814-7914-4ca5-8ffc-618c233cd1ed
      version: -1
      name: Set update value in context
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "43"
    scriptarguments:
      key:
        simple: update
      value:
        simple: '[{"$set": {"test": true}},{"$set": {"test": true}}]'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4685
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "50":
    id: "50"
    taskid: b362fa6d-97f5-40d8-8292-3768f01534ff
    type: regular
    task:
      id: b362fa6d-97f5-40d8-8292-3768f01534ff
      version: -1
      name: Query inserted entries
      description: Searches for items by using the specified JSON query. Search by
        regex is supported.
      script: '|||mongodb-query'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "51"
    scriptarguments:
      collection:
        complex:
          root: GeneratedUUID
      query:
        simple: '{"test": true}'
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5035
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "51":
    id: "51"
    taskid: aa31027a-0b5f-4e9a-8489-dde7f4830f89
    type: condition
    task:
      id: aa31027a-0b5f-4e9a-8489-dde7f4830f89
      version: -1
      name: Verify inserted entries
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "53"
      "yes":
      - "52"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: containsGeneral
          left:
            value:
              complex:
                root: MongoDB.Entry.[0]
                accessor: Name
            iscontext: true
          right:
            value:
              simple: test
      - - operator: containsGeneral
          left:
            value:
              complex:
                root: MongoDB.Entry.[1]
                accessor: Name
            iscontext: true
          right:
            value:
              simple: test
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5210
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "52":
    id: "52"
    taskid: 08378923-2ace-4369-8a81-23c1856e87a0
    type: title
    task:
      id: 08378923-2ace-4369-8a81-23c1856e87a0
      version: -1
      name: Delte entries
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "45"
      - "44"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 5400
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "53":
    id: "53"
    taskid: f13ae015-948b-4172-8d05-36244daea444
    type: regular
    task:
      id: f13ae015-948b-4172-8d05-36244daea444
      version: -1
      name: Raise error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: Could not validated inserted entries
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 5385
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 7060,
        "width": 1670,
        "x": 50,
        "y": 50
      }
    }
  }
inputs: []
outputs: []
fromversion: 5.0.0
description: ''
