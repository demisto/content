id: AWS - IAM Test Playbook
version: -1
vcShouldKeepItemLegacyProdMachine: false
name: AWS - IAM Test Playbook
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 09640e7a-a450-44e4-8ade-3fb7823f2058
    type: start
    task:
      id: 09640e7a-a450-44e4-8ade-3fb7823f2058
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "95"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": -90
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "3":
    id: "3"
    taskid: 74bfe2e2-635c-487a-819c-900872f18e90
    type: regular
    task:
      id: 74bfe2e2-635c-487a-819c-900872f18e90
      version: -1
      name: aws-iam-list-users
      description: Lists the IAM users, returns all users in the AWS account.
      script: AWS - IAM|||aws-iam-list-users
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "64"
      - "65"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5785
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "7":
    id: "7"
    taskid: 20114031-c205-4522-8781-19edc290038f
    type: regular
    task:
      id: 20114031-c205-4522-8781-19edc290038f
      version: -1
      name: aws-iam-create-group
      description: Creates a new iam group.
      script: AWS - IAM|||aws-iam-create-group
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "68"
      - "69"
    scriptarguments:
      groupName:
        simple: test_group_${TimeNowUnix}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 6135
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "8":
    id: "8"
    taskid: 538231da-4cc7-4d21-804e-6f2ed20a0464
    type: regular
    task:
      id: 538231da-4cc7-4d21-804e-6f2ed20a0464
      version: -1
      name: aws-iam-list-groups
      description: Lists all the IAM groups in the AWS account
      script: AWS - IAM|||aws-iam-list-groups
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "70"
      - "71"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 6475
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "14":
    id: "14"
    taskid: 764d6ba7-950b-41bf-80dc-313b289bdc40
    type: regular
    task:
      id: 764d6ba7-950b-41bf-80dc-313b289bdc40
      version: -1
      name: aws-iam-list-policies
      description: Lists all the managed policies that are available in your AWS account,
        including your own customer-defined managed policies and all AWS managed policies.
      script: AWS - IAM|||aws-iam-list-policies
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "35"
      - "36"
      - "37"
    scriptarguments:
      scope:
        simple: AWS
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 895
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "15":
    id: "15"
    taskid: eb4c0e9c-65f6-486e-8f5d-21912a7c0c95
    type: regular
    task:
      id: eb4c0e9c-65f6-486e-8f5d-21912a7c0c95
      version: -1
      name: aws-iam-list-roles
      description: Lists all IAM roles
      script: AWS - IAM|||aws-iam-list-roles
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "55"
      - "56"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4755
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "19":
    id: "19"
    taskid: f72bae99-7b75-4e8c-8b32-04fac427926b
    type: regular
    task:
      id: f72bae99-7b75-4e8c-8b32-04fac427926b
      version: -1
      name: aws-iam-delete-group
      description: Deletes the specified IAM group. The group must not contain any
        users or have any attached policies.
      script: AWS - IAM|||aws-iam-delete-group
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "90"
    scriptarguments:
      groupName:
        simple: test_group_${TimeNowUnix}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 7035
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "23":
    id: "23"
    taskid: a8751f08-8ca2-4314-825f-166f68cf43e3
    type: regular
    task:
      id: a8751f08-8ca2-4314-825f-166f68cf43e3
      version: -1
      name: aws-iam-create-instance-profile
      description: Creates a new instance profile.
      script: AWS - IAM|||aws-iam-create-instance-profile
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "42"
      - "41"
    scriptarguments:
      instanceProfileName:
        simple: ${TestPBProfileName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1595
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "24":
    id: "24"
    taskid: c1e1f573-71e7-4356-8265-056771ad0075
    type: regular
    task:
      id: c1e1f573-71e7-4356-8265-056771ad0075
      version: -1
      name: aws-iam-delete-instance-profile
      description: Deletes the specified instance profile. The instance profile must
        not have an associated role.
      script: AWS - IAM|||aws-iam-delete-instance-profile
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "96"
    scriptarguments:
      instanceProfileName:
        simple: ${TestPBProfileName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 3520
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "25":
    id: "25"
    taskid: 8b02bbe1-0719-41aa-862a-c00f3e64fb0f
    type: regular
    task:
      id: 8b02bbe1-0719-41aa-862a-c00f3e64fb0f
      version: -1
      name: aws-iam-list-instance-profiles
      description: Lists all the instance profiles tin your AWS account.
      script: AWS - IAM|||aws-iam-list-instance-profiles
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "49"
      - "50"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2645
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "26":
    id: "26"
    taskid: 0d557d4e-c198-437c-888f-51d29e2b8a8e
    type: regular
    task:
      id: 0d557d4e-c198-437c-888f-51d29e2b8a8e
      version: -1
      name: aws-iam-add-role-to-instance-profile
      description: Adds the specified IAM role to the specified instance profile.
        An instance profile can contain only one role, and this limit cannot be increased.
        You can remove the existing role and then add a different role to an instance
        profile.
      script: AWS - IAM|||aws-iam-add-role-to-instance-profile
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "45"
      - "47"
    scriptarguments:
      instanceProfileName:
        simple: ${TestPBProfileName}
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2295
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "27":
    id: "27"
    taskid: 68ad5382-33ec-4e24-8698-cb1f3d5167f8
    type: regular
    task:
      id: 68ad5382-33ec-4e24-8698-cb1f3d5167f8
      version: -1
      name: aws-iam-remove-role-from-instance-profile
      description: Removes the specified IAM role from the specified EC2 instance
        profile.
      script: AWS - IAM|||aws-iam-remove-role-from-instance-profile
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "24"
    scriptarguments:
      instanceProfileName:
        simple: ${TestPBProfileName}
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 3345
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "28":
    id: "28"
    taskid: e4442717-56f2-427f-82ac-365f62587976
    type: regular
    task:
      id: e4442717-56f2-427f-82ac-365f62587976
      version: -1
      name: aws-iam-list-instance-profiles-for-role
      description: Lists the instance profiles that have the specified associated
        IAM role.
      script: AWS - IAM|||aws-iam-list-instance-profiles-for-role
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "51"
      - "52"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2995
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "29":
    id: "29"
    taskid: 71bf8dbc-82f9-4fb0-8de1-feb8e166b9aa
    type: regular
    task:
      id: 71bf8dbc-82f9-4fb0-8de1-feb8e166b9aa
      version: -1
      name: aws-iam-get-instance-profile
      description: Retrieves information about the specified instance profile.
      script: AWS - IAM|||aws-iam-get-instance-profile
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "43"
      - "44"
    scriptarguments:
      instanceProfileName:
        simple: ${TestPBProfileName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1945
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "30":
    id: "30"
    taskid: b6384b34-de88-4597-83d1-8ea2269d2da5
    type: regular
    task:
      id: b6384b34-de88-4597-83d1-8ea2269d2da5
      version: -1
      name: aws-iam-get-role
      description: Retrieves information about the specified role.
      script: AWS - IAM|||aws-iam-get-role
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "97"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 3865
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "31":
    id: "31"
    taskid: 24e338cc-277b-4b54-82fd-0e868a625e45
    type: regular
    task:
      id: 24e338cc-277b-4b54-82fd-0e868a625e45
      version: -1
      name: aws-iam-delete-role
      description: 'Deletes the specified role. The role must not have any policies
        attached. '
      script: AWS - IAM|||aws-iam-delete-role
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "79"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5260
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "32":
    id: "32"
    taskid: 645dd417-5a4d-4de6-8acf-ddbd13fa8f2e
    type: regular
    task:
      id: 645dd417-5a4d-4de6-8acf-ddbd13fa8f2e
      version: -1
      name: aws-iam-create-role
      description: Creates a new role for your AWS account.
      script: AWS - IAM|||aws-iam-create-role
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "40"
      - "39"
    scriptarguments:
      assumeRolePolicyDocument:
        simple: |-
          {
            "Version": "2012-10-17",
            "Statement": [
              {
                "Effect": "Allow",
                "Principal": {
                  "Service": "ec2.amazonaws.com"
                },
                "Action": "sts:AssumeRole"
              }
            ]
          }
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1245
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "35":
    id: "35"
    taskid: 89b36d02-158e-4f4c-8cab-c1a7e23df77a
    type: regular
    task:
      id: 89b36d02-158e-4f4c-8cab-c1a7e23df77a
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      path:
        simple: AWS.IAM.Policies.PolicyId
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "36":
    id: "36"
    taskid: 5995c242-8f7e-48f0-89a1-3fbf94ec7fba
    type: regular
    task:
      id: 5995c242-8f7e-48f0-89a1-3fbf94ec7fba
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      path:
        simple: AWS.IAM.Policies.PolicyName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 1070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "37":
    id: "37"
    taskid: 56d7f06d-fe85-4614-86de-302de14713e5
    type: regular
    task:
      id: 56d7f06d-fe85-4614-86de-302de14713e5
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      path:
        simple: AWS.IAM.Policies.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 910,
          "y": 1070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "39":
    id: "39"
    taskid: 5387fe1e-0cec-4837-8cfd-5e15665494d2
    type: regular
    task:
      id: 5387fe1e-0cec-4837-8cfd-5e15665494d2
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "23"
    scriptarguments:
      path:
        simple: AWS.IAM.Roles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 1420
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "40":
    id: "40"
    taskid: 18880cef-795b-4a84-8e49-c2c7f3fd2545
    type: regular
    task:
      id: 18880cef-795b-4a84-8e49-c2c7f3fd2545
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "23"
    scriptarguments:
      path:
        simple: AWS.IAM.Roles.RoleName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 1420
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "41":
    id: "41"
    taskid: 21e8de5a-1727-453e-8036-065130fdd479
    type: regular
    task:
      id: 21e8de5a-1727-453e-8036-065130fdd479
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 1770
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "42":
    id: "42"
    taskid: 62ea8e86-1324-440d-83fd-fb80669f9741
    type: regular
    task:
      id: 62ea8e86-1324-440d-83fd-fb80669f9741
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.InstanceProfileName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 1770
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "43":
    id: "43"
    taskid: e3d32f0c-e828-47eb-866e-e75be9357adc
    type: regular
    task:
      id: e3d32f0c-e828-47eb-866e-e75be9357adc
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "26"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.InstanceProfileName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 2120
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "44":
    id: "44"
    taskid: 6db916e8-1e2e-4498-8e4f-dd5054ef7379
    type: regular
    task:
      id: 6db916e8-1e2e-4498-8e4f-dd5054ef7379
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "26"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.InstanceProfileName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2120
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "45":
    id: "45"
    taskid: 2200e67e-b7c9-466f-8bc9-b99379dcc689
    type: regular
    task:
      id: 2200e67e-b7c9-466f-8bc9-b99379dcc689
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "25"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 2470
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "47":
    id: "47"
    taskid: c359c654-4c90-496d-86f7-7c75d3e3f68a
    type: regular
    task:
      id: c359c654-4c90-496d-86f7-7c75d3e3f68a
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "25"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.InstanceProfileName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2470
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "49":
    id: "49"
    taskid: dec410c8-1338-4c26-8b28-b8ea4a2e1df3
    type: regular
    task:
      id: dec410c8-1338-4c26-8b28-b8ea4a2e1df3
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "28"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 2820
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "50":
    id: "50"
    taskid: 5e86ffb0-6e85-4745-8841-a5c348928ab9
    type: regular
    task:
      id: 5e86ffb0-6e85-4745-8841-a5c348928ab9
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "28"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.Roles.CreateDate
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 2820
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "51":
    id: "51"
    taskid: 3f5d65aa-6b36-4c50-81c4-bfdd16414473
    type: regular
    task:
      id: 3f5d65aa-6b36-4c50-81c4-bfdd16414473
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "27"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 3170
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "52":
    id: "52"
    taskid: 0e774844-43c2-4ed4-89d8-7e17c9d1f8a8
    type: regular
    task:
      id: 0e774844-43c2-4ed4-89d8-7e17c9d1f8a8
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "27"
    scriptarguments:
      path:
        simple: AWS.IAM.InstanceProfiles.Roles.CreateDate
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 3170
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "55":
    id: "55"
    taskid: 91eecdbf-77d7-4982-8286-8ba6c5e82715
    type: regular
    task:
      id: 91eecdbf-77d7-4982-8286-8ba6c5e82715
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "76"
    scriptarguments:
      path:
        simple: AWS.IAM.Roles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 4910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "56":
    id: "56"
    taskid: 838fa690-23e7-432a-80e7-7df0354aa273
    type: regular
    task:
      id: 838fa690-23e7-432a-80e7-7df0354aa273
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "76"
    scriptarguments:
      path:
        simple: AWS.IAM.Roles.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 4910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "64":
    id: "64"
    taskid: 5bca68e2-1aeb-4eac-8512-5b5a1ccd0abf
    type: regular
    task:
      id: 5bca68e2-1aeb-4eac-8512-5b5a1ccd0abf
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
    scriptarguments:
      path:
        simple: AWS.IAM.Users.UserName
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 5960
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "65":
    id: "65"
    taskid: d175164e-e78a-4331-85de-b9ddd216c038
    type: regular
    task:
      id: d175164e-e78a-4331-85de-b9ddd216c038
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "7"
    scriptarguments:
      path:
        simple: AWS.IAM.Users.UserId
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 5960
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "68":
    id: "68"
    taskid: fd12fff1-a987-40bc-8b46-8bdeede1c2d4
    type: regular
    task:
      id: fd12fff1-a987-40bc-8b46-8bdeede1c2d4
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      path:
        simple: AWS.IAM.Groups.GroupId
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6310
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "69":
    id: "69"
    taskid: 7ba8f47d-87fd-46ce-83f8-2dd939214c18
    type: regular
    task:
      id: 7ba8f47d-87fd-46ce-83f8-2dd939214c18
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      path:
        simple: AWS.IAM.Groups.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 6310
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "70":
    id: "70"
    taskid: b4dbb274-676a-4f32-8983-73f6792968da
    type: regular
    task:
      id: b4dbb274-676a-4f32-8983-73f6792968da
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "94"
    scriptarguments:
      path:
        simple: AWS.IAM.Groups.Arn
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 265,
          "y": 6660
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "71":
    id: "71"
    taskid: ed26cae4-e0ec-4dc1-897e-28bb29810aca
    type: regular
    task:
      id: ed26cae4-e0ec-4dc1-897e-28bb29810aca
      version: -1
      name: VerifyContext
      description: |-
        Verifies path in context:
        - Verifies path existence
        - If matching object is an array: verify fields exists in each of the objects in the array
        - If matching object is not an array: verify fields exists in matching object
        - if 'expectedValue' is given: ensure that the given value is equal to the context path
      scriptName: VerifyContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "94"
    scriptarguments:
      path:
        simple: AWS.IAM.Groups.GroupId
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 695,
          "y": 6660
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "74":
    id: "74"
    taskid: ebfba128-e58b-49df-8d7e-44c0bb1fa3a1
    type: regular
    task:
      id: ebfba128-e58b-49df-8d7e-44c0bb1fa3a1
      version: -1
      name: Generate TestPlaybook Profile Name
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "78"
    scriptarguments:
      key:
        simple: TestPBProfileName
      value:
        simple: ${TimeNowUnix}-TestProfile
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 370
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "75":
    id: "75"
    taskid: c2e8b5eb-91c7-4529-88f5-be0e4e5db4fe
    type: regular
    task:
      id: c2e8b5eb-91c7-4529-88f5-be0e4e5db4fe
      version: -1
      name: Generate TestPlaybook Role Name
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "14"
    scriptarguments:
      key:
        simple: TestPBRoleName
      value:
        simple: ${TimeNowUnix}-TestRole
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 720
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "76":
    id: "76"
    taskid: 8542053e-b430-461f-81ba-3186a949a6db
    type: regular
    task:
      id: 8542053e-b430-461f-81ba-3186a949a6db
      version: -1
      name: List Role Policies
      description: Lists the names of the inline policies that are embedded in the
        specified IAM role.
      script: AWS - IAM|||aws-iam-list-role-policies
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5085
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "77":
    id: "77"
    taskid: 4c56b778-c7a3-4ada-8982-659da896d0a4
    type: regular
    task:
      id: 4c56b778-c7a3-4ada-8982-659da896d0a4
      version: -1
      name: GetTime
      description: |
        Retrieves the current date and time.
      scriptName: GetTime
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "74"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 205
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "78":
    id: "78"
    taskid: fc80cbf0-677f-44e3-81fd-089f10b052b8
    type: regular
    task:
      id: fc80cbf0-677f-44e3-81fd-089f10b052b8
      version: -1
      name: Generate TestPlaybook Profile Name
      description: Set a value in context under the key you entered.
      scriptName: Set
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "75"
    scriptarguments:
      key:
        simple: TestPBUserName
      value:
        simple: ${TimeNowUnix}-TestUser
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 545
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "79":
    id: "79"
    taskid: 16eead7c-4cba-4e5a-8e53-05288e5537b0
    type: regular
    task:
      id: 16eead7c-4cba-4e5a-8e53-05288e5537b0
      version: -1
      name: aws-iam-get-role-policy
      description: Retrieves the specified inline policy document that is embedded
        with the specified IAM role.
      script: AWS - IAM|||aws-iam-get-role-policy
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "80"
    scriptarguments:
      policyName:
        simple: c7n-IAM-Access
      roleName:
        simple: c7nSecurityAuditRole
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5435
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "80":
    id: "80"
    taskid: e3f214a1-45f4-41a0-8fe3-51399b93bb96
    type: regular
    task:
      id: e3f214a1-45f4-41a0-8fe3-51399b93bb96
      version: -1
      name: aws-iam-list-role-policies
      description: Lists the names of the inline policies that are embedded in the
        specified IAM role.
      script: AWS - IAM|||aws-iam-list-role-policies
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      roleName:
        simple: c7nSecurityAuditRole
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 5610
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "89":
    id: "89"
    taskid: e403d29d-21a8-49db-81f1-68e7e3427521
    type: title
    task:
      id: e403d29d-21a8-49db-81f1-68e7e3427521
      version: -1
      name: Test Done
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 7610
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "90":
    id: "90"
    taskid: d63e2884-d306-46ef-810d-89b03dc51637
    type: regular
    task:
      id: d63e2884-d306-46ef-810d-89b03dc51637
      version: -1
      name: aws-iam-list-user-policies
      script: AWS - IAM|||aws-iam-list-user-policies
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "92"
    scriptarguments:
      userName:
        complex:
          root: AWS.IAM.Users
          accessor: UserName
          transformers:
          - operator: FirstArrayElement
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 7220
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "92":
    id: "92"
    taskid: 51539536-d4a0-4c8b-8fb2-93a4eaa46525
    type: regular
    task:
      id: 51539536-d4a0-4c8b-8fb2-93a4eaa46525
      version: -1
      name: aws-iam-list-attached-user-policies
      script: AWS - IAM|||aws-iam-list-attached-user-policies
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "89"
    scriptarguments:
      userName:
        complex:
          root: AWS.IAM.Users
          accessor: UserName
          transformers:
          - operator: FirstArrayElement
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 7410
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "94":
    id: "94"
    taskid: 3b623dcf-ccba-4c65-80d8-47b2e420fc02
    type: regular
    task:
      id: 3b623dcf-ccba-4c65-80d8-47b2e420fc02
      version: -1
      name: aws-iam-list-attached-group-policies
      script: AWS - IAM|||aws-iam-list-attached-group-policies
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "19"
    scriptarguments:
      groupName:
        complex:
          root: AWS.IAM.Groups
          accessor: GroupName
          transformers:
          - operator: FirstArrayElement
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 6860
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "95":
    id: "95"
    taskid: 58382405-0de4-406b-880b-0eeb27f927fc
    type: regular
    task:
      id: 58382405-0de4-406b-880b-0eeb27f927fc
      version: -1
      name: DeleteContext
      description: |-
        Delete field from context.

        This automation runs using the default Limited User role, unless you explicitly change the permissions.
        For more information, see the section about permissions here:
        - For Cortex XSOAR 6 see https://docs-cortex.paloaltonetworks.com/r/Cortex-XSOAR/6.x/Cortex-XSOAR-Playbook-Design-Guide/Automations 
        - For Cortex XSOAR 8 Cloud see https://docs-cortex.paloaltonetworks.com/r/Cortex-XSOAR/8/Cortex-XSOAR-Cloud-Documentation/Create-a-script
        - For Cortex XSOAR 8.7 On-prem see https://docs-cortex.paloaltonetworks.com/r/Cortex-XSOAR/8.7/Cortex-XSOAR-On-prem-Documentation/Create-a-script
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "77"
    scriptarguments:
      all:
        simple: "yes"
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 40
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "96":
    id: "96"
    taskid: 3dabfd18-853d-4cfe-8541-47659694649f
    type: regular
    task:
      id: 3dabfd18-853d-4cfe-8541-47659694649f
      version: -1
      name: aws-iam-tag-role
      description: Adds one or more tags to an IAM role. The role can be a regular
        role or a service-linked role. If a tag with the same key name already exists,
        then that tag is overwritten with the new value.
      script: '|||aws-iam-tag-role'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "30"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
      tags:
        simple: Key1:Value1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 3690
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "97":
    id: "97"
    taskid: 3f414816-06df-4915-825f-cd30af29ff09
    type: condition
    task:
      id: 3f414816-06df-4915-825f-cd30af29ff09
      version: -1
      name: Verify Context
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "98"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isNotEmpty
          left:
            value:
              simple: AWS.IAM.Roles.RoleName
            iscontext: true
          right:
            value: {}
      - - operator: isExists
          left:
            value:
              simple: AWS.IAM.Roles.Arn
            iscontext: true
      - - operator: isEqualString
          left:
            value:
              simple: AWS.IAM.Roles.Tags.Key
            iscontext: true
          right:
            value:
              simple: Key1
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4030
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "98":
    id: "98"
    taskid: 897e9aa4-d10a-4de2-8cc4-158f3ad4e566
    type: regular
    task:
      id: 897e9aa4-d10a-4de2-8cc4-158f3ad4e566
      version: -1
      name: aws-iam-untag-role
      description: Removes the specified tags from the role.
      script: '|||aws-iam-untag-role'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "99"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
      tagKeys:
        simple: Key1
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4220
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "99":
    id: "99"
    taskid: 65f5cbc9-b75a-4211-8af1-984603e8f68e
    type: regular
    task:
      id: 65f5cbc9-b75a-4211-8af1-984603e8f68e
      version: -1
      name: aws-iam-get-role
      description: Retrieves information about the specified role.
      script: AWS - IAM|||aws-iam-get-role
      type: regular
      iscommand: true
      brand: AWS - IAM
    nexttasks:
      '#none#':
      - "100"
    scriptarguments:
      roleName:
        simple: ${TestPBRoleName}
    separatecontext: false
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4385
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
  "100":
    id: "100"
    taskid: c3acdebb-aa14-44fc-8b4c-a070116435eb
    type: condition
    task:
      id: c3acdebb-aa14-44fc-8b4c-a070116435eb
      version: -1
      name: Verify untag role
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "15"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEmpty
          left:
            value:
              simple: AWS.IAM.Roles.Tags
            iscontext: true
    continueonerrortype: ""
    view: |-
      {
        "position": {
          "x": 480,
          "y": 4560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
    skipunavailable: false
    quietmode: 0
    isoversize: false
    isautoswitchedtoquietmode: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 7765,
        "width": 1240,
        "x": 50,
        "y": -90
      }
    }
  }
inputs: []
outputs: []
fromversion: 5.0.0
description: ''
