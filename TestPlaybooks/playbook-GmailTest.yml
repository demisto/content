id: GmailTest
version: -1
name: GmailTest
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: e1ee503f-b7d9-46ed-80e1-f702d36f53f9
    type: start
    task:
      id: e1ee503f-b7d9-46ed-80e1-f702d36f53f9
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 50
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "1":
    id: "1"
    taskid: 822ade12-3997-4484-8c64-ee02eb2db726
    type: regular
    task:
      id: 822ade12-3997-4484-8c64-ee02eb2db726
      version: -1
      name: Start clean
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      all:
        simple: "yes"
      key: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 195
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "2":
    id: "2"
    taskid: 05f07878-00ed-4d87-8ca9-aad2d3a37e06
    type: regular
    task:
      id: 05f07878-00ed-4d87-8ca9-aad2d3a37e06
      version: -1
      name: List all users
      script: '|||gmail-list-users'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      custom-field-mask: {}
      customer: {}
      domain: {}
      event: {}
      max-results: {}
      projection: {}
      query: {}
      show-deleted: {}
      sort-order: {}
      token: {}
      view-type-public-domain: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 515
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "3":
    id: "3"
    taskid: 886267b2-a45f-4d46-819e-cbaf208cc06f
    type: regular
    task:
      id: 886267b2-a45f-4d46-819e-cbaf208cc06f
      version: -1
      name: Get specific user
      script: '|||gmail-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "52"
    scriptarguments:
      custom-field-mask: {}
      projection: {}
      user-id:
        complex:
          root: Account
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Account.UserName
                iscontext: true
              right:
                value:
                  simple: test
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
      view-type-public-domain: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 690
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "5":
    id: "5"
    taskid: ab9e9100-9ca4-4fad-8c0a-47125c085630
    type: regular
    task:
      id: ab9e9100-9ca4-4fad-8c0a-47125c085630
      version: -1
      name: Create new user
      script: '|||gmail-create-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "21"
    scriptarguments:
      email:
        simple: JohnS@demistodev.com
      family-name:
        simple: Smith
      first-name:
        simple: John
      password:
        simple: johnpass1!
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 865
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "6":
    id: "6"
    taskid: f7ff7dca-e883-4feb-875e-fe84ebcc746c
    type: regular
    task:
      id: f7ff7dca-e883-4feb-875e-fe84ebcc746c
      version: -1
      name: Delete User
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "13"
      - "26"
      - "7"
    scriptarguments:
      user-id:
        complex:
          root: Account
          filters:
          - - operator: startWith
              left:
                value:
                  simple: Account.Email.Address
                iscontext: true
              right:
                value:
                  simple: JohnS
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1390
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "7":
    id: "7"
    taskid: aa771e6f-a2ab-4616-8cdc-319ed14015c1
    type: title
    task:
      id: aa771e6f-a2ab-4616-8cdc-319ed14015c1
      version: -1
      name: Gmail Commands
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "9"
      - "16"
      - "18"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 705,
          "y": 1755
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "8":
    id: "8"
    taskid: 5eb90ef1-d04f-4a6a-8c01-ac0c278a36bc
    type: title
    task:
      id: 5eb90ef1-d04f-4a6a-8c01-ac0c278a36bc
      version: -1
      name: User Commands
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "52"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 370
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "9":
    id: "9"
    taskid: 6b2882b7-52ed-4819-84b5-0ab3f2015cc5
    type: regular
    task:
      id: 6b2882b7-52ed-4819-84b5-0ab3f2015cc5
      version: -1
      name: Search emails with attachments
      script: '|||gmail-search'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "10"
      - "14"
    scriptarguments:
      after: {}
      before: {}
      fields: {}
      filename: {}
      from: {}
      has-attachments:
        simple: "True"
      in: {}
      include-spam-trash: {}
      label: {}
      labels-ids: {}
      max-results:
        simple: "10"
      page-token: {}
      query: {}
      subject: {}
      to: {}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 60,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "10":
    id: "10"
    taskid: 7c2e2d79-7996-4cbf-8051-8097a1d7ee4c
    type: regular
    task:
      id: 7c2e2d79-7996-4cbf-8051-8097a1d7ee4c
      version: -1
      name: Get mail with attachment
      script: '|||gmail-get-attachments'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isNotEmpty
              left:
                value:
                  simple: Gmail.Attachments
                iscontext: true
          transformers:
          - operator: GetFirstObject
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "13":
    id: "13"
    taskid: 6a3e1704-1a53-4aae-8873-397e105cd332
    type: regular
    task:
      id: 6a3e1704-1a53-4aae-8873-397e105cd332
      version: -1
      name: Get Tokens
      script: '|||gmail-get-tokens-for-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "22"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1565
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "14":
    id: "14"
    taskid: 1d79bf9e-0a96-4524-8249-ae781f34f276
    type: regular
    task:
      id: 1d79bf9e-0a96-4524-8249-ae781f34f276
      version: -1
      name: Get Email data
      script: '|||gmail-get-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      format: {}
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
          - operator: GetFirstObject
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "16":
    id: "16"
    taskid: 14919bc2-8b22-4076-8247-8cc95d86a68c
    type: regular
    task:
      id: 14919bc2-8b22-4076-8247-8cc95d86a68c
      version: -1
      name: Search all mailboxes
      script: '|||gmail-search-all-mailboxes'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "17"
    scriptarguments:
      after:
        simple: 2018/1/20
      before:
        simple: 2018/1/30
      fields: {}
      filename: {}
      from: {}
      has-attachments: {}
      in: {}
      include-spam-trash: {}
      label: {}
      labels-ids: {}
      max-results:
        simple: "2"
      page-token: {}
      query: {}
      subject: {}
      to: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 920,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "17":
    id: "17"
    taskid: 37dcf8fc-834e-4300-8ad1-c693c2af6bbf
    type: regular
    task:
      id: 37dcf8fc-834e-4300-8ad1-c693c2af6bbf
      version: -1
      name: Get Thread
      script: '|||gmail-get-thread'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      format: {}
      thread-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ThreadId
          - operator: uniq
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 920,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "18":
    id: "18"
    taskid: 743eccb9-2f2a-400d-8943-e287be3fb4c6
    type: regular
    task:
      id: 743eccb9-2f2a-400d-8943-e287be3fb4c6
      version: -1
      name: Search in mailbox
      script: '|||gmail-search'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "19"
    scriptarguments:
      after: {}
      before: {}
      fields: {}
      filename: {}
      from: {}
      has-attachments: {}
      in:
        simple: INBOX
      include-spam-trash: {}
      labels-ids: {}
      max-results:
        simple: "1"
      page-token: {}
      query: {}
      subject: {}
      to: {}
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "19":
    id: "19"
    taskid: 2545abea-1be3-461b-8b91-c086de184694
    type: regular
    task:
      id: 2545abea-1be3-461b-8b91-c086de184694
      version: -1
      name: Move mail to other folder
      script: '|||gmail-move-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "20"
    scriptarguments:
      add-labels:
        simple: CATEGORY_SOCIAL
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: shai@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      remove-labels:
        simple: INBOX
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "20":
    id: "20"
    taskid: e5b64f22-0864-4ad5-8964-7cc803148b19
    type: regular
    task:
      id: e5b64f22-0864-4ad5-8964-7cc803148b19
      version: -1
      name: Move back to inbox
      script: '|||gmail-move-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "48"
    scriptarguments:
      add-labels:
        simple: INBOX
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: shai@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      remove-labels:
        simple: CATEGORY_SOCIAL
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2265
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "21":
    id: "21"
    taskid: 10bee013-4656-4618-8936-ffbcabc43c33
    type: regular
    task:
      id: 10bee013-4656-4618-8936-ffbcabc43c33
      version: -1
      name: block the admin
      script: '|||gmail-add-delete-filter'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "23"
    scriptarguments:
      email-address:
        complex:
          root: Account
          filters:
          - - operator: startWith
              left:
                value:
                  simple: Account.Email.Address
                iscontext: true
              right:
                value:
                  simple: JohnS
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
      user-id:
        simple: me
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1040
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "22":
    id: "22"
    taskid: 47028b5a-6c2e-4f81-85c4-74f27d2ef700
    type: title
    task:
      id: 47028b5a-6c2e-4f81-85c4-74f27d2ef700
      version: -1
      name: Check all mailboxes
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "16"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1755
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "23":
    id: "23"
    taskid: 9ff181da-f967-4b9d-883a-1ae04054727c
    type: regular
    task:
      id: 9ff181da-f967-4b9d-883a-1ae04054727c
      version: -1
      name: Remove the block
      script: '|||gmail-remove-filter'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "6"
    scriptarguments:
      filter_ids:
        complex:
          root: GmailFilter
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: GmailFilter.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      mailbox:
        complex:
          root: Gmail
          accessor: Filter.Mailbox
      user-id:
        simple: me
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1215
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "25":
    id: "25"
    taskid: 98d0ff82-75d8-426c-8c03-df63de1fc02d
    type: regular
    task:
      id: 98d0ff82-75d8-426c-8c03-df63de1fc02d
      version: -1
      name: List mailbox filters
      script: '|||gmail-list-filters'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "27"
    scriptarguments:
      address: {}
      limit:
        simple: "5"
      user-id:
        simple: test@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "26":
    id: "26"
    taskid: 9435d3a3-3728-4114-8439-b50ff6af37f3
    type: regular
    task:
      id: 9435d3a3-3728-4114-8439-b50ff6af37f3
      version: -1
      name: Delete filters from context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "25"
    scriptarguments:
      all: {}
      index: {}
      key:
        simple: GmailFilter
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1565
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "27":
    id: "27"
    taskid: 33cb1652-e69d-4d73-8e9e-16ebe35b9517
    type: condition
    task:
      id: 33cb1652-e69d-4d73-8e9e-16ebe35b9517
      version: -1
      name: Verify Filters
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "28"
      "yes":
      - "48"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              simple: GmailFilter
            iscontext: true
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "28":
    id: "28"
    taskid: edddb219-f5bf-4da0-893e-8579a7ae6f13
    type: regular
    task:
      id: edddb219-f5bf-4da0-893e-8579a7ae6f13
      version: -1
      name: Print Error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: No filters were found in test@demistodev.com mailbox
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "29":
    id: "29"
    taskid: 8d15f6eb-2890-475a-882d-1a74d47ff3ea
    type: title
    task:
      id: 8d15f6eb-2890-475a-882d-1a74d47ff3ea
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5720
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "30":
    id: "30"
    taskid: 5c5048ef-dcdc-4cb3-8694-69f5d4fe3e86
    type: regular
    task:
      id: 5c5048ef-dcdc-4cb3-8694-69f5d4fe3e86
      version: -1
      name: gmail-create-user
      description: Creates a user.
      script: '|||gmail-create-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      email:
        simple: user_to_delete@demistodev.com
      family-name:
        simple: Second
      first-name:
        simple: First
      password:
        simple: ${NEW_PASSWORD}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 2615
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "31":
    id: "31"
    taskid: 3e91072c-e624-4001-8678-4fb170996c04
    type: regular
    task:
      id: 3e91072c-e624-4001-8678-4fb170996c04
      version: -1
      name: gmail-hide-user-in-directory
      description: Hide a user in the Global Directory
      script: '|||gmail-hide-user-in-directory'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      user-id:
        simple: user_to_delete@demistodev.com
      visible-globally:
        simple: "False"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 2765
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "32":
    id: "32"
    taskid: c48e8771-ab49-457c-88bb-d649731e7eaf
    type: condition
    task:
      id: c48e8771-ab49-457c-88bb-d649731e7eaf
      version: -1
      name: Verify User creation and visbility
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "47"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Email.Address
            iscontext: true
          right:
            value:
              simple: user_to_delete@demistodev.com
      - - operator: isFalse
          left:
            value:
              simple: Account.VisibleInDirectory
            iscontext: true
    view: |-
      {
        "position": {
          "x": 860,
          "y": 2900
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "33":
    id: "33"
    taskid: e0ebdb5b-5300-4b44-8209-139e273363df
    type: regular
    task:
      id: e0ebdb5b-5300-4b44-8209-139e273363df
      version: -1
      name: gmail-delete-user
      description: Delete a User
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      user-id:
        simple: user_to_delete@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 860,
          "y": 3300
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "34":
    id: "34"
    taskid: d171f3da-a581-464b-8d46-755a2f3d8f20
    type: regular
    task:
      id: d171f3da-a581-464b-8d46-755a2f3d8f20
      version: -1
      name: gmail-get-autoreply
      description: Get the auto-reply message set for the user-account
      script: '|||gmail-get-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "35"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 3560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "35":
    id: "35"
    taskid: 055baf30-223e-4e42-8691-fb3d7234a9dc
    type: regular
    task:
      id: 055baf30-223e-4e42-8691-fb3d7234a9dc
      version: -1
      name: gmail-set-autoreply
      description: 'Set auto-reply for the user. Note: if body is not set, the current
        body will be deleted'
      script: '|||gmail-set-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "36"
    scriptarguments:
      enable-autoReply:
        simple: "true"
      response-body:
        simple: body_test
      response-subject:
        simple: subject_test
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 3740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "36":
    id: "36"
    taskid: 8ae887cf-cd18-47a7-82ce-362c0daf63a7
    type: regular
    task:
      id: 8ae887cf-cd18-47a7-82ce-362c0daf63a7
      version: -1
      name: gmail-get-autoreply
      description: Get the auto-reply message set for the user-account
      script: '|||gmail-get-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "37"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 3900
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "37":
    id: "37"
    taskid: a7e07a54-b7ae-462b-8e85-474e9d2f66c4
    type: condition
    task:
      id: a7e07a54-b7ae-462b-8e85-474e9d2f66c4
      version: -1
      name: Verify Autoreply
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "38"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: containsString
          left:
            value:
              simple: Account.Gmail.AutoReply.ResponseSubject
            iscontext: true
          right:
            value:
              simple: subject_test
      - - operator: containsString
          left:
            value:
              simple: Account.Gmail.AutoReply.ResponseBody
            iscontext: true
          right:
            value:
              simple: body_test
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4070
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "38":
    id: "38"
    taskid: ae60e120-76f7-4849-802d-d8e4765e0a2b
    type: regular
    task:
      id: ae60e120-76f7-4849-802d-d8e4765e0a2b
      version: -1
      name: gmail-set-autoreply - reset to original autoreply
      description: 'Set auto-reply for the user. Note: if body is not set, the current
        body will be deleted'
      script: '|||gmail-set-autoreply'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "50"
    scriptarguments:
      enable-autoReply:
        simple: "false"
      response-body:
        simple: ${Account.Gmail.AutoReply.ResponseBody}
      response-subject:
        simple: ${Account.Gmail.AutoReply.ResponseSubject}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4300
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "40":
    id: "40"
    taskid: 0516abdd-79dc-4e23-8626-14f1254f06bb
    type: regular
    task:
      id: 0516abdd-79dc-4e23-8626-14f1254f06bb
      version: -1
      name: gmail-get-mail
      description: Gets the specified message.
      script: '|||gmail-get-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "41"
    scriptarguments:
      format: {}
      message-id:
        simple: ${Gmail.SentMail.ID}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4720
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "41":
    id: "41"
    taskid: c513416f-3766-40cd-899c-a8a69928a4b9
    type: condition
    task:
      id: c513416f-3766-40cd-899c-a8a69928a4b9
      version: -1
      name: Verify sent mail
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "45"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: containsString
          left:
            value:
              simple: Gmail.To
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
      - - operator: containsString
          left:
            value:
              simple: Gmail.From
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.Subject
            iscontext: true
          right:
            value:
              simple: this is a test
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.Body
            iscontext: true
          right:
            value:
              simple: bla bla bla
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4910
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "43":
    id: "43"
    taskid: af658d1d-931c-4684-8075-1c38234ab188
    type: regular
    task:
      id: af658d1d-931c-4684-8075-1c38234ab188
      version: -1
      name: gmail-delegate-user-mailbox
      description: Adds a delegate to the mailbox, without sending any verification
        email. The delegate user must be a member of the same G Suite organization
        as the delegator user.  Note that a delegate user must be referred to by their
        primary email address, and not an email alias.
      script: '|||gmail-delegate-user-mailbox'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "49"
    scriptarguments:
      delegate-email:
        simple: shai@demistodev.com
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5340
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "45":
    id: "45"
    taskid: 76f0a670-7632-4fc8-8984-ad0a239f9cf8
    type: regular
    task:
      id: 76f0a670-7632-4fc8-8984-ad0a239f9cf8
      version: -1
      name: gmail-delete-mail
      description: Delete a mail in the user's mailbox.
      script: '|||gmail-delete-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "43"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Subject
                iscontext: true
              right:
                value:
                  simple: this is a test
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      permanent: {}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5140
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "47":
    id: "47"
    taskid: 3d942ee5-5a5e-4716-8ed5-d46db564f09b
    type: regular
    task:
      id: 3d942ee5-5a5e-4716-8ed5-d46db564f09b
      version: -1
      name: gmail-set-password
      description: Set password for the user
      script: '|||gmail-set-password'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "33"
    scriptarguments:
      password:
        simple: ${NEW_PASSWORD}
      user-id:
        simple: user_to_delete@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 860,
          "y": 3130
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "48":
    id: "48"
    taskid: f991bea6-655d-4570-8d24-09e0c21d162e
    type: regular
    task:
      id: f991bea6-655d-4570-8d24-09e0c21d162e
      version: -1
      name: DeleteContext
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "51"
    scriptarguments:
      all:
        simple: "yes"
      index: {}
      key: {}
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 830,
          "y": 2265
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "49":
    id: "49"
    taskid: 6d89901a-bfd7-45a8-8363-40c629e78167
    type: regular
    task:
      id: 6d89901a-bfd7-45a8-8363-40c629e78167
      version: -1
      name: gmail-remove-delegated-mailbox
      description: Removes a delegate from the mailbox, without sending any verification
        email. The delegate user must be a member of the same G Suite organization
        as the delegator user.  Note that a delegate user must be referred to by their
        primary email address, and not an email alias.
      script: '|||gmail-remove-delegated-mailbox'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      removed-mail:
        simple: shai@demistodev.com
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 5520
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "50":
    id: "50"
    taskid: 8aa048c3-a496-499b-8a6d-7c78e642ff5c
    type: regular
    task:
      id: 8aa048c3-a496-499b-8a6d-7c78e642ff5c
      version: -1
      name: send-mail
      description: Send an email
      script: '|||send-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "40"
    scriptarguments:
      additionalHeader: {}
      attachCIDs: {}
      attachIDs: {}
      attachNames: {}
      bcc: {}
      body:
        simple: bla bla bla
      cc: {}
      from: {}
      htmlBody: {}
      replyTo: {}
      subject:
        simple: this is a test
      templateParams: {}
      to:
        simple: admin@demistodev.com
      transientFile: {}
      transientFileCID: {}
      transientFileContent: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 850,
          "y": 4500
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "51":
    id: "51"
    taskid: 084256f7-0bda-4633-87a9-08f69436a9b7
    type: regular
    task:
      id: 084256f7-0bda-4633-87a9-08f69436a9b7
      version: -1
      name: GeneratePassword
      description: "This function generates a password and allows various parameters
        to customize the properties of the password depending on the use case (e.g.
        password complexity requirements).  The default behavior is to generate a
        password of  *random length* including all four character classes (upper,
        lower, digits, symbols) with at least five and at most ten characters per
        class. \n\nThe min_* values all default to 0. This means that if the command
        is executed in this way:\n!GeneratePassword max_lcase=10\nIt is possible that
        a password of length zero could be generated. It is therefore recommended
        to always include a min_* parameter that matches. \n\nThe debug parameter
        will print certain properties of the command into the WarRoom for easy diagnostics."
      scriptName: GeneratePassword
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "55"
    scriptarguments:
      debug: {}
      max_digits: {}
      max_lcase: {}
      max_symbols: {}
      max_ucase: {}
      min_digits:
        simple: "1"
      min_lcase:
        simple: "1"
      min_symbols:
        simple: "1"
      min_ucase:
        simple: "1"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 2420
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "52":
    id: "52"
    taskid: e75ba678-eaf8-432f-8b6a-ed4a5486715f
    type: regular
    task:
      id: e75ba678-eaf8-432f-8b6a-ed4a5486715f
      version: -1
      name: Check for user existence
      description: Gets information for a specified user.
      script: '|||gmail-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "53"
    scriptarguments:
      custom-field-mask: {}
      projection: {}
      user-id:
        simple: JohnS@demistodev.com
      view-type-public-domain: {}
    continueonerror: true
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 980,
          "y": 390
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "53":
    id: "53"
    taskid: 0d3b0145-c73d-4a38-8130-e93dd4b07d07
    type: condition
    task:
      id: 0d3b0145-c73d-4a38-8130-e93dd4b07d07
      version: -1
      name: Check that it doesn't exist
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "2"
      "yes":
      - "54"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: startWith
          left:
            value:
              simple: Account.Gmail.Address
            iscontext: true
          right:
            value:
              simple: johns
    - label: condition-2
      condition:
      - - operator: startWith
          left:
            value:
              simple: Account.Gmail.Address
            iscontext: true
          right:
            value:
              simple: JohnS
    view: |-
      {
        "position": {
          "x": 980,
          "y": 560
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "54":
    id: "54"
    taskid: 35c4081a-0b42-401f-83d6-f86a6b2dc935
    type: regular
    task:
      id: 35c4081a-0b42-401f-83d6-f86a6b2dc935
      version: -1
      name: gmail-delete-user
      description: Deletes a Gmail user.
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    scriptarguments:
      user-id:
        simple: JohnS@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 980,
          "y": 785
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "55":
    id: "55"
    taskid: 32eb325b-0619-4899-87b4-963abd594c66
    type: regular
    task:
      id: 32eb325b-0619-4899-87b4-963abd594c66
      version: -1
      name: check for user's existence
      description: Gets information for a specified user.
      script: '|||gmail-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "56"
    scriptarguments:
      custom-field-mask: {}
      projection: {}
      user-id:
        simple: user_to_delete@demistodev.com
      view-type-public-domain: {}
    continueonerror: true
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1380,
          "y": 2500
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "56":
    id: "56"
    taskid: a45f2036-308d-4634-8023-379a36ee822d
    type: condition
    task:
      id: a45f2036-308d-4634-8023-379a36ee822d
      version: -1
      name: Check user's existence
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "30"
      "yes":
      - "57"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Gmail.Address
            iscontext: true
          right:
            value:
              simple: user_to_delete@demistodev.com
    view: |-
      {
        "position": {
          "x": 1380,
          "y": 2680
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "57":
    id: "57"
    taskid: 4e2e1574-33bf-4eca-8dde-ef3b0328f4f7
    type: regular
    task:
      id: 4e2e1574-33bf-4eca-8dde-ef3b0328f4f7
      version: -1
      name: gmail-delete-user
      description: Deletes a Gmail user.
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "30"
    scriptarguments:
      user-id:
        simple: user_to_delete@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1380,
          "y": 2900
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
view: |-
  {
    "linkLabelsPosition": {
      "53_2_#default#": 0.28,
      "56_30_#default#": 0.42
    },
    "paper": {
      "dimensions": {
        "height": 5735,
        "width": 2110,
        "x": 50,
        "y": 50
      }
    }
  }
inputs: []
outputs: []
