id: e46f26aa-69c3-4154-8aa9-8b95af12a634
version: 21
name: Azure Virtual Machine Integration Test
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: e8d9950c-7c04-4cb5-8213-f85b201f4f28
    type: start
    task:
      id: e8d9950c-7c04-4cb5-8213-f85b201f4f28
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "12"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 295,
          "y": 50
        }
      }
    note: false
  "1":
    id: "1"
    taskid: 2e46b6f0-7d80-4b18-89b9-75cb23004dfd
    type: regular
    task:
      id: 2e46b6f0-7d80-4b18-89b9-75cb23004dfd
      version: -1
      name: List all the Azure VM Instances for a specific Resource Group
      description: List the VM instances in the Resource Group specified
      script: Azure Compute|||azure-vm-list-instances
      type: regular
      iscommand: true
      brand: Azure Compute
    nexttasks:
      '#none#':
      - "2"
      - "4"
      - "5"
    scriptarguments:
      resource_group:
        simple: RG1
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 295,
          "y": 370
        }
      }
    note: false
  "2":
    id: "2"
    taskid: 2f58c2ea-130b-4de3-80ce-90eb06984e1b
    type: condition
    task:
      id: 2f58c2ea-130b-4de3-80ce-90eb06984e1b
      version: -1
      name: Check if any of the instances come from Location == CentralUs
      scriptName: Exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "no":
      - "7"
      "yes":
      - "3"
    scriptarguments:
      value:
        complex:
          root: Azure
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Azure.Compute.Location
                iscontext: true
              right:
                value:
                  simple: centralus
          accessor: Compute.Location
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 60,
          "y": 545
        }
      }
    note: false
  "3":
    id: "3"
    taskid: 9abfa397-16f0-4186-8aaf-c349ab7d4b51
    type: regular
    task:
      id: 9abfa397-16f0-4186-8aaf-c349ab7d4b51
      version: -1
      name: Get more info on the VMs qualified in the previous task.
      script: Azure Compute|||azure-vm-get-instance-details
      type: regular
      iscommand: true
      brand: Azure Compute
    nexttasks:
      '#none#':
      - "9"
    scriptarguments:
      resource_group:
        simple: ${Azure.Compute.Resource_Group}
      virtual_machine_name:
        simple: ${Azure.Compute.Name}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 720
        }
      }
    note: false
  "4":
    id: "4"
    taskid: 4101d1cd-86e7-47e3-87e3-175474ef490c
    type: condition
    task:
      id: 4101d1cd-86e7-47e3-87e3-175474ef490c
      version: -1
      name: Check if any of the instances come from Location == sountcentralus
      scriptName: Exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "no":
      - "7"
    scriptarguments:
      value:
        complex:
          root: Azure
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Azure.Compute.Location
                iscontext: true
              right:
                value:
                  simple: sounthcentralcentralus
          accessor: Compute.Location
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 490,
          "y": 545
        }
      }
    note: false
  "5":
    id: "5"
    taskid: dad13a9d-8557-499d-8761-a73067566f21
    type: condition
    task:
      id: dad13a9d-8557-499d-8761-a73067566f21
      version: -1
      name: Check if any of the instances come from Location == westus
      scriptName: Exists
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "no":
      - "7"
      "yes":
      - "6"
    scriptarguments:
      value:
        complex:
          root: Azure
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Azure.Compute.Location
                iscontext: true
              right:
                value:
                  simple: westus
          accessor: Compute.Location
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 930,
          "y": 545
        }
      }
    note: false
  "6":
    id: "6"
    taskid: ef790e70-e23f-4e9f-8960-ae081285fdc5
    type: regular
    task:
      id: ef790e70-e23f-4e9f-8960-ae081285fdc5
      version: -1
      name: Get more info on the VMs qualified in the previous task.
      script: Azure Compute|||azure-vm-get-instance-details
      type: regular
      iscommand: true
      brand: Azure Compute
    scriptarguments:
      resource_group:
        simple: ${Azure.Compute.Resource_Group}
      virtual_machine_name:
        simple: ${Azure.Compute.Name}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 930,
          "y": 720
        }
      }
    note: false
  "7":
    id: "7"
    taskid: 83ed160f-4ed0-46aa-8ad1-e180eeba9d51
    type: regular
    task:
      id: 83ed160f-4ed0-46aa-8ad1-e180eeba9d51
      version: -1
      name: CloseInvestigation
      description: Close an investigation
      scriptName: CloseInvestigation
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      notes: {}
      reason: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 490,
          "y": 720
        }
      }
    note: false
  "8":
    id: "8"
    taskid: 7d98b21f-e41d-44af-8c37-2f1e2b0a3b1e
    type: regular
    task:
      id: 7d98b21f-e41d-44af-8c37-2f1e2b0a3b1e
      version: -1
      name: Power on a Virtual Machine
      description: Start a specified VM in the Resource Group
      script: Azure Compute|||azure-vm-start-instance
      type: regular
      iscommand: true
      brand: Azure Compute
    nexttasks:
      '#none#':
      - "11"
    scriptarguments:
      resource_group:
        simple: ${Azure.Compute.Resource_Group}
      virtual_machine_name:
        simple: ${Azure.Compute.Name}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1070
        }
      }
    note: false
  "9":
    id: "9"
    taskid: ffe2b3e6-78fe-4d45-8d7e-2154efbc8309
    type: regular
    task:
      id: ffe2b3e6-78fe-4d45-8d7e-2154efbc8309
      version: -1
      name: Power off a Virtual Machine
      description: Stop a specified VM in the Resource Group
      script: Azure Compute|||azure-vm-poweroff-instance
      type: regular
      iscommand: true
      brand: Azure Compute
    nexttasks:
      '#none#':
      - "8"
    scriptarguments:
      resource_group:
        simple: ${Azure.Compute.Resource_Group}
      virtual_machine_name:
        simple: ${Azure.Compute.Name}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 895
        }
      }
    note: false
  "10":
    id: "10"
    taskid: 8ed5c8d0-c8d0-449f-8e71-786d0b5d2772
    type: regular
    task:
      id: 8ed5c8d0-c8d0-449f-8e71-786d0b5d2772
      version: -1
      name: azure-vm-create-instance
      description: Create a 2016-Datacentre Windows Server VM with DemistoUser as
        the Username
      script: Azure Compute|||azure-vm-create-instance
      type: regular
      iscommand: true
      brand: Azure Compute
    scriptarguments:
      Admin_Password: {}
      Admin_Username: {}
      Nic_ID:
        simple: Test_NIC
      VM_Size: {}
      location:
        simple: centralus
      offer: {}
      publisher: {}
      resource_group:
        simple: RG1
      sku: {}
      version: {}
      virtual_machine_name:
        simple: TestDemisto
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1420
        }
      }
    note: false
  "11":
    id: "11"
    taskid: e3c89f1c-82fc-4030-872d-ebc9ea634f8a
    type: regular
    task:
      id: e3c89f1c-82fc-4030-872d-ebc9ea634f8a
      version: -1
      name: Create a Network Interface Card (NIC) and use to create an instance
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "10"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 1245
        }
      }
    note: false
  "12":
    id: "12"
    taskid: 042d95dd-01b2-4a9d-8d9f-88e1f302210a
    type: regular
    task:
      id: 042d95dd-01b2-4a9d-8d9f-88e1f302210a
      version: -1
      name: DeleteContext
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    scriptarguments:
      all:
        simple: "yes"
      index: {}
      key: {}
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 295,
          "y": 195
        }
      }
    note: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 1465,
        "width": 1260,
        "x": 50,
        "y": 50
      }
    }
  }
inputs: []
outputs: []
