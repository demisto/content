versionedfields: {}
commonfields:
  id: jamf
  version: -1
name: jamf
display: jamf
category: Endpoint
image: data:image/png;base64,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
description: Jamf device management
configuration:
- display: Server URL (e.g. https://192.168.0.1)
  name: server
  defaultvalue: ""
  type: 0
  required: true
- display: Username
  name: credentials
  defaultvalue: ""
  type: 9
  required: false
- display: Do not validate server certificate (insecure)
  name: insecure
  defaultvalue: ""
  type: 8
  required: false
- display: Use system proxy settings
  name: proxy
  defaultvalue: "true"
  type: 8
  required: false
script:
  script: |-
    baseUrl = params.server.replace(/[\/]+$/, '') + '/JSSResource/';
    commandDictionary = {
        'jamf-get-computers': {
            url: 'computers',
            method: 'GET',
            extended: true,
            translator: [
                {
                    contextPath: 'Jamf.Computers(val.ID==obj.ID)',
                    title: 'Jamf get computers result',
                    innerPath: 'computers',
                    data: [
                        {to: 'ID', from: 'id'},
                        {to: 'Name', from: 'name'},
                    ]
                }
            ],
        },
        'jamf-get-computers-match': {
            url: 'computers/match/%match%',
            method: 'GET',
            extended: true,
            argsToURLEncode: ['match'],
            translator: [
                {
                    contextPath: 'Jamf.Computers(val.ID==obj.ID)',
                    title: 'Jamf get computer match result',
                    innerPath: 'computers',
                    data: [
                        {to: 'ID', from: 'id'},
                        {to: 'Name', from: 'name'},
                        {to: 'AltMAC', from: 'alt_mac_address'},
                        {to: 'MAC', from: 'mac_address'},
                        {to: 'Serial', from: 'serial_number'},
                        {to: 'UDID', from: 'udid'},
                        {to: 'AssetTag', from: 'asset_tag'},
                        {to: 'BarCode-1', from: 'bar_code_1'},
                        {to: 'BarCode-2', from: 'bar_code_2'},
                        {to: 'Building', from: 'building'},
                        {to: 'BuildingName', from: 'building_name'},
                        {to: 'Department', from: 'department'},
                        {to: 'DepartmentName', from: 'department_name'},
                        {to: 'Email', from: 'email'},
                        {to: 'EmailAddress', from: 'email_address'},
                        {to: 'Position', from: 'position'},
                        {to: 'Username', from: 'username'},
                        {to: 'Realname', from: 'realname'},
                        {to: 'Room', from: 'room'},
                    ]
                }
            ],
        },
        'test-module': {
            url: 'computers',
            method: 'GET',
        },
    };

    function createContext(data, id) {
        var createContextSingle = function(obj) {
            var res = {};
            var keys = Object.keys(obj);
            keys.forEach(function(k) {
                var values = k.split('-');
                var current = res;
                for (var j = 0; j<values.length - 1; j++) {
                    if (!current[values[j]]) {
                        current[values[j]] = {};
                    }
                    current = current[values[j]];
                }
                current[values[j]] = obj[k];
            });
            if (!res.ID && id) {
                res.ID = id;
            }
            return res;
        };
        if (data instanceof Array) {
            var res = [];
            for (var j=0; j < data.length; j++) {
                res.push(createContextSingle(data[j]));
            }
            return res;
        }
        return createContextSingle(data);
    }

    function mapObjFunction(mapFields, filter) {
        var transformSingleObj= function(obj) {
            var res = {};
            mapFields.forEach(function(f) {
                result = dq(obj, f.from);
                console.log(result)
                if (result || result === false) {
                    res[f.to] = result;
                }
            });
            if (filter && !filter(res)) {
                return undefined;
            }
            return res;
        };
        return function(obj) {
            if (obj instanceof Array) {
                var res = [];
                for (var j=0; j < obj.length; j++) {
                    var current = transformSingleObj(obj[j]);
                    if (current) {
                        res.push(current);
                    }
                }
                return res;
            }
            return transformSingleObj(obj);
        };
    }


    var sendRequest = function(url, method, args) {
        var httpParams = {
           Method: method,
           Headers: {
                'Content-Type': ['application/json'],
                'Accept': ['application/json']
           },
           Username: params.credentials.identifier,
           Password: params.credentials.password,
           Body: method !== 'GET' ? JSON.stringify(args) : undefined
        };
        var res = http(
                baseUrl + url + (method === 'GET' && method ? encodeToURLQuery(args) : ''),
                httpParams,
                params.insecure,
                params.proxy
            );

        if (res.StatusCode < 200 || res.StatusCode >= 300) {
            throw 'Request ' + url + ' failed, request status code: ' + res.StatusCode + ' and Body: ' + res.Body + '.';
        }
        if (!res.Body) {
            return 'Done';
        }
        try {
            return JSON.parse(res.Body);
        }
        catch (ex) {
            throw 'Failed to create JSON from response ' + res.Body + ', exception is ' + ex;
        }
    }

    currentCommand = commandDictionary[command];
    if (currentCommand.defaultArgs) {
        keys = Object.keys(currentCommand.defaultArgs);
        for (var k in keys) {
            if (!args[keys[k]] && args[keys[k]] !== false) {
                args[keys[k]] = currentCommand.defaultArgs[keys[k]];
            }
        }
    }
    if (currentCommand.argsToURLEncode) {
        for (var k in currentCommand.argsToURLEncode) {
            args[currentCommand.argsToURLEncode[k]] = encodeURIComponent(args[currentCommand.argsToURLEncode[k]]);
        }
    }
    var result = sendRequest(replaceInTemplatesAndRemove(currentCommand.url, args), currentCommand.method, args);
    if (command === 'test-module') {
        return 'ok';
    }
    var entries = [];
    if (currentCommand.extended) {
        for (var j in currentCommand.translator) {
            var current = currentCommand.translator[j];
            var entry = {
                Type: entryTypes.note,
                Contents: result,
                ContentsFormat: formats.json,
            };
            var currentContent = current.innerPath ? dq(result, current.innerPath) : result;
            var translated = mapObjFunction(current.data) (current.countingDict ? toArray(currentContent) : currentContent);
            entry.ReadableContentsFormat = formats.markdown;
            entry.HumanReadable = tableToMarkdown(current.title,translated);
            entry.EntryContext = {};
            var context = createContext(translated);
            entry.EntryContext[current.contextPath] = context;
            entries.push(entry);
        }
    } else {
        return result;
    }
    return entries;
  type: javascript
  commands:
  - name: jamf-get-computers
    description: Get a list of managed computers
    arguments: []
    outputs:
    - contextPath: Jamf.Computers.ID
      description: Computer ID
    - contextPath: Jamf.Computers.Name
      description: Computer name
  - name: jamf-get-computers-match
    description: Get a list of managed computers that matches inputs query
    arguments:
    - name: match
      required: true
      description: Match criteria. e.g. to retrieve all computers associated with a user use $UserID
    outputs:
    - contextPath: Jamf.Computers.ID
      description: Computer ID
    - contextPath: Jamf.Computers.Name
      description: Computer name
    - contextPath: Jamf.Computers.AltMAC
      description: Computer alternative MAC
    - contextPath: Jamf.Computers.MAC
      description: Computer MAC
    - contextPath: Jamf.Computers.Serial
      description: Computer serial
    - contextPath: Jamf.Computers.UDID
      description: Computer UDID
    - contextPath: Jamf.Computers.AssetTag
      description: Computer asset tag
    - contextPath: Jamf.Computers.BarCode.1
      description: Computer barcode 1
    - contextPath: Jamf.Computers.BarCode.2
      description: Computer barcode 2
    - contextPath: Jamf.Computers.Building
      description: Computer building
    - contextPath: Jamf.Computers.BuildingName
      description: Computer building name
    - contextPath: Jamf.Computers.Department
      description: Computer department
    - contextPath: Jamf.Computers.DepartmentName
      description: Computer department name
    - contextPath: Jamf.Computers.Email
      description: Computer email
    - contextPath: Jamf.Computers.EmailAddress
      description: Computer email address
    - contextPath: Jamf.Computers.Position
      description: Computer position
    - contextPath: Jamf.Computers.Username
      description: Computer username
    - contextPath: Jamf.Computers.Realname
      description: Computer real name
    - contextPath: Jamf.Computers.Room
      description: Computer room
hidden: false
