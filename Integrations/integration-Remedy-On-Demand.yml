commonfields:
  id: Remedy On-Demand
  version: -1
name: Remedy On-Demand
display: Remedy On-Demand
category: Case Management
image: data:image/png;base64,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
description: Use Remedy On-Demand to manage tickets
detaileddescription: |-
  #### Remedy Rest API Configuration:
  - Follow [this article](https://docs.bmc.com/docs/display/public/ars9000/Configuring+the+REST+API) steps to enable Remedy Rest API.
  - Please note that default API ports are 8443(https) and 8008(http).
  - You should not  append 'arsys' URI to Server URL.
configuration:
- display: Server URL (e.g. 'https://myurl.com', 'http://41.79.151.82')
  name: url
  defaultvalue: ""
  type: 0
  required: true
- display: Port
  name: port
  defaultvalue: "8008"
  type: 0
  required: false
- display: Username
  name: credentials
  defaultvalue: ""
  type: 9
  required: true
- display: Use system proxy settings
  name: proxy
  defaultvalue: ""
  type: 8
  required: false
- display: Do not validate server certificate (insecure)
  name: insecure
  defaultvalue: ""
  type: 8
  required: false
script:
  script: |
    // remove '/' at the end of the url (if exists)
    params.url = params.url.replace(/[\/]+$/, '');

    var baseUrl = params.url;
    if (params.port) {
        baseUrl = baseUrl + ':' + params.port;
    }
    var insecure = params.insecure;
    var proxy = params.proxy;

    // returns incId padded with '0's that is 15 length string. e.g. '82' -> '000000000000082'
    var preperIncId = function (incId) {
        var res = '000000000000000' + incId;
        return res.substr(-15);
    };

    var createTableEntry = function (name, contents, context, headers) {
        return {
            // type
            Type: entryTypes.note,
             // contents
            ContentsFormat: formats.json,
            Contents: contents,
            // human-readable
            ReadableContentsFormat: formats.markdown,
            HumanReadable: tableToMarkdown(name, contents, headers),
            // context
            EntryContext: context
        };
    };

    // mutetor that removes all falsly fields
    var filterEmptyFields = function(obj) {
        Object.keys(obj).forEach(function(key) {
            if (obj[key] === undefined || obj[key] === null) {
                delete obj[key];
            }
        });
    };

    var sendRequest = function(url, token, method, body) {

        var res = http(
            url,
            {
                Method: method || 'GET',
                Headers: {
                    'Content-Type': ['application/json'],
                    'Authorization': ['AR-JWT ' + token]
                },
                Body: body
            },
            insecure,
            proxy
        );

        if (res.StatusCode < 200 || res.StatusCode >= 300) {
            logout(token);
            throw 'Request Failed'
                + '\nurl: ' + url
                + '\nStatus code: ' + res.StatusCode
                + '\nBody: ' + JSON.stringify(res);
        }

        return res;
    };

    var login = function() {
        var url = baseUrl + '/api/jwt/login/';

        var body = {
            username: params.credentials.identifier,
            password: params.credentials.password
        };

        var res = http(
            url,
            {
                Method: 'POST',
                Headers: {
                    'Content-Type': ['application/x-www-form-urlencoded']
                },
                Body: encodeToURLQuery(body).replace(/^\?/, '')
            },
            insecure,
            proxy
        );

        if (!res || res.StatusCode < 200 || res.StatusCode >= 300) {
            throw 'Request Failed'
                + '\nurl: ' + url
                + '\nStatus code: ' + res.StatusCode
                + '.\nBody: ' + JSON.stringify(res, null, 2);
        }

        // retrun the body which is tokenKey
        return res.Body;
    };

    var logout = function(token) {
        var url = baseUrl + '/api/jwt/logout/';
        sendRequest(url, token, 'POST');
    };

    var convertIncidentToTicket = function(incident) {
        return {
            ID: incident['Request ID'],
            Submitter: incident.Submitter,
            Status: incident.Status,
            Description: incident.Description,
            Source: incident['Reported Source'],
            Impact: incident.Impact,
            Urgency: incident.Urgency,
            Type: incident.Service_Type
        };
    };

    var createIncident = function(firstName, lastName, description, status, source, serviceType, impact, urgency, customFields) {
        var url = baseUrl + '/api/arsys/v1/entry/HPD:IncidentInterface_Create';
        var token = login();

        var body = {
           "values" : {
               "z1D_Action" : "CREATE",
               "First_Name" : firstName,
               "Last_Name" : lastName,
               "Description" : description,
               "Status" : status,
               "Reported Source": source,
               "Service_Type" : serviceType,
               "Impact" : impact,
               "Urgency" : urgency
         }
        };
        if (customFields) {
            var customFieldsArr = customFields.split(',');
            for (var i = 0; i < customFieldsArr.length; i++) {
                var equalIndex = customFieldsArr[i].indexOf('=');
                var key = customFieldsArr[i].substring(0, equalIndex);
                var value = customFieldsArr[i].substring(equalIndex + 1);
                body.values[key] = value;
            }
        }
        var res = sendRequest(url, token, "POST", JSON.stringify(body));
        // get created incident
        var incidentUrl = res && res.Headers && res.Headers.Location && res.Headers.Location[0];
        res = sendRequest(incidentUrl, token);
        logout(token);
        var incident = JSON.parse(res.Body).values;
        filterEmptyFields(incident);

        var context = {
            Ticket: convertIncidentToTicket(incident)
        };

        return createTableEntry("Incident created:",incident, context);
    };

    var getIncident = function(id, title) {
        var url = baseUrl + '/api/arsys/v1/entry/HPD:IncidentInterface_Create/' + preperIncId(id);
        var token = login();
        var res = sendRequest(url, token);
        logout(token);
        var incident = JSON.parse(res.Body).values;
        filterEmptyFields(incident);

        var context = {
            'Ticket(val.ID && val.ID == obj.ID)': convertIncidentToTicket(incident)
        };
        return createTableEntry(title || "Incident:",incident, context);
    };

    var fetchIncidents = function(query) {
        var url = baseUrl + '/api/arsys/v1/entry/HPD:IncidentInterface_Create/';
        if(query) {
            url += '?q=' + encodeURIComponent(query);
        }
        var token = login();
        var res = sendRequest(url, token);
        logout(token);
        var body = JSON.parse(res.Body);

        var incidents = body.entries.map(function(b) { return b.values});
        incidents.forEach(filterEmptyFields);
        var context = {
            'Ticket(val.ID && val.ID == obj.ID)': incidents.map(convertIncidentToTicket)
        };
        return createTableEntry("Incidents:",incidents, context);
    };

    var updateIncident = function(incID, updateObject) {
        var url = baseUrl + '/api/arsys/v1/entry/HPD:IncidentInterface_Create/' + preperIncId(incID);
        var token = login();

        filterEmptyFields(updateObject);
        var body = {
           "values" : updateObject
        };

        sendRequest(url, token, "PUT", JSON.stringify(body));
        return getIncident(incID, 'Updated incident:');
    };

    switch (command) {
        case 'test-module':
            fetchIncidents();
            return 'ok';
        case 'remedy-incident-create':
            return createIncident(
                args['first-name'],
                args['last-name'],
                args.description,
                args.status,
                args.source,
                args['service-type'],
                args.impact,
                args.urgency,
                args['custom-fields']
            );
        case 'remedy-get-incident':
            return getIncident(args.ID);
        case 'remedy-fetch-incidents':
            return fetchIncidents(args.query);
        case 'remedy-incident-update':
            return updateIncident(
                args.ID,
                {
                    Description: args.description,
                    Status: args.status,
                    'Reported Source': args.source,
                    'Service_Type': args['service-type'],
                    Impact: args.impact,
                    Urgency: args.urgency
                }
            );
    }
  type: javascript
  commands:
  - name: remedy-incident-create
    arguments:
    - name: first-name
      required: true
      description: costumer's first name (make sure costumer already exists)
    - name: last-name
      required: true
      description: costumer's first name (make sure costumer already exists)
    - name: description
      required: true
      description: Incident description
    - name: status
      required: true
      auto: PREDEFINED
      predefined:
      - New
      - Assigned
      - In Progress
      - Pending
      - Resolved
      - Closed
      - Cancelled
      description: Incident status
    - name: source
      required: true
      auto: PREDEFINED
      predefined:
      - Direct Input
      - Email
      - External Escalation
      - Fax
      - Self-Service
      - Systems Management
      - Phone
      - Voice Mail
      - Walk
      - Web
      - Other
      description: Incident source
    - name: service-type
      required: true
      auto: PREDEFINED
      predefined:
      - User Service Restoration
      - User Service Request
      - Infrastructure Event
      - Infrastructure Restoration
      description: Incident service-type
    - name: impact
      required: true
      auto: PREDEFINED
      predefined:
      - 1-Extensive/Widespread
      - 2-Significant/Large
      - 3-Moderate/Limited
      - 4-Minor/Localized
      description: Incident impact
    - name: urgency
      required: true
      auto: PREDEFINED
      predefined:
      - 1-Critical
      - 2-High
      - 3-Medium
      - 4-Low
      description: Incident urgency
    - name: custom-fields
      description: Custom fields for incident creation. Should be comma separated
        query (i.e. field1=value1,field2=value2).
    outputs:
    - contextPath: Ticket.ID
      description: Ticket ID
    - contextPath: Ticket.Submitter
      description: Ticket submitter
    - contextPath: Ticket.Status
      description: Ticket status
    - contextPath: Ticket.Description
      description: Ticket description
    - contextPath: Ticket.Source
      description: Ticket reported source
    - contextPath: Ticket.Impact
      description: TicketiImpact
    - contextPath: Ticket.Urgency
      description: Ticket urgency
    - contextPath: Ticket.Type
      description: Ticket service type
    description: Create new ticket incident
  - name: remedy-get-incident
    arguments:
    - name: ID
      required: true
      default: true
      description: Incident ID (we will pad leading zeros if necessary)
    outputs:
    - contextPath: Ticket.ID
      description: Ticket ID
    - contextPath: Ticket.Submitter
      description: Ticket submitter
    - contextPath: Ticket.Status
      description: Ticket status
    - contextPath: Ticket.Description
      description: Ticket description
    - contextPath: Ticket.Source
      description: Ticket reported source
    - contextPath: Ticket.Impact
      description: TicketiImpact
    - contextPath: Ticket.Urgency
      description: Ticket urgency
    - contextPath: Ticket.Type
      description: Ticket service type
    description: Get one incident by ID
  - name: remedy-fetch-incidents
    arguments:
    - name: query
      description: Search query/qualification format of '<field> LIKE "<values>"'
        (e.g. 'Company LIKE "My company"', 'Submitter LIKE "%john%"')
    outputs:
    - contextPath: Ticket.ID
      description: Ticket ID
    - contextPath: Ticket.Submitter
      description: Ticket submitter
    - contextPath: Ticket.Status
      description: Ticket status
    - contextPath: Ticket.Description
      description: Ticket description
    - contextPath: Ticket.Source
      description: Ticket reported source
    - contextPath: Ticket.Impact
      description: TicketiImpact
    - contextPath: Ticket.Urgency
      description: Ticket urgency
    - contextPath: Ticket.Type
      description: Ticket service type
    description: Fetch all incidents
  - name: remedy-incident-update
    arguments:
    - name: ID
      required: true
      default: true
      description: Incident ID
    - name: description
      description: Updated description
    - name: status
      auto: PREDEFINED
      predefined:
      - New
      - Assigned
      - In Progress
      - Pending
      - Resolved
      - Closed
      - Cancelled
      description: Updated status (unchanged if not specified)
    - name: urgency
      auto: PREDEFINED
      predefined:
      - 1-Critical
      - 2-High
      - 3-Medium
      - 4-Low
      description: Updated urgency (unchanged if not specified)
    - name: impact
      auto: PREDEFINED
      predefined:
      - 1-Extensive/Widespread
      - 2-Signinficant/Large
      - 3-Moderate/Limited
      - 4-Minor/Localized
      description: Updated impact (unchanged if not specified)
    - name: source
      auto: PREDEFINED
      predefined:
      - Direct Input
      - Email
      - External Escalation
      - Fax
      - Self-Service
      - Systems Management
      - Phone
      - Voice Mail
      - Walk
      - Web
      - Other
      description: Updated reported source (unchanged if not specified)
    - name: service-type
      auto: PREDEFINED
      predefined:
      - User Service Restoration
      - User Service Request
      - Infrastructure Event
      - Infrastructure Restoration
      description: Updated service-type (unchanged if not specified)
    outputs:
    - contextPath: Ticket.ID
      description: Ticket ID
    - contextPath: Ticket.Submitter
      description: Ticket submitter
    - contextPath: Ticket.Status
      description: Ticket status
    - contextPath: Ticket.Description
      description: Ticket description
    - contextPath: Ticket.Source
      description: Ticket reported source
    - contextPath: Ticket.Impact
      description: TicketiImpact
    - contextPath: Ticket.Urgency
      description: Ticket urgency
    - contextPath: Ticket.Type
      description: Ticket service type
    description: Update exiting incident
hidden: false
releaseNotes: "-"