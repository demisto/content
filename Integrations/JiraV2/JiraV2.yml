commonfields:
  id: jira-v2
  version: -1
name: jira-v2
display: Atlassian Jira (v2)
fromversion: 2.6.0
category: Case Management
description: Issue tracking product, developed by Atlassian
configuration:
- display: Jira URL, in the format https://demisto.atlassian.net/
  name: url
  defaultvalue: ""
  type: 0
  required: true
- display: Username
  name: username
  defaultvalue: ""
  type: 0
  required: false
- display: Password
  name: password
  defaultvalue: ""
  type: 4
  required: false
- display: ConsumerKey
  name: consumerKey
  defaultvalue: OauthKey
  type: 0
  required: false
- display: AccessToken
  name: accessToken
  defaultvalue: ""
  type: 0
  required: false
- display: PrivateKey
  name: privateKey
  defaultvalue: ""
  type: 14
  required: false
- display: Query for fetching incident in JQL
  name: query
  defaultvalue: status!=done
  type: 0
  required: false
- display: Issue index to start fetching incidents from
  name: idOffset
  defaultvalue: ""
  type: 0
  required: false
- display: Trust any certificate (unsecure)
  name: insecure
  defaultvalue: "true"
  type: 8
  required: false
- display: Use system proxy settings
  name: proxy
  defaultvalue: "false"
  type: 8
  required: false
- display: Fetch incidents
  name: isFetch
  defaultvalue: ""
  type: 8
  required: false
- display: Incident type
  name: incidentType
  defaultvalue: ""
  type: 13
  required: false
- display: Use created field to fetch incidents
  name: fetchByCreated
  defaultvalue: ""
  type: 8
  required: false
- display: API token
  name: APItoken
  defaultvalue: ""
  type: 0
  required: false
script:
  script: ''
  type: python
  commands:
  - name: jira-issue-query
    arguments:
    - name: query
      required: true
      default: true
      description: JQL query string
    - name: startAt
      description: The index of the first issue to return (0-based) - format int
    - name: maxResults
      description: the maximum number of issues to return (defaults to 50). The maximum
        allowable value is dictated by the JIRA property 'jira.search.views.default.max'.
        If you specify a value that is higher than this number, your search results
        will be truncated.
    - name: headers
      description: Headers to display in Human readable format
    outputs:
    - contextPath: Ticket.Id
      description: Id of ticket
    - contextPath: Ticket.Key
      description: Key of ticket
    - contextPath: Ticket.Assignee
      description: User assigned to ticket
    - contextPath: Ticket.Creator
      description: User who created the ticket
    - contextPath: Ticket.Summary
      description: Summary of ticket
    - contextPath: Ticket.Status
      description: Status of ticket
    description: Query Jira issues
  - name: jira-get-issue
    arguments:
    - name: issueId
      required: true
      default: true
      description: Issue id
    - name: headers
      description: Headers to display in Human readable format
    - name: getAttachments
      auto: PREDEFINED
      predefined:
      - "true"
      - "false"
      defaultValue: "false"
      description: If "true", retrives issues attachment
    - name: expandLinks
      auto: PREDEFINED
      predefined:
      - "true"
      - "false"
      defaultValue: "false"
      description: If "true", expands issue's links
    outputs:
    - contextPath: Ticket.Id
      description: Id of ticket
    - contextPath: Ticket.Key
      description: Key of ticket
    - contextPath: Ticket.Assignee
      description: User assigned to ticket
    - contextPath: Ticket.Creator
      description: User who created the ticket
    - contextPath: Ticket.Summary
      description: Summary of ticket
    - contextPath: Ticket.Status
      description: Status of ticket
    - contextPath: File.Size
      description: File size
    - contextPath: File.SHA256
      description: File SHA256
    - contextPath: File.Name
      description: File name
    - contextPath: File.SHA1
      description: File SHA1
    description: Fetch issue from Jira
  - name: jira-create-issue
    arguments:
    - name: issueJson
      description: Issue object in json format
    - name: summary
      required: true
      description: Summary of the issue, a mandatory field
    - name: projectKey
      description: Project key to associate the issue
    - name: issueTypeName
      description: Choose issue type by name - e.g. Problem
    - name: issueTypeId
      description: Choose issue type by its numeric ID
    - name: projectName
      description: Project name to associate the issue
    - name: description
      description: Issue description
    - name: labels
      description: 'comma separated list of label '
    - name: priority
      description: priorty name , like High/Medium
    - name: dueDate
      description: DueDate for the issue, in format of 2018-03-11
    - name: assignee
      description: assignee name
    - name: reporter
      description: reporter name
    - name: parentIssueKey
      description: Parent issue key if you create a sub-task
    - name: parentIssueId
      description: Parent issue ID if you create a sub-task
    outputs:
    - contextPath: Ticket.Id
      description: Id of ticket
    - contextPath: Ticket.Key
      description: Key of ticket
    description: Create a new issue on Jira
  - name: jira-issue-upload-file
    arguments:
    - name: issueId
      required: true
      description: Issue id
    - name: upload
      description: Entry id to upload
    description: Upload a file attachments to an issue
  - name: jira-issue-add-comment
    arguments:
    - name: issueId
      required: true
      default: true
      description: Issue id
    - name: comment
      required: true
      description: Comment - the actual comment body
    - name: visibility
      description: Make comment visible only to a certain role - like Administrators
    description: Add new comment to existing Jira issue
  - name: jira-issue-add-link
    arguments:
    - name: globalId
      description: If a globalId is provided and a remote issue link exists with that
        globalId, the remote issue link is updated
    - name: relationship
      description: object relationship to issue , like - causes
    - name: url
      required: true
      description: link url
    - name: title
      required: true
      description: link title
    - name: summary
      description: link summary
    - name: issueId
      required: true
      description: Issue Id
    description: Creates (or updates) issue link
  - name: jira-edit-issue
    arguments:
    - name: issueId
      required: true
      description: The ID of the issue to edit
    - name: issueJson
      description: Issue object in json format
    - name: summary
      description: Summary of the issue
    - name: description
      description: Issue description
    - name: labels
      description: 'comma separated list of label '
    - name: priority
      description: priorty name , like High/Medium
    - name: dueDate
      description: DueDate for the issue, in format of 2018-03-11
    - name: assignee
      description: assignee name
    - name: status
      description: status name
    outputs:
    - contextPath: Ticket.Id
      description: Id of ticket
    - contextPath: Ticket.Key
      description: Key of ticket
    - contextPath: Ticket.Assignee
      description: User assigned to ticket
    - contextPath: Ticket.Creator
      description: User who created the ticket
    - contextPath: Ticket.Summary
      description: Summary of ticket
    - contextPath: Ticket.Status
      description: Status of ticket
    description: Edit JIRA issue
  - name: jira-get-comments
    arguments:
    - name: issueId
      required: true
      description: The issue id to get comments of
    outputs:
    - contextPath: Ticket.Comment.Comment
      description: The comment text
      type: string
    - contextPath: Ticket.Comment.Created
      description: Creation date
      type: string
    - contextPath: Ticket.Comment.User
      description: The user that created the comment
      type: string
    description: Gets the comments added to a ticket
  - name: jira-delete-issue
    arguments:
    - name: issueIdOrKey
      required: true
      description: issue ID or Key
    description: deletes an issue
  - name: jira-get-id-offset
    outputs:
    - contextPath: Ticket.idOffSet
      description: ID Offset
      type: string
    description: gets the ID Offset, i.e., the first issue id.
  dockerimage: demisto/python3:3.7.2.200
  isfetch: true
  runonce: false
tests:
  - Jira-v2-Test
releaseNotes: Rewritten into python; fetch fixed; better JQL support; getAttachments flag in get-issue.
