commonfields:
  id: MD2HTML
  version: -1
name: MD2HTML
script: |-
  from markdown2 import Markdown

  markdowner = Markdown(extras=["tables"])
  file_entry = demisto.args().get('fileID')
  file = demisto.getFilePath(file_entry)
  if isinstance(file,dict):
    file_path =file['path']
    file_name = file['name']
    raw_name = file_name.split(".")
    formatted_name = raw_name[0]+".html"
  try:
    fopen = open(str(file_path), "r")
    data = fopen.read()
  except IOError:
      demisto.results("Could not read file - {}".format(file_name))
  res = markdowner.convert(data)
  fopen.close()
  demisto.results(fileResult(formatted_name, res))

type: python
tags: []
comment: Converts MarkDown files to HTML files
enabled: true
args:
- name: fileID
  required: true
  description: Entry ID of the file to be converted.
scripttarget: 0
runonce: false
dockerimage: demisto/markdown2
tests:
  - test-md2html
